"use strict";(self.__chunk_yandex_ymaps3=self.__chunk_yandex_ymaps3||[]).push([[175],{91928:(t,e,i)=>{i.d(e,{Z:()=>a});var s=i(8081),o=i.n(s),n=i(23645),r=i.n(n)()(o());r.push([t.id,".ymaps3x0--map{display:block;height:0;overflow:hidden;position:relative;touch-action:none;-webkit-user-select:none;user-select:none;width:0}.ymaps3x0--layer{display:block;height:100%;left:0;overflow:hidden;position:absolute;top:0;width:100%;z-index:0}.ymaps3x0--tile-layer{-webkit-touch-callout:none;overflow:visible;pointer-events:none;transform-origin:center;-webkit-user-select:none;user-select:none}.ymaps3x0--tile-layer__container{display:block;height:100%;left:0;opacity:1;overflow:visible;top:0;transform:translateZ(0);transform-origin:center;transform-style:preserve-3d;transition:opacity .1s ease-in-out;width:100%}.ymaps3x0--tile-layer__container,.ymaps3x0--tile-layer__container>canvas,.ymaps3x0--tile-layer__container>img{background:#0000;position:absolute}.ymaps3x0--tile-layer__container>img::selection{background:#0000}.ymaps3x0--marker-layer{background:#0000;height:0;overflow:visible;width:0}.ymaps3x0--marker{position:absolute;z-index:0}.ymaps3x0--graphics-layer,.ymaps3x0--marker{transform:translateZ(0);-webkit-user-select:none;user-select:none}.ymaps3x0--graphics-layer{pointer-events:none}.ymaps3x0--graphics-layer svg>*{pointer-events:visiblePainted}.ymaps3x0--main-engine-container,.ymaps3x0--top-engine-container{display:block;height:100%;overflow:hidden;width:100%}.ymaps3x0--main-engine-container.ymaps3x0--hide{opacity:0;transition:opacity .7s ease}.ymaps3x0--magnifier{background-color:#1a3dc133;border:1px solid #5066ba;position:absolute;transform-origin:top left;z-index:1000}.ymaps3x0--magnifier-backdrop{bottom:0;left:0;position:fixed;right:0;top:0;z-index:99999}",""]);const a=r},91149:(t,e,i)=>{i.d(e,{Z:()=>a});var s=i(8081),o=i.n(s),n=i(23645),r=i.n(n)()(o());r.push([t.id,".ymaps3x0--map-container{box-sizing:border-box;direction:ltr;display:block;height:100%;margin:0;overflow:hidden;padding:0;position:relative;width:100%}",""]);const a=r},91847:(t,e,i)=>{i.d(e,{Z:()=>a});var s=i(8081),o=i.n(s),n=i(23645),r=i.n(n)()(o());r.push([t.id,".ymaps3x0--button{background-image:none;border:0;box-sizing:border-box;cursor:pointer;display:inline-block;margin:0;outline:0;padding:0;position:relative;text-align:left;-webkit-user-select:none;user-select:none;vertical-align:middle;white-space:nowrap}.ymaps3x0--button:disabled{cursor:default}.ymaps3x0--button:disabled>:first-child{opacity:.5}.ymaps3x0--control-button{background-color:#fff;border-radius:8px;box-sizing:border-box;display:block;padding:8px}.ymaps3x0--control-button__dark{background-color:#111;color:#ccc}",""]);const a=r},72217:(t,e,i)=>{i.d(e,{Z:()=>a});var s=i(8081),o=i.n(s),n=i(23645),r=i.n(n)()(o());r.push([t.id,".ymaps3x0--control{box-sizing:border-box;pointer-events:all}.ymaps3x0--control__background{background-color:#fff;border-radius:8px;box-shadow:0 2px 6px 0 #0003}.ymaps3x0--control__dark{background-color:#111;color:#ccc}.ymaps3x0--controls_vertical>.ymaps3x0--control{margin-bottom:8px}.ymaps3x0--controls_horizontal>.ymaps3x0--control{margin-right:8px}.ymaps3x0--controls_vertical>.ymaps3x0--control:last-child{margin-bottom:0}.ymaps3x0--controls_horizontal>.ymaps3x0--control:last-child{margin-right:0}",""]);const a=r},66621:(t,e,i)=>{i.d(e,{Z:()=>a});var s=i(8081),o=i.n(s),n=i(23645),r=i.n(n)()(o());r.push([t.id,".ymaps3x0--controls{box-sizing:border-box;display:flex;padding:12px;pointer-events:none;position:absolute;z-index:1000}.ymaps3x0--controls_vertical{flex-direction:column}.ymaps3x0--controls_horizontal{flex-direction:row}.ymaps3x0--controls_top{align-items:flex-start;top:0}.ymaps3x0--controls_left{align-items:flex-start;left:0}.ymaps3x0--controls_bottom{align-items:flex-end;bottom:0}.ymaps3x0--controls_right{align-items:flex-end;right:0}.ymaps3x0--controls_left.ymaps3x0--controls_center,.ymaps3x0--controls_right.ymaps3x0--controls_center{height:100%;justify-content:center;top:0}.ymaps3x0--controls_bottom.ymaps3x0--controls_center,.ymaps3x0--controls_top.ymaps3x0--controls_center{justify-content:center;left:0;width:100%}.ymaps3x0--controls_bottom.ymaps3x0--controls_left.ymaps3x0--controls_vertical,.ymaps3x0--controls_top.ymaps3x0--controls_left.ymaps3x0--controls_vertical{align-items:flex-start}.ymaps3x0--controls_bottom.ymaps3x0--controls_right.ymaps3x0--controls_vertical,.ymaps3x0--controls_top.ymaps3x0--controls_right.ymaps3x0--controls_vertical{align-items:flex-end}",""]);const a=r},62999:(t,e,i)=>{i.d(e,{Z:()=>E});var s=i(8081),o=i.n(s),n=i(23645),r=i.n(n),a=i(61667),h=i.n(a),l=new URL(i(72841),i.b),c=new URL(i(84026),i.b),d=new URL(i(36728),i.b),u=new URL(i(7717),i.b),_=r()(o()),p=h()(l),m=h()(c),g=h()(d),y=h()(u);_.push([t.id,".ymaps3x0--icon-logo-en-black{background:url("+p+") 50%/cover no-repeat}.ymaps3x0--icon-logo-en-white{background:url("+m+") 50%/cover no-repeat}.ymaps3x0--icon-logo-ru-black{background:url("+g+") 50%/cover no-repeat}.ymaps3x0--icon-logo-ru-white{background:url("+y+") 50%/cover no-repeat}",""]);const E=_},35787:(t,e,i)=>{i.d(e,{Z:()=>a});var s=i(8081),o=i.n(s),n=i(23645),r=i.n(n)()(o());r.push([t.id,".ymaps3x0--map-copyrights{align-items:center;box-sizing:border-box;display:flex;justify-content:flex-end;margin:10px;position:absolute}.ymaps3x0--map-copyrights_top{top:0}.ymaps3x0--map-copyrights_bottom{bottom:0}.ymaps3x0--map-copyrights_right{right:0}.ymaps3x0--map-copyrights_left{left:0}.ymaps3x0--map-copyrights__container{background-color:#ffffffbf;border-radius:3px;box-sizing:border-box;color:#000;font:11px/14px Verdana,Arial,sans-serif;padding:0 4px 1px;white-space:nowrap}.ymaps3x0--map-copyrights__dark-container{background-color:#000000bf;color:#ccc}.ymaps3x0--map-copyrights__text{box-sizing:border-box;margin-right:5px}.ymaps3x0--map-copyrights__text:empty{display:none}.ymaps3x0--map-copyrights__user-agreements{box-sizing:border-box;color:inherit;text-decoration:underline}.ymaps3x0--map-copyrights__logo{box-sizing:border-box;flex:0 0 auto;margin-left:5px}.ymaps3x0--map-copyrights__scale{position:absolute}.ymaps3x0--map-copyrights_right>.ymaps3x0--map-copyrights__scale{right:0}.ymaps3x0--map-copyrights_left>.ymaps3x0--map-copyrights__scale{left:0}",""]);const a=r},15044:(t,e,i)=>{i.d(e,{Z:()=>a});var s=i(8081),o=i.n(s),n=i(23645),r=i.n(n)()(o());r.push([t.id,".ymaps3x0--map-scale_label{text-wrap:nowrap;background-color:var(--label-background-color);border-radius:4px;color:var(--label-color);font-size:10px;padding:2px 4px;text-align:center}.ymaps3x0--map-scale_line{align-items:center;background-color:var(--label-color);border:2px solid var(--line-border-color);border-radius:4px;box-sizing:border-box;display:flex;height:6px;justify-content:center;width:100%}",""]);const a=r},26355:(t,e,i)=>{i.d(e,{Z:()=>a});var s=i(8081),o=i.n(s),n=i(23645),r=i.n(n)()(o());r.push([t.id,".ymaps3x0--map-scale{--label-color:#000;--label-background-color:#fff;--line-border-color:#ffffffe5;--line-background-color:#4d4d4d;display:inline-block}.ymaps3x0--map-scale__dark{--label-color:#ccc;--label-background-color:#212326;--line-border-color:#212326e5;--line-background-color:#ccc;display:inline-block}",""]);const a=r},23645:t=>{t.exports=function(t){var e=[];return e.toString=function(){return this.map((function(e){var i="",s=void 0!==e[5];return e[4]&&(i+="@supports (".concat(e[4],") {")),e[2]&&(i+="@media ".concat(e[2]," {")),s&&(i+="@layer".concat(e[5].length>0?" ".concat(e[5]):""," {")),i+=t(e),s&&(i+="}"),e[2]&&(i+="}"),e[4]&&(i+="}"),i})).join("")},e.i=function(t,i,s,o,n){"string"==typeof t&&(t=[[null,t,void 0]]);var r={};if(s)for(var a=0;a<this.length;a++){var h=this[a][0];null!=h&&(r[h]=!0)}for(var l=0;l<t.length;l++){var c=[].concat(t[l]);s&&r[c[0]]||(void 0!==n&&(void 0===c[5]||(c[1]="@layer".concat(c[5].length>0?" ".concat(c[5]):""," {").concat(c[1],"}")),c[5]=n),i&&(c[2]?(c[1]="@media ".concat(c[2]," {").concat(c[1],"}"),c[2]=i):c[2]=i),o&&(c[4]?(c[1]="@supports (".concat(c[4],") {").concat(c[1],"}"),c[4]=o):c[4]="".concat(o)),e.push(c))}},e}},61667:t=>{t.exports=function(t,e){return e||(e={}),t?(t=String(t.__esModule?t.default:t),/^['"].*['"]$/.test(t)&&(t=t.slice(1,-1)),e.hash&&(t+=e.hash),/["'() \t\n]|(%20)/.test(t)||e.needQuotes?'"'.concat(t.replace(/"/g,'\\"').replace(/\n/g,"\\n"),'"'):t):t}},8081:t=>{t.exports=function(t){return t[1]}},93379:t=>{var e=[];function i(t){for(var i=-1,s=0;s<e.length;s++)if(e[s].identifier===t){i=s;break}return i}function s(t,s){for(var n={},r=[],a=0;a<t.length;a++){var h=t[a],l=s.base?h[0]+s.base:h[0],c=n[l]||0,d="".concat(l," ").concat(c);n[l]=c+1;var u=i(d),_={css:h[1],media:h[2],sourceMap:h[3],supports:h[4],layer:h[5]};if(-1!==u)e[u].references++,e[u].updater(_);else{var p=o(_,s);s.byIndex=a,e.splice(a,0,{identifier:d,updater:p,references:1})}r.push(d)}return r}function o(t,e){var i=e.domAPI(e);i.update(t);return function(e){if(e){if(e.css===t.css&&e.media===t.media&&e.sourceMap===t.sourceMap&&e.supports===t.supports&&e.layer===t.layer)return;i.update(t=e)}else i.remove()}}t.exports=function(t,o){var n=s(t=t||[],o=o||{});return function(t){t=t||[];for(var r=0;r<n.length;r++){var a=i(n[r]);e[a].references--}for(var h=s(t,o),l=0;l<n.length;l++){var c=i(n[l]);0===e[c].references&&(e[c].updater(),e.splice(c,1))}n=h}}},90569:t=>{var e={};t.exports=function(t,i){var s=function(t){if(void 0===e[t]){var i=document.querySelector(t);if(window.HTMLIFrameElement&&i instanceof window.HTMLIFrameElement)try{i=i.contentDocument.head}catch(t){i=null}e[t]=i}return e[t]}(t);if(!s)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");s.appendChild(i)}},19216:t=>{t.exports=function(t){var e=document.createElement("style");return t.setAttributes(e,t.attributes),t.insert(e,t.options),e}},3565:(t,e,i)=>{t.exports=function(t){var e=i.nc;e&&t.setAttribute("nonce",e)}},7795:t=>{t.exports=function(t){var e=t.insertStyleElement(t);return{update:function(i){!function(t,e,i){var s="";i.supports&&(s+="@supports (".concat(i.supports,") {")),i.media&&(s+="@media ".concat(i.media," {"));var o=void 0!==i.layer;o&&(s+="@layer".concat(i.layer.length>0?" ".concat(i.layer):""," {")),s+=i.css,o&&(s+="}"),i.media&&(s+="}"),i.supports&&(s+="}");var n=i.sourceMap;n&&"undefined"!=typeof btoa&&(s+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(n))))," */")),e.styleTagTransform(s,t,e.options)}(e,t,i)},remove:function(){!function(t){if(null===t.parentNode)return!1;t.parentNode.removeChild(t)}(e)}}}},44589:t=>{t.exports=function(t,e){if(e.styleSheet)e.styleSheet.cssText=t;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(t))}}},19649:(t,e,i)=>{function s(t){return Boolean(t)&&t instanceof DOMException&&"AbortError"===t.name}function o(t="Aborted"){return new DOMException(t,"AbortError")}i.d(e,{D:()=>s,o:()=>o})},79655:(t,e,i)=>{i.d(e,{h:()=>o});class s extends Error{constructor(t){super(t),this.name="AssertionError"}}function o(t,e){if("boolean"==typeof t&&!t||"function"==typeof t&&!t())throw new s(`Assertion failed: ${e}`)}},38575:(t,e,i)=>{function s(t){const e=document.createElement("ymaps");return t&&(e.className=t),e}i.d(e,{E:()=>s})},29509:(t,e,i)=>{i.d(e,{SF:()=>s,Sv:()=>o,wo:()=>r,zw:()=>n});const s=256,o=130,n=32,r=t=>{if("tile"===t.type){const e=Object.assign({},t);return t.raster&&(e.raster=Object.assign({},t.raster)),t.vector&&(e.vector=Object.assign({},t.vector)),e}return Object.assign({},t)}},50218:(t,e,i)=>{i.d(e,{FA:()=>r,c2:()=>n,fd:()=>a,il:()=>h});var s=i(79655);const o=Symbol("EventEmitter"),n=Symbol("EventEmitter.MixinConstructor"),r=Symbol("EventEmitter.MixinPrototype");class a{constructor(){}static[n](t){t.FF2_eventListenersHash={}}static[r](t){t[o]=a.prototype[o],t.group=a.prototype.group,t.on=a.prototype.on,t.offSingle=a.prototype.offSingle,t._emit=a.prototype._emit}on(t,e){return this.group().on(t,e)}offSingle(t,e){const i=this.FF2_eventListenersHash[t];i&&i.delete(e)}group(){return new a.B2B_eventGroupImpl(this)}_emit(t,...e){const i=this.FF2_eventListenersHash[t];let s;if(i){const t=[];i.forEach((e=>t.push(e)));for(const i of t){const t=i(e[0]);void 0!==t&&(s=t)}}return s}}function h(t){return Boolean(t&&t[o])}a.B2B_eventGroupImpl=class{constructor(t){this.A17_listeners=[],this.EA7_emitter=t}on(t,e){const i=this.EA7_emitter.FF2_eventListenersHash[t];return i?(ymaps3.strictMode&&(0,s.h)(!i.has(e),"Duplicate event handler"),i.add(e)):(this.EA7_emitter.FF2_eventListenersHash[t]=new Set,this.EA7_emitter.FF2_eventListenersHash[t].add(e)),this.A17_listeners.push([t,e]),this}offAll(){for(const[t,e]of this.A17_listeners)this.EA7_emitter.FF2_eventListenersHash[t].delete(e);this.A17_listeners=[]}},a.prototype[o]=!0},9461:(t,e,i)=>{i.d(e,{GA:()=>n});var s=i(50218);class o{}const n=(t=o)=>({with(){if((0,s.il)(t.prototype))return t;const e=class extends t{constructor(...t){super(...t),s.fd[s.c2](this)}};return s.fd[s.FA](e.prototype),e}})},78277:(t,e,i)=>{i.d(e,{$7:()=>r,Cr:()=>o,JO:()=>a,ZE:()=>n});var s=i(16574);function o(t,e){return Object.assign(Object.assign({},t),{geometry:t.geometry&&n(t.geometry,e)})}function n(t,e){switch(t.type){case"Point":return Object.assign(Object.assign({},t),{coordinates:e(t.coordinates)});case"LineString":return Object.assign(Object.assign({},t),{coordinates:t.coordinates.map(e)});case"MultiLineString":return Object.assign(Object.assign({},t),{coordinates:t.coordinates.map((t=>t.map(e)))});case"Polygon":return Object.assign(Object.assign({},t),{coordinates:t.coordinates.map((t=>t.map(e)))});case"MultiPolygon":return Object.assign(Object.assign({},t),{coordinates:t.coordinates.map((t=>t.map((t=>t.map(e)))))});default:(0,s._y)(new Error(`Unexpected geometry type: ${t.type}`))}}function r(t){return"FeatureCollection"===t.type?[].concat(...t.features.map((t=>r(t)))):[t]}function a(t){"string"!=typeof t.id&&(0,s._y)(new Error("Feature or collection id must be a string"))}},98648:(t,e,i)=>{i.d(e,{m5:()=>p,oR:()=>_,uT:()=>m});var s=i(78277),o=i(79655);const n={width:1,opacity:1,color:"rgb(0,102,255)",palette:[],simplifyPalette:!0,dash:[]},r={url:"No icon url provided",offset:[0,0],scale:1},a={zIndex:0,opacity:1};function h(t){const e=Object.assign(Object.assign({},n),t);return Object.assign(Object.assign({},e),{dash:[...e.dash],paletteColors:[]})}function l(t,e){const i=e.stroke||[n];0===i.length&&i.push(Object.assign(Object.assign({},n),{width:0}));const{stroke:s,paletteColorStops:o}="LineString"===t.type?function(t,e){const i=t.coordinates.length-1,s=[],o=[],n=new Set,r=[];for(const t of e){const{palette:e}=t,a=h(t);if(o.push(a),!e||0===e.length)continue;const l=new Map;let c=0;for(let t=0;t<e.length;t++){const{count:s,color:o}=e[t];l.set(c,o),c+=s;const a=t===e.length-1||c>i;if(!a&&o===e[t+1].color)continue;const h=a?i:c;if(n.has(h)||(n.add(h),r.push(h)),a)break}s.push({stopsColors:l,paletteColors:a.paletteColors})}r.sort(((t,e)=>t-e));for(const{stopsColors:t,paletteColors:e}of s){e.push(t.get(0));for(let i=0;i<r.length-1;i++){const s=t.get(r[i]);e.push("string"==typeof s?s:e[e.length-1])}}return{paletteColorStops:r,stroke:o}}(t,i):{paletteColorStops:[],stroke:i.map(h)};return{zIndex:c(e.zIndex,0),fill:e.fill||"rgb(0,102,255)",fillOpacity:c(e.fillOpacity,.6),fillRule:e.fillRule||"evenodd",stroke:s,paletteColorStops:o,cursor:e.cursor||"inherit",interactive:c(e.interactive,!0),simplificationRate:c(e.simplificationRate,2),icon:Object.assign(Object.assign({},r),e.icon),element:e.element}}function c(t,e){return void 0!==t?t:e}function d(t){return Object.assign(Object.assign({},a),t)}var u=i(9461);const _="__root__";class p extends((0,u.GA)().with()){constructor({disablePointGeometry:t}={}){super(),this.B49_features=new Map,this.EB6_groups=new Map([[_,{type:"group",id:_,style:d({}),children:[],parentGroupId:null}]]),this.adhocEnabledExtraWorldCopies=!1,this.C64_disablePointGeometry=Boolean(t)}get features(){return this.B49_features}forEachFeatureElement(t){this.B49_features.forEach((e=>m(e)&&t(e)))}get groups(){return this.EB6_groups}addGroup(t,e,i){ymaps3.strictMode&&(0,o.h)(!this.EB6_groups.has(t),`Data source already have group "${t}"`);const s={type:"group",id:t,style:d(e),children:[],parentGroupId:i};this.FE9_addChild(i,s),this.EB6_groups.set(t,s),this._emit("groupAdded",t),this._emit("changed")}removeGroupAndChildren(t){if(ymaps3.strictMode&&(0,o.h)(t!==_,"Cant remove root group"),!this.EB6_groups.has(t))return;const e=this.EB6_groups.get(t),i=[e],s=[];for(;i.length>0;){const t=i.pop();s.push(t);for(const e of t.children)"feature"===e.type?(this.B49_features.delete(e.id),s.push(e)):i.push(e);this.EB6_groups.delete(t.id)}e.parentGroupId&&this.A14_removeChild(e.parentGroupId,e),this._emit("groupRemoved",{id:t,removed:s}),this._emit("changed")}addFeature(t,e,i,n){(0,s.JO)(t),ymaps3.strictMode&&(0,o.h)(!this.B49_features.has(t.id),`Feature "${t.id}" does exist`),this.EBB_assertPointIsAllowed(t,e);const r={type:"feature",id:t.id,feature:t,style:l(t.geometry,e),bbox:i,parentGroupId:n};this.FE9_addChild(n,r),this.B49_features.set(r.id,r),this._emit("featureAdded",r.id),this._emit("changed")}removeFeatureById(t){if(!this.B49_features.has(t))return;const e=this.B49_features.get(t);e.parentGroupId&&this.A14_removeChild(e.parentGroupId,e),this.B49_features.delete(t),this._emit("featureRemoved",t),this._emit("changed")}updateFeature(t,e,i){ymaps3.strictMode&&(0,o.h)(this.B49_features.has(t.id),`Feature "${t.id}" does exist`);const s=this.B49_features.get(t.id),n=this.B49_features.get(t.id).parentGroupId,r=i?l(t.geometry,i):s.style;this.EBB_assertPointIsAllowed(t,r);const a={type:"feature",id:t.id,feature:t,style:r,bbox:e,parentGroupId:n};ymaps3.strictMode&&(0,o.h)(this.EB6_groups.has(n),`Group with id "${n}" does not exists`);const h=this.EB6_groups.get(n),c=h.children.indexOf(s);ymaps3.strictMode&&(0,o.h)(-1!==c,`Group "${h.id}" does not contain node "${a.id}"`),h.children[c]=a,this.B49_features.set(a.id,a),this._emit("featureUpdated",a.id),this._emit("changed")}hasFeatureWithId(t){return this.B49_features.has(t)}getFeatureById(t){var e;return null!==(e=this.B49_features.get(t))&&void 0!==e?e:null}moveFeatureToGroup(t,e){ymaps3.strictMode&&(0,o.h)(this.B49_features.has(t),`Feature "${t}" does not exist`),ymaps3.strictMode&&(0,o.h)(this.EB6_groups.has(e),`Group "${e}" does not exist`);const i=this.B49_features.get(t);i.parentGroupId!==e&&(this.A14_removeChild(i.parentGroupId,i),this.FE9_addChild(e,i),i.parentGroupId=e,this._emit("featureMovedToGroup",t),this._emit("changed"))}FE9_addChild(t,e){ymaps3.strictMode&&(0,o.h)(this.EB6_groups.has(t),`Group "${t}" does not exist`);this.EB6_groups.get(t).children.push(e)}A14_removeChild(t,e){ymaps3.strictMode&&(0,o.h)(this.EB6_groups.has(t),`Group "${t}" does not exist`);const i=this.EB6_groups.get(t),s=i.children.indexOf(e);ymaps3.strictMode&&(0,o.h)(-1!==s,`Group "${i.id}" does not contain node "${e.id}"`),i.children.splice(s,1)}EBB_assertPointIsAllowed(t,e){if(this.C64_disablePointGeometry&&"Point"===t.geometry.type&&!e.element)throw new Error(`Unexpected geometry type: "${t.geometry.type}"`)}}function m(t){return"Point"===t.feature.geometry.type&&Boolean(t.style.element)}},96883:(t,e,i)=>{i.d(e,{u:()=>s});const s="__ymaps3YandexInternalHotspotFeatureProperitesExternals"},16574:(t,e,i)=>{i.d(e,{H:()=>n,_y:()=>r});var s=i(19649);let o;function n(t){t&&"object"==typeof t||(t=new Error(t||"empty")),function(t){const e=t.logged,i=/fetch|network/i.test(t.message);return!(e||(0,s.D)(t)||i)}(t)&&(o?(o({additional:t.additionalInfo},t),t.logged=!0):window.console.error(t))}function r(t){throw n(t),t}},80652:(t,e,i)=>{i.d(e,{Z:()=>s,j:()=>o});const s=Math.PI/180,o=180/Math.PI},24607:(t,e,i)=>{function s(t,e){const{x:i,y:s}=e;let o=t.length-1,n=!1;for(let e=0;e<t.length;e++){const r=t[e].y<=s&&t[o].y>s||t[o].y<=s&&t[e].y>s,a=i>(t[o].x-t[e].x)*(s-t[e].y)/(t[o].y-t[e].y)+t[e].x;r&&a&&(n=!n),o=e}return n}function o(t,e){for(let i=1;i<t.length;i++)if(s(t[i],e))return!1;return s(t[0],e)}function n(t,e){if("Point"===t.type)return!1;if("LineString"===t.type)return!1;if("Polygon"===t.type)return o(t.coordinates,e);if("MultiPolygon"===t.type){for(const i of t.coordinates)if(o(i,e))return!0;return!1}return!1}i.d(e,{R:()=>n,u:()=>s})},6049:(t,e,i)=>{function s(t,e,i){return t-Math.floor((t-e)/(i-e))*(i-e)}function o(t,e,i){return Math.max(Math.min(t,i),e)}i.d(e,{d:()=>s,q:()=>o})},25950:(t,e,i)=>{i.d(e,{AK:()=>y,DG:()=>g,Fv:()=>p,G7:()=>d,IH:()=>n,Kt:()=>E,PV:()=>h,Sm:()=>a,U1:()=>D,Ue:()=>o,WT:()=>l,ZO:()=>c,jQ:()=>s,kE:()=>m,lu:()=>r,pU:()=>u,wy:()=>_});const s=o(0,0);function o(t,e){return{x:t,y:e}}function n(t,e,i=o(0,0)){return i.x=t.x+e.x,i.y=t.y+e.y,i}function r(t,e,i=o(0,0)){return i.x=t.x-e.x,i.y=t.y-e.y,i}function a(t,e,i=o(0,0)){return i.x=t.x*e,i.y=t.y*e,i}function h(t,e,i=o(0,0)){return i.x=t.x*e.x,i.y=t.y*e.y,i}function l(t,e,i=o(0,0)){return i.x=t.x/e.x,i.y=t.y/e.y,i}function c(t,e,i=o(0,0)){return i.x=t.x/e,i.y=t.y/e,i}function d(t,e,i=o(0,0)){return i.x=e(t.x,1),i.y=e(t.y,2),i}function u(t,e,i=1e-6){const s=r(t,e);return-i<s.x&&s.x<i&&-i<s.y&&s.y<i}function _(t,e){return t.x===e.x&&t.y===e.y}function p(t,e=o(0,0)){return c(t,m(t),e)}function m(t){return Math.sqrt(Math.pow(t.x,2)+Math.pow(t.y,2))}function g(t){return Math.pow(t.x,2)+Math.pow(t.y,2)}function y(t,e){return t.x*e.x+t.y*e.y}function E(t,e=o(0,0)){return e.x=t.reduce(((t,e)=>t+e.x),0)/t.length,e.y=t.reduce(((t,e)=>t+e.y),0)/t.length,e}const{cos:f,sin:C}=Math;function D(t,e,i=o(0,0)){const{x:s,y:n}=t,r=f(e),a=C(e);return i.x=r*s-a*n,i.y=a*s+r*n,i}},45852:(t,e,i)=>{i.d(e,{m:()=>o});var s=i(9461);class o extends((0,s.GA)().with()){}},68222:(t,e,i)=>{i.d(e,{$7:()=>a,BH:()=>n,fv:()=>r});var s=i(19649),o=i(16574);class n{constructor(){this.promise=new Promise(((t,e)=>{this.resolve=t,this.reject=t=>{t&&(0,o.H)(t),e(t)}}))}}const r=20;class a{constructor(t){this.C59_queue=[],this.EA8_processing=[],this.EBF_paused=!1,this.B42_changed=!1,this.B40_onTaskAbort=(t,e)=>{const i=this.EA8_processing.indexOf(t);if(-1!==i)this.EA8_processing.splice(i,1);else{const i=this.C59_queue.indexOf(t);-1!==i&&this.C59_queue.splice(i,1),e.reject((0,s.o)())}},this.C72_maxConcurrency=t}enqueue(t,e=0){const i=new AbortController,s=new n,o={task:t,abortController:i,process:()=>t(i.signal).then(s.resolve,s.reject),priority:e};return i.signal.addEventListener("abort",(()=>this.B40_onTaskAbort(o,s))),this.C59_queue.push(o),this.B42_changed=!0,this.EBF_paused||this.FE7_process(),{abortController:i,promise:s.promise,updatePriority:()=>{o.priority=e,this.B42_changed=!0}}}pause(){this.EBF_paused=!0}resume(){this.EBF_paused=!1,this.FE7_process()}FE7_process(){if(this.EA8_processing.length>=this.C72_maxConcurrency)return;this.B42_changed&&this.C59_queue.sort(((t,e)=>t.priority-e.priority));const t=this.C59_queue.splice(0,this.C72_maxConcurrency-this.EA8_processing.length);this.EA8_processing.push(...t);for(const e of t)e.process().finally((()=>{const t=this.EA8_processing.indexOf(e);-1!==t&&this.EA8_processing.splice(t,1),this.FE7_process()}))}}},81024:(t,e,i)=>{i.d(e,{_:()=>s,d:()=>a});var s,o=i(9461),n=i(68222),r=i(16574);!function(t){t[t.QUICK=1]="QUICK",t[t.INTERMEDIATE=2]="INTERMEDIATE",t[t.FULL=3]="FULL"}(s||(s={}));class a extends((0,o.GA)().with()){constructor(){super(),this.D7E_rafId=0,this.EA2_animationsCounter=0,this.C58_framesSinceIntermediateRendering=0,this.FEF_renderFrame=()=>{this.D7E_rafId=0,this.A19_updateIsRequested=!1;const t=Date.now();try{this._emit("beforeRender",t);const e=this.D81_getQualityForCurrentFrame();this._emit("render",{time:t,qualityHint:e}),this._emit("afterRender",t)}catch(t){t&&"object"==typeof t&&this.EAF_lastTriggerStack&&(t.additionalInfo=this.EAF_lastTriggerStack),(0,r._y)(t)}this.FED_isRunning&&this.FE9_requestFrame()},this.A19_updateIsRequested=!1,this.FED_isRunning=!1}get isActive(){return this.FED_isRunning}start(){this.FED_isRunning=!0,this.FE9_requestFrame(),this.EAF_lastTriggerStack=(new Error).stack}stop(){this.FED_isRunning&&(this.FED_isRunning=!1,this.A19_updateIsRequested||this.D7C_cancelFrame(),this.EAF_lastTriggerStack=void 0)}renderImmediately(t){const e=Date.now();this.D7E_rafId&&(cancelAnimationFrame(this.D7E_rafId),this.D7E_rafId=0),this.A19_updateIsRequested=!1,this._emit("beforeRender",e),this._emit("render",{time:e,qualityHint:t}),this._emit("afterRender",e)}update(){this.FED_isRunning||(this.EAF_lastTriggerStack=(new Error).stack),this.A19_updateIsRequested=!0,this.FE9_requestFrame()}destroy(){this.D7C_cancelFrame()}animate(t){0===this.EA2_animationsCounter&&this.start(),this.EA2_animationsCounter++;let e=!0;const i=this.on("beforeRender",(s=>{e?t(s):(i.offAll(),this.EA2_animationsCounter--,0===this.EA2_animationsCounter&&this.stop())})),s=new n.BH;return{complete:s.promise,get isRunning(){return e},stop:()=>{e?(e=!1,s.resolve()):console.warn("Trying to stop animation twice")}}}animateForDuration(t,e){let i=-1;const s=this.animate((o=>{if(i<0)return void(i=o);const n=(o-i)/e;n<1?t(n):(t(1),s.stop())}));return s}FE9_requestFrame(){this.D7E_rafId||(this.D7E_rafId=requestAnimationFrame(this.FEF_renderFrame))}D7C_cancelFrame(){cancelAnimationFrame(this.D7E_rafId),this.D7E_rafId=0}D81_getQualityForCurrentFrame(){return this.FED_isRunning?this.C58_framesSinceIntermediateRendering<12?(this.C58_framesSinceIntermediateRendering++,s.QUICK):(this.C58_framesSinceIntermediateRendering=1,s.INTERMEDIATE):(this.C58_framesSinceIntermediateRendering=0,s.FULL)}}},25387:(t,e,i)=>{function s(t,e){return t===e?null:{old:t,new:e}}i.d(e,{Nt:()=>l,PP:()=>d,B5:()=>c});var o=i(29509),n=i(35150),r=i(31838),a=i(9461),h=i(79655);class l extends((0,a.GA)().with()){constructor(t,e){super(),this.EC8_makeFields=(t,e)=>({tileSize:(null==e?void 0:e.size)||o.SF,transparent:Boolean(null==e?void 0:e.transparent),clampMapZoom:Boolean(t.clampMapZoom),zoomRange:t.zoomRange||(0,n.oF)(),fetchHotspots:null==e?void 0:e.fetchHotspots,hotspotAbortRadius:(null==e?void 0:e.hotspotAbortRadius)||o.Sv,vectorHotspots:t.vector&&t.vector.hotspots||{}}),this.setSource(t),this.worldOptions=e}get rasterSourceDescription(){return this.D8E_source.raster}get vectorSourceDescription(){return this.D8E_source.vector}get vectorHotspots(){return this.D8E_fields.vectorHotspots}get zoomRange(){return this.D8E_fields.zoomRange}get clampMapZoom(){return this.D8E_fields.clampMapZoom}get transparent(){return this.D8E_fields.transparent}get tileSize(){return this.D8E_fields.tileSize}get fetchHotspots(){return this.D8E_fields.fetchHotspots}get hotspotAbortRadius(){return this.D8E_fields.hotspotAbortRadius}getHotspotTileDataSource(){return this.B4D_rasterSource.fetchHotspots?{fetchHotspots:this.B4D_rasterSource.fetchHotspots,hotspotAbortRadius:this.B4D_rasterSource.hotspotAbortRadius||o.Sv,tileSize:this.B4D_rasterSource.size||o.SF,inset:void 0===this.B4D_rasterSource.hotspotInset?o.zw:this.B4D_rasterSource.hotspotInset,padding:this.B4D_rasterSource.hotspotPadding||0,zoomRange:this.zoomRange,internalFindHotspotInPosition:this.B4D_rasterSource._internalFindHotspotInPosition}:null}setSource(t){var e;ymaps3.strictMode&&(0,h.h)(!this.D8E_source||!this.vectorSourceDescription||Boolean(t.vector),"Can't remove vector source");const i=this.EC8_makeFields(t,t.raster),o=Object.assign(Object.assign({},function(t,e){const i={};for(const o of Object.keys(t))i[o]=s(t[o],e[o]);return i}(this.D8E_fields||{},i)),{fetchTile:s(this.B4D_rasterSource&&this.B4D_rasterSource.fetchTile,null===(e=t.raster)||void 0===e?void 0:e.fetchTile)});this.D8E_source=t,this.D8E_fields=i,t.raster&&(this.B4D_rasterSource=t.raster,this.EAD_fetchTile="string"==typeof this.B4D_rasterSource.fetchTile?c(this.B4D_rasterSource.fetchTile):this.B4D_rasterSource.fetchTile),this._emit("changed"),this._emit("sourceChanged",o)}fetchRasterTile(t,e,i,s,o){if(!this.EAD_fetchTile)return null;const n=(0,r.Su)(i,this.tileSize);if(!(0,r.v0)({x:t,y:e},n,this.worldOptions))return null;const a=(0,r.Rf)({x:t,y:e},n);return a?this.EAD_fetchTile(a.x,a.y,i,s,o):null}}function c(t){return function(e,i,s,o){return t.replace("{{x}}",String(e)).replace("{{y}}",String(i)).replace("{{z}}",String(s)).replace("{{scale}}",String(o)).replace(/\{\{d\|(\d+)\}\}/,((t,o)=>{const n=(e+i+s)%Number(o)+1;return String(n)}))}}function d(t,e){return t.fetchHotspots===e.fetchHotspots&&t.hotspotAbortRadius===e.hotspotAbortRadius&&t.tileSize===e.tileSize}},31838:(t,e,i)=>{i.d(e,{Rf:()=>_,Su:()=>m,TG:()=>l,YC:()=>d,ZR:()=>c,jl:()=>u,v0:()=>p,vD:()=>g});var s=i(15252),o=i(25950),n=i(6049),r=i(24607),a=i(4111),h=i(16574);function l(t,e,i,s){const n=o.ZO(e,2*i),r=o.lu(t,n);o.ZO(r,s,r),o.G7(r,Math.floor,r);const a=o.IH(t,n);return o.ZO(a,s,a),o.G7(a,Math.floor,a),{minX:r.x,minY:r.y,maxX:a.x,maxY:a.y}}function c(t,e,i,s,n){const r=o.ZO(i,2*s);return[{x:r.x,y:r.y},{x:r.x,y:-r.y},{x:-r.x,y:-r.y},{x:-r.x,y:r.y}].map((t=>o.U1(t,-e))).map((e=>o.lu(t,e))).map((t=>o.ZO(t,n)))}function d(t,e,i,n,r,l,c){const d={worldCenter:t,zoom:Math.log2(Math.pow(2,n)*r),azimuth:e,tilt:i},u=function(t,e,i,n,r){const{worldCenter:l,tilt:c,azimuth:d,zoom:u}=e,_=s.B.convertPixelSizeToWorldSize(i,u),p={x:0,y:0,z:.5*-_.y/Math.tan(.5*t)};a.lM(p,c,p),a.jI(p,d,p),a.IH(p,Object.assign(Object.assign({},l),{z:0}),p);const m=Math.tan(.5*t),g=i.x/i.y,E=a.Ue(m*g,m,1),f=[a.JG(a.jQ),a.JG(a.jQ),a.JG(a.jQ),a.JG(a.jQ)],C=a.Ue(0,0,0),D={origin:p,direction:C};for(let t=0;t<4;++t){a.PV(y[t],E,C),a.lM(C,c,C),a.jI(C,d,C);a.ek(a.XY,D,f[t])||(0,h._y)(new Error("Visible quadrilateral is unbounded, engine can't handle that case (yet)"))}return f.map((t=>{const e=s.B.worldToPixels(t,n);return o.ZO(e,r)}))}(Math.PI/6,d,l,n,c),_=function(t){let e=1/0,i=-1/0;const s=[];for(let o=0,n=1;o<t.length;++o,n=++n%t.length){const[n,r]=[t[o],t[(o+1)%t.length]].sort(((t,e)=>t.y-e.y)),a=Math.floor(n.y),h=Math.ceil(r.y);e=Math.min(e,a),i=Math.max(i,h);const l=(r.x-n.x)/(r.y-n.y),c=n.x-(isFinite(l)?l*(n.y-a):0);s.push({firstRow:a,lastRow:h,startX:n.x,endX:r.x,x:c,k:l})}const o=[];for(let t=e;t<i;t++){let e=1/0,i=-1/0;for(const o of s){if(t<o.firstRow||t>=o.lastRow)continue;const s=o.x+o.k,n=o.k>=0?Math.max(o.x,o.startX):Math.min(o.x,o.startX),r=o.k>=0?Math.min(s,o.endX):Math.max(s,o.endX);e=Math.floor(Math.min(e,n,r)),i=Math.ceil(Math.max(i,n,r)),o.x=s}for(let s=e;s<i;s++)o.push({x:s,y:t})}return o}(u),p=new Map;return _.forEach((t=>p.set(g(t,n),Object.assign(Object.assign({},t),{border:!1})))),{tiles:p,tileBounds:u}}function u(t,e){return t.every((t=>(0,r.u)(e,t)))}function _(t,e){return{x:(0,n.d)(t.x,0,e),y:(0,n.d)(t.y,0,e)}}function p({x:t,y:e},i,s){return(s.cycledX||t<i&&t>=0)&&(s.cycledY||e<i&&e>=0)}function m(t,e){return Math.ceil(Math.pow(2,t+8)/e)}function g(t,e){return`${t.x}.${t.y}.${e}`}const y=[a.Ue(-1,1,-1),a.Ue(1,1,-1),a.Ue(1,-1,-1),a.Ue(-1,-1,-1)]},91249:(t,e,i)=>{i.d(e,{N:()=>o});var s=i(9461);class o extends((0,s.GA)().with()){constructor(t){super(),this.EA4_tiles=new Map,this.D8C_tileTexturesTiers=new Map,this.setSource(t)}get priority(){return this.D8E_source.priority}get workerUrl(){return this.D8E_source.workerUrl}get theme(){return this.D8E_source.theme}get rootTiles(){return this.EA4_tiles}setSource(t){this.D8E_source=t,this._emit("changed")}addRootTile(t){if(!this.EA4_tiles.has(t.id)){const e=Object.assign({},t);this.EA4_tiles.set(e.id,e),this._emit("rootTileAdded",e)}}replaceRootTile(t){if(this.EA4_tiles.has(t.id)){const e=Object.assign({},t);this.EA4_tiles.set(e.id,e),this._emit("rootTileReplaced",e)}}removeRootTile(t){this.EA4_tiles.delete(t)&&this._emit("rootTileRemoved",t)}showRootTile(t){this.DA2_setHidden(t,!1),this._emit("rootTileShown",t)}hideRootTile(t){this.DA2_setHidden(t,!0),this._emit("rootTileHidden",t)}getRootTileTexturesTiers(t){return this.D8C_tileTexturesTiers.get(t)||[]}changeRootTileTextures(t,e){this._emit("rootTileTexturesChanged",{id:t,tier:e})}setRootTileTexturesTiers(t,e){e?this.D8C_tileTexturesTiers.set(t,e):this.D8C_tileTexturesTiers.delete(t)}DA2_setHidden(t,e){const i=this.EA4_tiles.get(t);i&&(i.isHidden=e)}}},17421:(t,e,i)=>{function s(t,e){if(t.length!==e.length)return!1;for(let i=0;i<t.length;i++)if(t[i]!==e[i])return!1;return!0}i.d(e,{R:()=>s})},51888:(t,e,i)=>{i.d(e,{_:()=>r});var s=i(25950);const o=1e-12;function n(t,e,i,n){const r=e.y-t.y,a=t.x-e.x,h=r*t.x+a*t.y,l=n.y-i.y,c=i.x-n.x,d=l*i.x+c*i.y,u=r*c-l*a;if(Math.abs(u)<o)return null;const _=(c*h-a*d)/u,p=(d*r-h*l)/u;return s.Ue(_,p)}function r(t,e,i=!1){return function(t,e,i){let s=t,o=[],r=e[e.length-1];for(const t of e){let e=s[i?s.length-1:0];for(const i of s){const s=a(r,t,e);if(a(r,t,i)){if(!s){const s=n(r,t,e,i);if(null===s)continue;o.push(s)}o.push(i)}else if(s){const s=n(r,t,e,i);if(null===s)continue;o.push(s)}e=i}s=o,o=[],r=t}return s}(t,e,i)}function a(t,e,i){return(e.x-t.x)*(i.y-t.y)>(e.y-t.y)*(i.x-t.x)}},62367:(t,e,i)=>{i.d(e,{x:()=>o});var s=i(6049);function o(){return(0,s.q)(devicePixelRatio,1,3)}},51717:(t,e,i)=>{function s(t,e,i,s=(()=>{}),o=(()=>{}),n=(()=>!0)){const r=new Map,a=[],h=[],l=[];function c(t,e){s(t,e),l.push(t)}return e.forEach(((e,s)=>{let l=t.get(s);if(l&&n(l,e)?(o(l,e),h.push(l)):l&&(c(l,s),l=void 0),!l){const t=i(e);a.push(t),l=t}r.set(s,l)})),t.forEach(((t,i)=>{e.has(i)||c(t,i)})),{result:r,created:a,updated:h,removed:l}}i.d(e,{B:()=>s})},76664:(t,e,i)=>{function s(t,e){if(t.length<3||e<=0)return[...t];const i=[];return i.push(t[0]),o(t,i,0,t.length-1,Math.pow(e,2)),i.push(t[t.length-1]),i}function o(t,e,i,s,n){const r=t[i],a=t[s],h=a.x-r.x,l=a.y-r.y,c=Math.pow(h,2)+Math.pow(l,2);let d=0,u=0,_=-1/0,p=-1;for(let e=i+1;e<s;e++){d=t[e].x-r.x,u=t[e].y-r.y;const i=c>0?(h*d+l*u)/c:0;let s=0;if(i>1)s=Math.pow(t[e].x-a.x,2)+Math.pow(t[e].y-a.y,2);else if(i>0){const o=r.x+h*i,n=r.y+l*i;s=Math.pow(t[e].x-o,2)+Math.pow(t[e].y-n,2)}else s=Math.pow(d,2)+Math.pow(u,2);s>_&&(_=s,p=e)}_>n&&(o(t,e,i,p,n),e.push(t[p]),o(t,e,p,s,n))}i.d(e,{p:()=>s})},60632:(t,e,i)=>{i.d(e,{Os:()=>f,wm:()=>y,XA:()=>m,k6:()=>E,Rv:()=>g});var s=i(25950),o=i(4111);const n=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],r=16;function a(){return new Array(r)}function h(t,e=a()){for(let i=0;i<r;++i)e[i]=t[i];return e}function l(t,e,i=a()){for(let s=0;s<r;s+=4){const o=t[s],n=t[s+1],r=t[s+2],a=t[s+3];for(let t=0;t<4;++t)i[s+t]=o*e[t]+n*e[4+t]+r*e[8+t]+a*e[12+t]}return i}const c=h(n);function d(t,e,i,s,n=a()){const r=o.lu(e,i);o.Fv(r,r);const h=o.kC(s,r);o.Fv(h,h);const d=o.kC(r,h);return c[0]=h.x,c[1]=d.x,c[2]=r.x,c[4]=h.y,c[5]=d.y,c[6]=r.y,c[8]=h.z,c[9]=d.z,c[10]=r.z,c[12]=-o.AK(h,e),c[13]=-o.AK(d,e),c[14]=-o.AK(r,e),l(t,c,n)}function u(t,e,i=o.Ue(0,0,0)){const s=t[3]*e.x+t[7]*e.y+t[11]*e.z+t[15],n=(t[0]*e.x+t[4]*e.y+t[8]*e.z+t[12])/s,r=(t[1]*e.x+t[5]*e.y+t[9]*e.z+t[13])/s,a=(t[2]*e.x+t[6]*e.y+t[10]*e.z+t[14])/s;return i.x=n,i.y=r,i.z=a,i}var _=i(15252),p=i(16574);function m(t,e){const i=e.container.getBoundingClientRect();return y({x:t.x-i.left,y:t.y-i.top},e)}function g(t,e){const i=E(t,e),o=e.container.getBoundingClientRect();return s.IH(i,{x:o.left,y:o.top},i),i}function y(t,{size:e,zoom:i,worldCenter:s,azimuth:n,tilt:r,fov:a}){const h=Math.tan(.5*a),l={x:0,y:0,z:f(-_.B.convertPixelSizeToWorldSize(e,i).y,a)};o.lM(l,r,l),o.jI(l,n,l),o.IH(l,Object.assign(Object.assign({},s),{z:0}),l);const c=e.x/e.y,d=o.Ue(h*c,h,1),u={x:2*(t.x-e.x/2)/e.x,y:2*(e.y/2-t.y)/e.y,z:-1};o.PV(u,d,u),o.lM(u,r,u),o.jI(u,n,u);const m=o.ek(o.XY,{origin:l,direction:u});return m||(0,p._y)(new Error("Pointer above the horizon.")),m}function E(t,{size:e,zoom:i,worldCenter:c,azimuth:p,tilt:m,fov:g}){const y=Object.assign(Object.assign({},t),{z:t.z||0}),E=_.B.convertPixelSizeToWorldSize(e,i),C=s.ZO(E,2),D=f(-E.y,g),M={x:0,y:0,z:D};o.lM(M,m,M),o.jI(M,p,M),o.IH(M,Object.assign(Object.assign({},c),{z:0}),M);const v=d(n,M,Object.assign(Object.assign({},c),{z:0}),o.jI({x:0,y:1,z:0},p));if(m>0||y.z>0){const t=-C.y*Math.sin(m),i=-t-D,s=t-D,o=C.x/-C.y,c=function(t,e,i,s,o,n=a()){const h=1/Math.tan(.5*e),l=h/i,c=(s+o)/(s-o),d=2*s*o/(s-o);for(let e=0;e<r;e+=4){n[e]=t[e]*l,n[e+1]=t[e+1]*h;const i=t[e+2],s=t[e+3];n[e+2]=i*c+s*d,n[e+3]=-i}return n}(h(n),g,o,i,s);return c[0]=c[0]*e.x/2,c[5]=c[5]*(-e.y/2),c[8]=-e.x/2,c[9]=-e.y/2,u(l(v,c),y)}const A=u(v,y),x=s.IH(A,C);return _.B.worldToRelativePixels(x,i)}function f(t,e){return.5*t/Math.tan(.5*e)}},4111:(t,e,i)=>{function s(t,e,i){return{x:t,y:e,z:i}}i.d(e,{AK:()=>c,Fv:()=>l,IH:()=>r,JG:()=>n,PV:()=>h,Ue:()=>s,XY:()=>p,ek:()=>m,jI:()=>_,jQ:()=>o,kC:()=>d,lM:()=>u,lu:()=>a});const o=s(0,0,0);function n(t,e=s(0,0,0)){return e.x=t.x,e.y=t.y,e.z=t.z,e}function r(t,e,i=s(0,0,0)){return i.x=t.x+e.x,i.y=t.y+e.y,i.z=t.z+e.z,i}function a(t,e,i=s(0,0,0)){return i.x=t.x-e.x,i.y=t.y-e.y,i.z=t.z-e.z,i}function h(t,e,i=s(0,0,0)){return i.x=t.x*e.x,i.y=t.y*e.y,i.z=t.z*e.z,i}function l(t,e=s(0,0,0)){return function(t,e,i=s(0,0,0)){return i.x=t.x/e,i.y=t.y/e,i.z=t.z/e,i}(t,function(t){return Math.sqrt(Math.pow(t.x,2)+Math.pow(t.y,2)+Math.pow(t.z,2))}(t),e)}function c(t,e){return t.x*e.x+t.y*e.y+t.z*e.z}function d(t,e,i=s(0,0,0)){const o=t.y*e.z-t.z*e.y,n=t.z*e.x-t.x*e.z,r=t.x*e.y-t.y*e.x;return i.x=o,i.y=n,i.z=r,i}function u(t,e,i=s(0,0,0)){const o=Math.cos(e),n=Math.sin(e),r=t.y;return i.x=t.x,i.y=r*o-t.z*n,i.z=r*n+t.z*o,i}function _(t,e,i=s(0,0,0)){const o=Math.cos(e),r=Math.sin(e);return t=t===i?n(t):t,i.x=t.x*o-t.y*r,i.y=t.x*r+t.y*o,i.z=t.z,i}const p={normal:s(0,0,1),distance:0};function m(t,e,i=s(0,0,0)){const o=c(e.direction,t.normal);if(0===o)return null;const a=(t.distance-c(t.normal,e.origin))/o;return a<0?null:(n(e.direction,i),function(t,e,i=s(0,0,0)){i.x=t.x*e,i.y=t.y*e,i.z=t.z*e}(i,a,i),r(i,e.origin,i),i)}},15252:(t,e,i)=>{i.d(e,{B:()=>r});var s=i(6049),o=i(25950);const n=256,r={getScale:(t,e)=>Math.pow(2,e-t),getWorldPixelSize:t=>Math.pow(2,t)*n,worldToPixels(t,e){const i=Math.pow(2,e)/2*n;return o.Sm({x:t.x+1,y:1-t.y},i)},worldToRelativePixels(t,e){const i=Math.pow(2,e)/2*n;return o.PV(t,{x:i,y:-i})},worldToTile(t,e,i){const s=r.worldToPixels(t,e);return o.ZO(s,i)},moveCloseToCenter(t,e,i){i=i||t;const{x:s}=o.lu(t,e);return Math.abs(s)>1?o.IH(i,{x:-2*Math.sign(s),y:0}):i},convertPixelSizeToWorldSize(t,e,i){const s=Math.pow(2,e)/2*n;return o.WT(t,{x:s,y:-s},i)},pixelsToWorld(t,e){const i=Math.pow(2,e)/2*n;return{x:t.x/i-1,y:1-t.y/i}},fitViewportToWorld(t,{zoom:e,worldOptions:i,size:s=o.jQ}){if(i.cycledX&&i.cycledY)return t;const n=r.convertPixelSizeToWorldSize(s,e);return{x:a(t.x,n.x,i.cycledX),y:a(t.y,-n.y,i.cycledY)}},restrictToZeroWorld(t,e){const i=Object.assign({},t);return e.cycledX&&(i.x=(0,s.d)(i.x,-1,1)),e.cycledY&&(i.y=(0,s.d)(i.y,-1,1)),i},computePixelPerfectWorldCoordinates(t,e,i,s=1,n={x:0,y:0,z:t.z}){const a=r.getWorldPixelSize(e)/2*s*i;return o.G7(t,(t=>Math.round(t*a)/a),n)}};function a(t,e,i){const o=e/2;return i?(0,s.d)(t,-1,1):(0,s.q)(t,Math.min(0,o-1),Math.max(0,1-o))}},35150:(t,e,i)=>{i.d(e,{Hx:()=>r,i3:()=>n,oF:()=>o});var s=i(16574);const o=()=>({min:0,max:21}),n=t=>{t.min>=t.max&&(0,s._y)(new Error(`Invalid zoom range, min >= max (${t.min} >= ${t.max})`)),(t.min<0||t.max<0)&&(0,s._y)(new Error(`Invalid zoom range, min or max is less than zero (min=${t.min} max=${t.max})`))},r=(t,e,i=o())=>(i.min=Math.max(t.min,e.min),i.max=Math.min(t.max,e.max),i)},39190:(t,e,i)=>{i.d(e,{YQ:()=>o,d$:()=>s,rK:()=>n});const s=30*i(80652).Z,o=1e-10,n=100},83749:(t,e,i)=>{i.d(e,{$:()=>a,Q:()=>_});var s=i(60632),o=i(16574);const n="none",r="any",a=Symbol("object"),h=Math.pow(15,2),l=Symbol(),c=["touchstart","touchmove","touchend","touchcancel","pointerdown","pointermove","pointerup","pointercancel","click","dblclick","mouseup","mousedown","mouseenter","mouseleave","mousemove","contextmenu"],d=["mousedown","touchstart","pointerdown","contextmenu"],u=()=>{};class _{constructor(t,e){this.D93_stopWaitingHotspots=u,this.B46_handlers={},this.D99_activeObject=null,this.clickTimeout=300,this.waitHotspotsTimeout=1e3,this.EAB_onEvent=t=>{if("dblclick"===t.type||this.D86_map.isInAction)return;const e=t.target instanceof HTMLElement?this.D86_map.findFeatureByElement(t.target):null;if((null==e?void 0:e.feature.blockEvents)&&!(null==e?void 0:e.feature.draggable))return;d.indexOf(t.type)>=0&&this.D93_stopWaitingHotspots(!1);const i=(e=!1)=>{const i=e?"contextmenu":"click",s=e?"rightdblclick":"dblclick";if(void 0!==this.C55_clickTimer){window.clearTimeout(this.C55_clickTimer),this.C55_clickTimer=void 0;const e=p(t);o=this.ECA_previousClickPosition,n=e,Math.pow(o.x-n.x,2)+Math.pow(o.y-n.y,2)<h&&this.FD9_processEvent(s,t)}else this.ECA_previousClickPosition=p(t),this.C55_clickTimer=window.setTimeout((()=>{this.C55_clickTimer=void 0,this.D86_map.isInAction||this.B2D_waitHotspots(t).then((e=>{e&&!this.D86_map.isInAction&&this.FD9_processEvent(i,t)}))}),this.clickTimeout);var o,n};"click"===t.type?(this.FD9_processEvent("fastclick",t),i()):"contextmenu"===t.type?i(!0):this.FD9_processEvent(t.type,t)},this.B2D_waitHotspots=t=>new Promise((e=>{const i=this.A96_computeAllCoordinates(t);if(!i)return void e(!1);const[,s]=i,o=()=>{const t=this.D86_map.findObjectInWorldPositionEx(s).layers.find((t=>null!==t.object));t&&void 0===t.object||this.D93_stopWaitingHotspots(!0)},n=window.setTimeout((()=>this.D93_stopWaitingHotspots(!0)),this.waitHotspotsTimeout),r=this.D86_map.on("hotspotsChanged",o);this.D93_stopWaitingHotspots=t=>{window.clearTimeout(n),r.offAll(),e(t),this.D93_stopWaitingHotspots=u},o()})).catch((t=>{(0,o._y)(t)})),this.A96_computeAllCoordinates=t=>{const e=p(t);if(!isFinite(e.x)||!isFinite(e.y))return null;const i=(0,s.XA)(e,this.D86_map);return[e,i,this.D86_map.projection.fromWorldCoordinates(i)]},this.FD9_processEvent=(t,e)=>{const i=this.A96_computeAllCoordinates(e);if(!i)return;const[s,o,a]=i;let h=this.D86_map.findObjectInWorldPosition(o);this.B3B_eventObjectsFilter&&!this.B3B_eventObjectsFilter(h)&&(h=null);const c={coordinates:[a[0],a[1]],screenCoordinates:[s.x,s.y],[l]:!1,stopPropagation(){this[l]=!0}};if("mousemove"===e.type){h&&this.FD9_emitLayerEvent("mousemove",h,c,e);const t=this.D99_activeObject;t&&h&&function(t,e){if(t.type!==e.type||t.layer!==e.layer)return!1;return"hotspot"===t.type&&t.feature.id===e.feature.id||"feature"===t.type&&t.feature.id===e.feature.id}(t,h)||(t&&this.FD9_emitLayerEvent("mouseleave",t,c,e),h&&this.FD9_emitLayerEvent("mouseenter",h,c,e)),this.D99_activeObject=h}else h&&this.FD9_emitLayerEvent(t,h,c,e);h||(this.D86_initHandlers(t,n),this.B46_handlers[t][n].forEach((t=>t(null,c,e))),this.D86_initHandlers(t,r),this.B46_handlers[t][r].forEach((t=>t(null,c,e))))},this.FD9_emitLayerEvent=(t,e,i,s)=>{this.D86_initHandlers(t,a),this.B46_handlers[t][a].forEach((t=>t(e,i,s))),i[l]||(this.D86_initHandlers(t,e.layer),this.B46_handlers[t][e.layer].forEach((t=>t(e,i,s))),i[l]||(this.D86_initHandlers(t,r),this.B46_handlers[t][r].forEach((t=>t(e,i,s)))))},this.D86_initHandlers=(t,e)=>{this.B46_handlers[t]=this.B46_handlers[t]||{},this.B46_handlers[t][e]=this.B46_handlers[t][e]||[]},this.D86_map=t,this.B3B_eventObjectsFilter=e,c.forEach((t=>this.D86_map.container.addEventListener(t,this.EAB_onEvent)))}destroy(){this.D93_stopWaitingHotspots(!1),window.clearInterval(this.C55_clickTimer),c.forEach((t=>this.D86_map.container.removeEventListener(t,this.EAB_onEvent)))}on(t,e,i){this.D86_initHandlers(t,e),this.B46_handlers[t][e].push(i)}off(t,e,i){this.D86_initHandlers(t,e);const s=this.B46_handlers[t][e].indexOf(i);-1!==s&&this.B46_handlers[t][e].splice(s,1)}}function p(t){if("touches"in t){const e=t.touches[0]||t.changedTouches[0];return{x:e.clientX,y:e.clientY}}return{x:t.clientX,y:t.clientY}}},24055:(t,e,i)=>{i.d(e,{L:()=>r});var s=i(6049),o=i(80652);class n{constructor(t=6378137,e=.0818191908426){this.radius=t,this.e=e,this.FD3_e2=this.e*this.e,this.EC4_e4=this.FD3_e2*this.FD3_e2,this.B3B_e6=this.EC4_e4*this.FD3_e2,this.D80_e8=this.EC4_e4*this.EC4_e4,this.A22_subradius=1/t,this.B33_d2=this.FD3_e2/2+5*this.EC4_e4/24+this.B3B_e6/12+13*this.D80_e8/360,this.EAF_d4=7*this.EC4_e4/48+29*this.B3B_e6/240+811*this.D80_e8/11520,this.C66_d6=7*this.B3B_e6/120+81*this.D80_e8/1120,this.EA7_d8=4279*this.D80_e8/161280}mercatorToGeo(t){const e=this.xToLongitude(t.x),i=this.yToLatitude(t.y),s=void 0!==t.z?this.zToAltitude(t.z,i):void 0;return void 0!==s?[e,i,s]:[e,i]}geoToMercator(t){const e=3===t.length?t[2]:void 0;return{x:this.longitudeToX(t[0]),y:this.latitudeToY(t[1]),z:void 0!==e?this.altitudeToZ(e,t[1]):void 0}}xToLongitude(t){return o.j*(0,s.d)(t*this.A22_subradius,-Math.PI,Math.PI)}yToLatitude(t){const e=.5*Math.PI-2*Math.atan(1/Math.exp(t*this.A22_subradius)),i=e+this.B33_d2*Math.sin(2*e)+this.EAF_d4*Math.sin(4*e)+this.C66_d6*Math.sin(6*e)+this.EA7_d8*Math.sin(8*e);return o.j*i}zToAltitude(t,e){return t*Math.cos(o.Z*e)}longitudeToX(t){const e=(0,s.d)(o.Z*t,-Math.PI,Math.PI);return this.radius*e}latitudeToY(t){const e=o.Z*(0,s.q)(t,1e-10-90,90-1e-10),i=this.e*Math.sin(e),n=Math.tan(.25*Math.PI+.5*e)/Math.pow(Math.tan(.25*Math.PI+.5*Math.asin(i)),this.e);return this.radius*Math.log(n)}altitudeToZ(t,e){return t/Math.cos(o.Z*e)}}const r=new class{constructor({radius:t,e,type:i}){this.C53_mercator=new n(t,e),this.A19_halfEquator=Math.PI*this.C53_mercator.radius,this.type=i}toWorldCoordinates(t){const e=this.C53_mercator.geoToMercator(t);return{x:(this.A19_halfEquator+e.x)/this.A19_halfEquator-1,y:(0,s.q)(1-(this.A19_halfEquator-e.y)/this.A19_halfEquator,-1,1),z:void 0!==e.z?e.z/this.A19_halfEquator:void 0}}fromWorldCoordinates(t){let e=this.C53_mercator.yToLatitude(this.A19_halfEquator-(1-t.y)*this.A19_halfEquator);e=(0,s.q)(e,-90,90);const i=o.j*(0,s.d)(Math.PI*t.x,-Math.PI,Math.PI),n=void 0!==t.z?t.z*this.A19_halfEquator:void 0;return void 0!==n?[i,e,n]:[i,e]}}({type:"EPSG:3395"})},75155:(t,e,i)=>{i.d(e,{E:()=>l});var s=i(96883),o=i(19649),n=i(16574);class r extends Error{constructor(t,e){super(t),this.xhr=e}}var a=i(78277),h=i(25387);function l(t){const e=(0,h.B5)(t);return(t,i,s,h)=>function(t,e){if(e.aborted)return Promise.reject((0,o.o)());const i=new XMLHttpRequest;i.open("get",t,!0);const s=i.abort.bind(i);e.addEventListener("abort",s);const a=new Promise(((s,a)=>{i.onload=()=>{if(200===i.status)try{s(JSON.parse(i.responseText))}catch(t){(0,n.H)(t),a(t)}else 204===i.status?s(null):a(new Error(`Bad status code: ${i.status}`))},i.onerror=()=>{e.aborted?a((0,o.o)()):a(new r(`Error on GET to ${t}.`,i))},i.onabort=()=>a((0,o.o)())}));return i.send(),a.finally((()=>e.removeEventListener("abort",s)))}(e(t,i,s,1),h).then((t=>{if(!t||t.error&&404===t.error.code)return[];if(t.error)throw new Error(`Server sent an error (code = ${t.error.code}): ${t.error.message}`);return(0,a.$7)(t.data).map((t=>({type:"rendered",feature:c(t),geometry:(0,a.ZE)(t.properties.HotspotMetaData.RenderedGeometry,(([t,e])=>({x:t,y:e})))})))})).catch((t=>{if(t instanceof r&&0===t.xhr.status&&4===t.xhr.readyState)return[];(0,n._y)(t)}))}function c(t){const e=t.properties.URIMetaData;return{type:"Feature",id:String(t.properties.HotspotMetaData.id),geometry:t.geometry,properties:Object.assign(Object.assign({},t.properties),{uri:(e&&e.URIs[0]||{}).uri,[s.u]:d(t.properties)})}}function d(t){let e={};return t.id&&(e.id=t.id),t.name&&(e.name=t.name),t.hintContent&&(e.hint=t.hintContent),e}},21456:(t,e,i)=>{i.d(e,{x:()=>s});class s{constructor(t){this._props=t}_requestRender(){this._props.requestRender()}render(){}}},65005:(t,e,i)=>{i.d(e,{K:()=>a,e:()=>r});var s=i(9461),o=i(60632),n=i(39190);const r=Symbol("__hotspotCookieKey");class a extends((0,s.GA)().with()){constructor(t,e){super(),this._props=e,this.state={tilesLoaded:0,tilesReady:0,tilesTotal:0,borderLoaded:0,borderReady:0,borderTotal:0,graphicsReady:0,graphicsTotal:0},this.C62__fov=n.d$,this.FCF__customLayer=new t({requestRender:e.requestRender,size:e.size,element:e.element,camera:e.camera,worldOptions:e.worldOptions,projection:e.projection,options:e.options}),this.ECB__camera=e.camera,this.C68__size=e.size}destroy(){this.FCF__customLayer.destroy()}findFeatureByElement(){return null}findObjectInPosition(t){var e,i;const s=this;let n=null===(i=(e=this.FCF__customLayer).findObjectInPosition)||void 0===i?void 0:i.call(e,{worldCoordinates:t,get screenCoordinates(){return(0,o.Rv)(t,Object.assign(Object.assign({},s.ECB__camera),{fov:s.C62__fov,size:s.C68__size,container:s._props.element}))}});return function(t){return Boolean(t&&t[r])}(n)&&(n={type:"raw-hotspot",feature:{type:"Feature",id:n.id,geometry:n.geometry,cookie:n[r],properties:n.properties}}),null!=n?n:null}update(t,e){this.ECB__camera=t,this.C62__fov=e}resize(t){this.C68__size=t}render(t){this.FCF__customLayer.render({size:this.C68__size,camera:Object.assign(Object.assign({},t.camera),{fov:this.C62__fov}),get worlds(){return t.worlds}})}}},47226:(t,e,i)=>{i.d(e,{K:()=>p});var s=i(31838),o=i(9461),n=i(24607),r=i(15252),a=i(78277),h=i(6049),l=i(25950),c=i(16574),d=i(81024),u=i(19649);const _=()=>{};class p extends((0,o.GA)().with()){constructor({size:t,camera:e,dataSource:i,worldOptions:s,processingQueue:o,zoomRoundingRule:n}){super(),this._newTiles=new Map,this._loadingTiles=new Map,this._readyTiles=new Map,this._size=t,this._camera=e,this.C51_tileSource=i,this.FE3_zoomRoundingRule=n,this.C53_worldOptions=s,this.C59_queue=o}get state(){return{tilesLoaded:0,tilesReady:0,tilesTotal:0,borderTotal:0,borderLoaded:0,borderReady:0,graphicsTotal:0,graphicsReady:0}}destroy(){this._loadingTiles.forEach((t=>{t.abortController.abort()}))}preloadHotspotsInPoint(t){const e=this.FE3_zoomRoundingRule(this._camera.zoom),i=this.FF1_computeAffectedTiles(t,e);let o=!1;for(const t of i){const e=(0,s.vD)(t,t.zoom);this.D84_isTileDataReadyOrLoading(e)||this._newTiles.has(e)||(this._newTiles.set(e,{id:t}),o=!0)}const n=this.C53_stopLoadingTilesOutsideRadius(t);(o||n)&&this._emit("hotspotsChanged"),o&&this._emit("requestRender")}preloadHotspotsForViewport(){const t=this.EBF_getTilesForViewport().filter((t=>!this.D84_isTileDataReadyOrLoading((0,s.vD)(t,t.zoom))));let e=!1;for(const i of t){const t=(0,s.vD)(i,i.zoom);this.D84_isTileDataReadyOrLoading(t)||this._newTiles.has(t)||(this._newTiles.set(t,{id:i}),e=!0)}e&&(this._emit("hotspotsChanged"),this._emit("requestRender"))}resize(t){l.wy(t,this._size)||(this._size=t,this.C69_removeTilesOutsideViewport()&&this._emit("hotspotsChanged"))}update(t,e){const{worldCenter:i,zoom:s}=t;i===this._camera.worldCenter&&s===this._camera.zoom||(this._camera=t,this.C69_removeTilesOutsideViewport()&&this._emit("hotspotsChanged"))}render({qualityHint:t}){t<d._.FULL||this._camera.zoom<this.C51_tileSource.zoomRange.min||this._camera.zoom>this.C51_tileSource.zoomRange.max||(this._newTiles.forEach((t=>{const e=(0,s.vD)(t.id,t.id.zoom),i=this.C6D_loadTile(t);this._loadingTiles.set(e,i),i.promise.then((s=>{const o=s.map((e=>"world"===e.type?e:function(t,e,i){const s=l.Sm(e,i);return{type:"world",feature:t.feature,geometry:(0,a.ZE)(t.geometry,(t=>r.B.pixelsToWorld(l.IH(t,s),e.zoom)))}}(e,t.id,this.C51_tileSource.tileSize))),n=this.FE3_zoomRoundingRule(this._camera.zoom),h=this.C51_tileSource.padding/r.B.getWorldPixelSize(n),c=0===this.C51_tileSource.padding?o:o.map((t=>Object.assign(Object.assign({},t),{geometry:g(t.geometry,h)})));this._readyTiles.set(e,{id:i.id,hotspots:c}),this._emit("hotspotsChanged")})).finally((()=>this._loadingTiles.delete(e))).catch((t=>{(0,u.D)(t)||(0,c._y)(t)}))})),this._newTiles.clear())}findObjectInPosition(t){var e,i;const o=r.B.restrictToZeroWorld(t,this.C53_worldOptions),a=this.FE3_zoomRoundingRule(this._camera.zoom),h=this.FF1_computeAffectedTiles(o,a);let l=!0;for(const t of h){const e=this._readyTiles.get((0,s.vD)(t,a));if(e)for(let t=e.hotspots.length-1;t>=0;t--){const i=e.hotspots[t];if((0,n.R)(i.geometry,o))return{type:"raw-hotspot",feature:i.feature}}else l=!1}const c=null===(i=(e=this.C51_tileSource).internalFindHotspotInPosition)||void 0===i?void 0:i.call(e,o,a);return c||(l?null:void 0)}findFeatureByElement(){return null}C53_stopLoadingTilesOutsideRadius(t){const e=this.FE3_zoomRoundingRule(this._camera.zoom),i=l.ZO(r.B.worldToPixels(t,e),this.C51_tileSource.tileSize),s=Math.max(this.C51_tileSource.hotspotAbortRadius,this.C51_tileSource.inset)/this.C51_tileSource.tileSize,o=m(this._loadingTiles,(t=>function(t,e,i){const s=l.Ue((0,h.q)(e.x,t.x,t.x+1),(0,h.q)(e.y,t.y,t.y+1));return l.lu(s,e,s),l.DG(s)<=Math.pow(i,2)}(t.id,i,s)),(t=>t.abortController.abort()));return o}C69_removeTilesOutsideViewport(){const t=this.FE3_zoomRoundingRule(this._camera.zoom),e=r.B.getScale(t,this._camera.zoom),i=l.Ue(this._size.x+2*this.C51_tileSource.inset,this._size.y+2*this.C51_tileSource.inset),o=r.B.worldToPixels(this._camera.worldCenter,t),n=(0,s.TG)(o,i,e,this.C51_tileSource.tileSize),a=({id:e})=>e.zoom===t&&e.x<=n.maxX&&e.x+1>=n.minX&&e.y<=n.maxY&&e.y+1>=n.minY,h=m(this._newTiles,a),c=m(this._loadingTiles,a,(t=>t.abortController.abort())),d=m(this._readyTiles,a);return h||c||d}D84_isTileDataReadyOrLoading(t){return this._loadingTiles.has(t)||this._readyTiles.has(t)}EBF_getTilesForViewport(){const t=this.FE3_zoomRoundingRule(this._camera.zoom),e=r.B.getScale(t,this._camera.zoom),i=r.B.worldToPixels(this._camera.worldCenter,t),o=(0,s.TG)(i,this._size,e,this.C51_tileSource.tileSize),n=[];for(let e=o.minX;e<=o.maxX;e++)for(let i=o.minY;i<=o.maxY;i++)n.push({x:e,y:i,zoom:t});return n}C6D_loadTile(t){const e=(0,s.Su)(t.id.zoom,this.C51_tileSource.tileSize),i=l.G7(t.id,(t=>(0,h.d)(t,0,e))),{promise:o,abortController:n}=this.C59_queue.enqueue((e=>{const s=this.C51_tileSource.fetchHotspots;return!e.aborted&&s?Promise.resolve(s(i.x,i.y,t.id.zoom,e)).catch((t=>(0,c._y)(t))):Promise.resolve([])}));return{id:t.id,abortController:n,promise:o}}FF1_computeAffectedTiles(t,e){const i=r.B.worldToTile(t,e,this.C51_tileSource.tileSize),s=l.G7(i,Math.floor),o=l.lu(i,s);l.Sm(o,this.C51_tileSource.tileSize,o);const n=o.x<this.C51_tileSource.inset,a=o.x>this.C51_tileSource.tileSize-this.C51_tileSource.inset,h=o.y<this.C51_tileSource.inset,c=o.y>this.C51_tileSource.tileSize-this.C51_tileSource.inset,d=[{x:s.x,y:s.y,zoom:e}];return n&&d.push({x:s.x-1,y:s.y,zoom:e}),a&&d.push({x:s.x+1,y:s.y,zoom:e}),h&&d.push({x:s.x,y:s.y-1,zoom:e}),c&&d.push({x:s.x,y:s.y+1,zoom:e}),n&&h&&d.push({x:s.x-1,y:s.y-1,zoom:e}),n&&c&&d.push({x:s.x-1,y:s.y+1,zoom:e}),a&&h&&d.push({x:s.x+1,y:s.y-1,zoom:e}),a&&c&&d.push({x:s.x+1,y:s.y+1,zoom:e}),d}}function m(t,e,i=_){let s=!1;return t.forEach(((o,n)=>{e(o)||(i(o),t.delete(n),s=!0)})),s}function g(t,e){if("Polygon"!==t.type)return t;const i=t.coordinates[0],s=i.reduce(((t,e)=>l.IH(t,e,t)),l.Ue(0,0)),o=l.ZO(s,i.length),n=1+e/i.reduce(((t,e)=>Math.max(t,l.kE(l.lu(e,o)))),0);for(const t of i){const e=l.lu(t,o);l.Sm(e,n,e),l.IH(e,o,t)}return t}},14001:(t,e,i)=>{i.d(e,{dh:()=>h,vi:()=>d,sT:()=>_});var s=i(28277);function o(t,e){const i=Object.assign({path:[],current:void 0,steps:0},e);return a(i,t),i}function n(t){for(;0!==t.path.length;){const e=t.path[t.path.length-1],i=e.node.EA4__implChildren;if(-1===t.order?-1!==e.next:e.next!==i.length){t.current=i[e.next],e.next+=t.order;break}t.path.pop()}0!==t.path.length?t.current instanceof s.n5&&t.recurse(t.current)&&a(t,t.current):t.current=void 0}function r(t,e){for(n(t);t.current&&!e(t.current);)n(t)}function a(t,e){const i=1===t.order?0:e.EA4__implChildren.length-1;t.path.push({node:e,next:i})}const h=new s._y("DomContext");s.zS.add(h);const l=new WeakMap,c=new WeakMap;function d(t,e,i){if(t.C79__implNotifyDomContextOnDescendantMoved)throw new Error("createDomContext: only one DomContext per entity is allowed");t.C79__implNotifyDomContextOnDescendantMoved=!0;let s=!1;l.set(t,{element:e,endElement:i});return[{attach:(i,o)=>{if(s)throw new Error("DomContext: destroyed");if(c.has(i))throw new Error("DomContext: element already attached");c.set(i,{element:o}),u(t,i);let n=!1;return()=>{n||(e.removeChild(o),c.delete(i),n=!0)}}},()=>{s||(s=!0,l.delete(t),t.C79__implNotifyDomContextOnDescendantMoved=!1)}]}function u(t,e){var i,s,n;const a=l.get(t);if(!a)throw new Error("DomContext: attaching to entity with destroyed DomContext");const h=c.get(e);if(!h)return;const d=o(t,{order:1,recurse:t=>!l.has(t)});if(r(d,(t=>t===e)),!d.current)throw Error(`DomContext: reattaching ${e.constructor.name} not in ${t.constructor.name}'s tree`);r(d,(t=>c.has(t)));const u=null!==(n=null!==(s=d.current?null===(i=c.get(d.current))||void 0===i?void 0:i.element:void 0)&&void 0!==s?s:a.endElement)&&void 0!==n?n:null;a.element.insertBefore(h.element,u)}function _(t,e,i){return function(t,e,i,s){const o=t._consumeContext(h);if(!o)return()=>{};const n=null==o?void 0:o.attach(t,e);let r;if(i){const[e,o]=d(t,i,s);r=o,t.B46__implProvideContext(h,e)}return()=>{null==r||r(),n()}}(t,e,i)}s.tV.DomContextOnDescendantMoved=function(t,e){if(u(t,e),!(e instanceof s.n5)||l.has(e))return;const i=o(e,{order:-1,recurse:t=>!l.has(t)});n(i);for(;i.current;)u(t,i.current),n(i)}},28277:(t,e,i)=>{i.d(e,{Ku:()=>r,L0:()=>l,MX:()=>d,_y:()=>o,n5:()=>c,ru:()=>u,tV:()=>a,zS:()=>h});var s=i(79655);class o{constructor(t){this.name=t}}class n{constructor(){this.watchers=new Set}consume(){return this.ABC_context}provide(t){this.ABC_context=t,this.watchers.forEach((t=>t()))}}const r={},a={},h=new WeakSet;class l{constructor(t){this.C5E__implRoot=null,this.A18__implParent=null,this.FD2__implProxyParent=null,this.C79__implNotifyDomContextOnDescendantMoved=!1,this._props=this.C5F__implPrepareProps(t)}_getDefaultProps(t){return this.constructor.defaultProps}update(t){this.B3C__implUpdateProps(Object.assign({},this._props,t))}B3C__implUpdateProps(t){var e;const i=this._props;if(this._props=this.C5F__implPrepareProps(t,i),!(this.C5E__implRoot||this instanceof u))return;const s=function(t,e){const i=Object.keys(t).filter((t=>void 0===e[t])).reduce(((t,e)=>(t[e]=void 0,t)),{});return Object.keys(e).filter((i=>t[i]!==e[i])).reduce(((t,i)=>(t[i]=e[i],t)),i)}(i,this._props);Object.keys(s).length&&(null===(e=this._onUpdate)||void 0===e||e.call(this,s,i))}C5F__implPrepareProps(t,e){var i,s;null!=t||(t={});for(const[i,s]of Object.entries(t))s===r&&(t[i]=e[i]);const o=this._getDefaultProps(t);if(o)for(const[e,n]of Object.entries(o))null!==(i=(s=t)[e])&&void 0!==i||(s[e]=n);return t}B35__implAttachExtra(){}B2F__implDetachExtra(){}D98__implAttachTo(t){var e;this.A18__implParent!==t&&(null===(e=this.EC7__implCtxWatchers)||void 0===e||e.forEach(((t,e)=>{const i=this.C70__implGetContextProvider(e);t.forEach((t=>null==i?void 0:i.watchers.delete(t)))})),this.A18__implParent&&(this.C6F__implDetach(),this.A18__implParent=null),this.A18__implParent=t,this.A18__implParent&&this.EB2__implAttach())}get parent(){var t;const e=this.A18__implParent;return null!==(t=null==e?void 0:e.FD2__implProxyParent)&&void 0!==t?t:e}get root(){return this.C5E__implRoot}A1D__implFindRoot(){let t=this;for(;t;){if(t instanceof u)return t;t=t.A18__implParent}return null}EB2__implAttach(){var t;const e=this.A1D__implFindRoot();this.C5E__implRoot!==e&&(this.C5E__implRoot=e,null===(t=this._onAttach)||void 0===t||t.call(this),this.B35__implAttachExtra())}C6F__implDetach(){var t;this.C5E__implRoot&&(this.B2F__implDetachExtra(),null===(t=this._onDetach)||void 0===t||t.call(this),this.EB3__implCtxMap=void 0,this.EC7__implCtxWatchers=void 0,this.C5E__implRoot=null)}_provideContext(t,e){if(h.has(t))throw new Error(`Context ${t.name} is readonly. You cannot provide it.`);this.B46__implProvideContext(t,e)}B46__implProvideContext(t,e){var i;null!==(i=this.EB3__implCtxMap)&&void 0!==i||(this.EB3__implCtxMap=new Map);let s=this.EB3__implCtxMap.get(t);s||(s=new n,this.EB3__implCtxMap.set(t,s)),s.provide(e)}C70__implGetContextProvider(t){var e;for(let i=this.A18__implParent;i;i=i.A18__implParent){const s=null===(e=i.EB3__implCtxMap)||void 0===e?void 0:e.get(t);if(s)return s}}_consumeContext(t){var e;return null===(e=this.C70__implGetContextProvider(t))||void 0===e?void 0:e.consume()}_watchContext(t,e,i){var s,o;const n=this.C70__implGetContextProvider(t);if(!n)throw new Error(`watchContext: no ${t.name} to watch`);this.EC7__implCtxWatchers=null!==(s=this.EC7__implCtxWatchers)&&void 0!==s?s:new Map;const r=null!==(o=this.EC7__implCtxWatchers.get(t))&&void 0!==o?o:new Set;return n.watchers.add(e),r.add(e),this.EC7__implCtxWatchers.set(t,r),(null==i?void 0:i.immediate)&&e(),()=>{r.delete(e),n.watchers.delete(e)}}C52__implReposition(){if(a.DomContextOnDescendantMoved)for(let t=this.A18__implParent;t;t=t.A18__implParent)if(t.C79__implNotifyDomContextOnDescendantMoved){a.DomContextOnDescendantMoved(t,this);break}}}class c extends l{constructor(t,e,i){var s;let o,n;super(t),this.EA4__implChildren=[],this.children=this.EA4__implChildren,this._childContainer=this,Array.isArray(e)?(n=e,o=!0===(null==i?void 0:i.container)):(n=null!==(s=null==e?void 0:e.children)&&void 0!==s?s:[],o=!0===(null==e?void 0:e.container)),o&&(this._childContainer=this.__makeProxyContainer(),this._childContainer.FD2__implProxyParent=this,this._addDirectChild(this._childContainer),this.children=this._childContainer.EA4__implChildren),n.forEach((t=>this.addChild(t)))}__makeProxyContainer(){return new c({})}_addDirectChild(t,e){ymaps3.strictMode&&(0,s.h)(t instanceof l,"Child must be an Entity");const i=t;if(!i.D98__implAttachTo)throw new Error("Not attachable child");for(let t=this;t;t=t.A18__implParent)if(t===i)throw new Error("Can't attach entity to its parent");const o=i.A18__implParent;if(o&&o!==this&&o._removeDirectChild(t),void 0!==e){if(e<0||e>this.EA4__implChildren.length)throw new Error("Bad index");const s=this.EA4__implChildren.indexOf(t);-1!==s&&(this.EA4__implChildren.splice(s,1),e>s&&(e-=1)),this.EA4__implChildren.splice(e,0,i),-1===s?i.D98__implAttachTo(this):i.C52__implReposition()}else{if(-1!==this.EA4__implChildren.indexOf(i))return;this.EA4__implChildren.push(i),i.D98__implAttachTo(this)}}addChild(t,e){return this._childContainer._addDirectChild(t,e),this}_removeDirectChild(t){const e=t;if(!e.D98__implAttachTo)throw new Error("Not attachable child");const i=this.EA4__implChildren.indexOf(e);-1!==i&&(this.EA4__implChildren.splice(i,1),e.D98__implAttachTo(null))}removeChild(t){return this._childContainer._removeDirectChild(t),this}B35__implAttachExtra(){for(let t=0;t<this.EA4__implChildren.length;t++)this.EA4__implChildren[t].EB2__implAttach()}B2F__implDetachExtra(){for(let t=this.EA4__implChildren.length-1;t>=0;t--)this.EA4__implChildren[t].C6F__implDetach()}}class d extends c{__makeProxyContainer(){return new d({})}addChild(t,e){return super.addChild(t,e)}removeChild(t){return super.removeChild(t)}}class u extends d{constructor(){super(...arguments),this._onAttach=void 0,this._onDetach=void 0,this.D98__implAttachTo=void 0}get root(){return this}}},13722:(t,e,i)=>{i.d(e,{N:()=>o});var s=i(28277);const o=new s._y("ThemeContext");s.zS.add(o)},77605:(t,e,i)=>{i.d(e,{e:()=>s});const s=new(i(28277)._y)("TypeContext")},21833:(t,e,i)=>{i.d(e,{X:()=>o});var s=i(28277);const o=new s._y("map");s.zS.add(o)},33294:(t,e,i)=>{i.d(e,{$:()=>o});var s=i(28277);const o=new s._y("vector");s.zS.add(o)},34777:(t,e,i)=>{i.d(e,{O:()=>es});var s=i(60632);const o={failIfMajorPerformanceCaveat:!0,antialias:!1,depth:!0,stencil:!0,alpha:!1},n=[{renderer:/SwiftShader/},{renderer:/Parallels/}];let r;function a(t){try{const e=document.createElement("canvas");e.width=1,e.height=1;const i=Object.assign({},o);(null==t?void 0:t.allowSoftware)&&(i.failIfMajorPerformanceCaveat=!1);const s=e.getContext("webgl",i);if(s)return s}catch(t){}c()}function h(t){if(void 0===r){const e=t||a();e?r=function(t){let e=!0;const i=[],s=["requestAnimationFrame","Worker","URL","Blob","XMLHttpRequest","Set","Map"];for(const t of s){window[t]||(e=!1,i.push(`WindowPropertyNotExist-${t}`))}"function"!=typeof Math.trunc&&(e=!1,i.push("MathTrunc"));0===t.getParameter(t.MAX_VERTEX_TEXTURE_IMAGE_UNITS)&&(e=!1,i.push("MAX_VERTEX_TEXTURE_IMAGE_UNITS"));t.getExtension("OES_vertex_array_object")||(e=!1,i.push("OES_vertex_array_object"));t.getExtension("OES_standard_derivatives")||(e=!1,i.push("OES_standard_derivatives"));const o=t.getShaderPrecisionFormat(t.FRAGMENT_SHADER,t.HIGH_FLOAT);o&&0!==o.precision||(e=!1,i.push("Highp"));(function(t){if(!t)return!1;const e=t.createShader(t.VERTEX_SHADER);if(!e)return!1;t.shaderSource(e,"#version 100\nattribute vec2 p;\nvoid main() {\n    gl_Position = vec4(p,0,1);\n    gl_PointSize = 1.0;\n}"),t.compileShader(e);const i=t.createShader(t.FRAGMENT_SHADER);if(!i)return!1;t.shaderSource(i,"#version 100\nvoid main() {\n    gl_FragColor = vec4(1, 0, 0, 1);\n}"),t.compileShader(i);const s=t.createProgram();if(!s)return!1;t.attachShader(s,e),t.attachShader(s,i),t.bindAttribLocation(s,0,"p"),t.linkProgram(s);const o=t.createBuffer();t.bindBuffer(t.ARRAY_BUFFER,o),t.bufferData(t.ARRAY_BUFFER,new Float32Array([0,0]),t.STATIC_DRAW),t.enableVertexAttribArray(0),t.vertexAttribPointer(0,2,t.FLOAT,!1,0,0),t.clearColor(0,1,0,1),t.clear(t.COLOR_BUFFER_BIT),t.useProgram(s),t.drawArrays(t.POINTS,0,1);const n=new Uint8Array(4);return t.readPixels(0,0,1,1,t.RGBA,t.UNSIGNED_BYTE,n),t.deleteBuffer(o),t.deleteShader(e),t.deleteShader(i),t.deleteProgram(s),255===n[0]})(t)||(e=!1,i.push("TestPoints"));const r=t.getExtension("WEBGL_debug_renderer_info"),a=r&&t.getParameter(r.UNMASKED_VENDOR_WEBGL),h=r&&t.getParameter(r.UNMASKED_RENDERER_WEBGL),l="string"==typeof a?a:"",c="string"==typeof h?h:"",u=navigator.userAgent;for(const t of n)if(d(t,{vendor:l,renderer:c,ua:u})){e=!1,i.push("BlacklistedGpu");break}return{supported:e,reasonsFailed:i,info:{vendor:l,renderer:c}}}(e):c()}return r}function l(){return r?r.supported:window.WebGLRenderingContext&&!(function(){const t=navigator.userAgent;return!(/YandexSearch\//.test(t)||/YaApp/.test(t)||/YaBrowser\/[0-9][0-9.]* YaApp_iOS\/[0-9][0-9.]*/.test(t))&&!/MiuiBrowser\//.test(t)&&/Mac OS X [0-9_]+;.*HTC[_/ ]/.test(t)||/Mac OS X 10_[0-8][^0-9]/.test(navigator.userAgent)||/SamsungBrowser\//.test(t)}()||function(){var t;const e=null===(t=navigator.userAgent)||void 0===t?void 0:t.match(/WebKit\/?(\d+)/i);return Boolean(e&&Number(e[1])<537)}()||function(){var t;const e=null===(t=navigator.userAgent)||void 0===t?void 0:t.match(/Chrome\/(\d+)/i);return!!e&&Number(e[1])<57}())||(c(),!1)}function c(){r={supported:!1,reasonsFailed:["HasWebGl"],info:{}}}function d(t,e){return Object.keys(t).every((i=>{const s=t[i],o=e[i];return!s||s.test(o)}))}var u=i(35150),_=i(9461),p=i(78277),m=i(81024),g=i(29509),y=i(80652);const E=30*y.Z;var f=i(15252),C=i(25950);function D(t,e,i,s,o){const n=t.toWorldCoordinates(e);return o?C.lu(n,M(o,i,s)):n}function M(t,e,i){const s=f.B.convertPixelSizeToWorldSize({x:(t[3]-t[1])/2,y:(t[0]-t[2])/2},e);return C.U1(s,i,s),s}var v=i(6049),A=i(79655),x=i(16574);const S=t=>{var e;return null===(e=b[t.effectiveMode])||void 0===e?void 0:e.call(b,t)},b={raster:()=>null,vector:()=>null};var w=i(21456);const j="__empty__",L="default";function T(t){const e={id:t.id,grouppedWith:t.grouppedWith,source:t.source?t.source:j,type:t.type?t.type:L,implementation:(...e)=>{if(t.implementation){const i=t.implementation(...e);if(i)return i}return S(...e)},options:{raster:{},vector:{}}};return function(t,e){var i,s,o,n,r;!e.grouppedWith&&(null===(s=null===(i=t.options)||void 0===i?void 0:i.vector)||void 0===s?void 0:s.parentLayerId)&&(e.grouppedWith=null===(n=null===(o=t.options)||void 0===o?void 0:o.vector)||void 0===n?void 0:n.parentLayerId);const a=null===(r=t.options)||void 0===r?void 0:r.raster;if(!(null==a?void 0:a.implementation))return;ymaps3.strictMode&&(0,A.h)(!1,"Please use layer.implementation instead  layer.options.raster.implementation"),t.implementation||(t.implementation=()=>{const t=a.implementation;return t.prototype instanceof w.x||(0,x._y)(new Error("Implementation must be derived from CustomDomLayer")),t})}(t,e),t.options&&(t.options.raster&&(e.options.raster=Object.assign({},t.options.raster)),t.options.vector&&(e.options.vector=Object.assign({},t.options.vector))),e}const z=/^(\w+)?(?::(\w+)(?:\((.*)\))?)?$/;let B;var F=i(25387),I=i(68222),N=i(51717),O=i(19649),R=i(62367),P=i(31838);const k=t=>Math.abs(t)>=1e21?t.toPrecision(100):t.toFixed(5);var Y;function Z(t,e){return t.state=e,t}!function(t){t[t.QUEUED=0]="QUEUED",t[t.LOADING=1]="LOADING",t[t.LOADED=2]="LOADED",t[t.ANIMATING=3]="ANIMATING",t[t.READY=4]="READY",t[t.EMPTY=5]="EMPTY",t[t.REMOVED=6]="REMOVED"}(Y||(Y={}));class U extends((0,_.GA)().with()){get needsRender(){return 0!==this._loadedTiles.size||this.FE8_haveTilesToAnimate}constructor(t,e,i,s,o,n,r,a,h,l,c,d,u,_,p,m){super(),this.D8E_currentTiles=new Map,this.FEA_renderedOffset={x:0,y:0},this.A1A_renderedScale=0,this.B30_renderedAzimuth=0,this.C73_renderedTilt=0,this._loadedTiles=new Set,this.FE8_haveTilesToAnimate=!1,this.B2F_tileBounds=[C.jQ,C.jQ,C.jQ,C.jQ],this.state={tilesLoaded:0,tilesTotal:0,tilesReady:0,borderLoaded:0,borderReady:0,borderTotal:0,graphicsReady:0,graphicsTotal:0},this.AD0_createTile=t=>{const e=this.EAE_computeScreenCoordinatesForTile(t),i=this.D89_computeTilePriority(t),s=this.FD8_tileLoadingQueue.enqueue((t=>this.C6D_loadTile(o,t)),i),o=Object.assign({state:Y.QUEUED,info:t,screenX:Math.round(e.x),screenY:Math.round(e.y),animate:this.C67_getTileRevealDuration()>0&&(!this.B32_firstScreen||this.EAB_animateFirstScreen),animationStartTs:0,image:null,destroy:()=>{}},s);return o.promise.then((t=>{o.abortController.signal.aborted||this.A24_onTileLoad(t)})).catch((t=>{(0,O.D)(t)||(0,x._y)(t)})),o},this.B4B_updateTile=(t,e)=>{t.info=e;const i=this.EAE_computeScreenCoordinatesForTile(t.info);t.state===Y.QUEUED&&t.updatePriority(this.D89_computeTilePriority(t.info)),t.screenX===i.x&&t.screenY===i.y||(t.screenX=i.x,t.screenY=i.y,t.state!==Y.ANIMATING&&t.state!==Y.READY||this.A10_setTilePosition(t,i))},this.A24_onTileLoad=t=>{t.state===Y.LOADED?(this._loadedTiles.add(t),this._emit("requestRender")):t.state===Y.EMPTY&&this._countReadyTile(t)},this.EB9_shouldAwaitAllTiles=c,this.D9D_releaseAwaitAllTilesTrigger=d,this.C67_getTileRevealDuration=u,this.D9A_setTileRevealProgress=_,this.A10_setTilePosition=p,this.EAF_onPromiseTileLoad=m,this.C64_visibleCenter=t,this.C5C_scale=e,this._azimuth=i,this._tilt=s,this.FEC_fov=o,this.C5B_size=r,this._tileSource=a,this.zoom=n,this.EAB_animateFirstScreen=h,this.FD8_tileLoadingQueue=l,this.C56_fetchedCenter=this.C64_visibleCenter,this.FD7_fetched=!1,this.B32_firstScreen=!0}get scale(){return this.C5C_scale}destroy(){this.D8E_currentTiles.forEach(this._removeTile.bind(this))}resize(t){this.FD7_fetched=!1,this.C5B_size=t,this.reposition(m._.FULL)}update(t,e,i,s,o){this.C64_visibleCenter=f.B.computePixelPerfectWorldCoordinates(t,this.zoom,(0,R.x)(),s),this._azimuth=e,this._tilt=i,this.C5C_scale=s,this.FEC_fov=o}setVisibility(t){throw new Error("Method not implemented.")}freeze(){this._loadedTiles.clear(),this.D8E_currentTiles.forEach(((t,e)=>{t.state<=Y.LOADED&&(this.D8E_currentTiles.delete(e),this._removeTile(t))}))}unfreeze(){this.FD7_fetched=!1}reposition(t){ymaps3.strictMode&&(0,A.h)(!this._tileSource.worldOptions.cycledY,"Y-cycled projections are not supported");const e=C.lu(this.C56_fetchedCenter,this.C64_visibleCenter),i=this._tileSource.worldOptions.cycledX?f.B.moveCloseToCenter(this.C56_fetchedCenter,this.C64_visibleCenter,e):e,o=f.B.worldToRelativePixels(i,this.zoom),n=t>=m._.FULL;if(n&&C.G7(o,Math.round,o),t!==m._.FULL&&C.wy(o,this.FEA_renderedOffset)&&this.A1A_renderedScale===this.C5C_scale&&this.B30_renderedAzimuth===this._azimuth&&this.C73_renderedTilt===this._tilt)return;this.A1A_renderedScale=this.C5C_scale,this.B30_renderedAzimuth=this._azimuth,this.C73_renderedTilt=this._tilt;const r=t===m._.QUICK?C.jQ:this._computeContainerSubpixelOffset((0,R.x)());this.FEA_renderedOffset=C.lu(o,r,o);const a=(0,s.Os)(this.C5B_size.y,this.FEC_fov),h=a-a/this.C5C_scale,l=h*Math.sin(this._tilt),c=h*Math.cos(this._tilt),d=[(n?this.FEA_renderedOffset.x.toString():k(this.FEA_renderedOffset.x))+"px",(n?this.FEA_renderedOffset.y.toString():k(this.FEA_renderedOffset.y))+"px","0px"].join(", ");this._applyScaleAndTranslate(l,c,d)}_applyScaleAndTranslate(t,e,i){}render({qualityHint:t,time:e}){const i=(0,P.ZR)(f.B.worldToPixels(this.C64_visibleCenter,this.zoom),this._azimuth,this.C5B_size,this.C5C_scale,this._tileSource.tileSize);this.FD7_fetched&&!(0,P.jl)(i,this.B2F_tileBounds)||this.B4F_fetch(),this.B4F_fetch(),this.reposition(t),this.EB9_shouldAwaitAllTiles()&&this.state.tilesLoaded!==this.state.tilesTotal||(this._attachLoadedTiles(e),this.B35_revealNewTiles(e))}finishTileAnimations(){this.FE8_haveTilesToAnimate&&(this.D8E_currentTiles.forEach((t=>{t.state===Y.ANIMATING&&(this.D9A_setTileRevealProgress(t,1),this._countReadyTile(Z(t,Y.READY)))})),this.FE8_haveTilesToAnimate=!1)}_computeContainerSubpixelOffset(t){return{x:0,y:0}}B4F_fetch(){const{x:t}=C.lu(this.C56_fetchedCenter,this.C64_visibleCenter);this.C56_fetchedCenter=this.C64_visibleCenter;const e=f.B.worldToPixels(this.C56_fetchedCenter,this.zoom);this.D90_centralTilePoint=C.IH(C.ZO(e,this._tileSource.tileSize),{x:-.5,y:-.5});const{tiles:i,tileBounds:s}=(0,P.YC)(this.C64_visibleCenter,this._azimuth,this._tilt,this.zoom,this.C5C_scale,this.C5B_size,this._tileSource.tileSize);this.B2F_tileBounds=s;const o=(0,P.Su)(this.zoom,this._tileSource.tileSize);let n=this.D8E_currentTiles;const r=t>1;(r||t<-1)&&(n=new Map,this.D8E_currentTiles.forEach((t=>{const{x:e,y:i}=t.info,s=r?-o:o;n.set((0,P.vD)({x:e+s,y:i},this.zoom),t)})));const a=(0,N.B)(n,i,this.AD0_createTile,this._removeTile.bind(this),this.B4B_updateTile);this.D8E_currentTiles=a.result;this.B2E_updateState()&&this.A1F_emitStateChanged(),this.FD7_fetched=!0,this.B32_firstScreen=!1}_removeTile(t){var e;t.state!==Y.QUEUED&&t.state!==Y.LOADING||t.abortController.abort(),t.state===Y.LOADED&&this._loadedTiles.delete(t),Z(t,Y.REMOVED),null===(e=t.destroy)||void 0===e||e.call(t)}C6D_loadTile(t,e){const i=Z(t,Y.LOADING),s=(0,R.x)(),o=this._tileSource.fetchRasterTile(i.info.x,i.info.y,this.zoom,s,e);if(!o){const t=Z(i,Y.EMPTY);return this._countReadyTile(t),Promise.resolve(t)}return"string"==typeof o?this.D80_loadTileByUrl(i,o,e):this.B45_loadTileByPromise(i,o,e)}B45_loadTileByPromise(t,e,i){return e.then((e=>{if(i.aborted)throw(0,O.o)();const s=Z(t,Y.LOADED);return"function"==typeof e.destroy&&(s.destroy=e.destroy),this.EAF_onPromiseTileLoad(s,e),this.C75_countLoadedTile(s),s})).catch((e=>{if(i.aborted)throw(0,O.o)();(0,x.H)(e);const s=Z(t,Y.EMPTY);return this._countReadyTile(s),s}))}D80_loadTileByUrl(t,e,i){const s=new I.BH,o=new Image,n=e=>{if(o.onerror=null,o.onload=null,i.removeEventListener("abort",r),0===e){const e=Z(t,Y.LOADED);this.EAF_onPromiseTileLoad(e,{image:o}),s.resolve(e),this.C75_countLoadedTile(e)}else if(1===e){const e=Z(t,Y.EMPTY);s.resolve(e),this._countReadyTile(e)}else 2===e&&(o.src="",s.reject((0,O.o)()))},r=n.bind(null,2);i.addEventListener("abort",r);const a=n.bind(null,0),h=n.bind(null,1);return o.decode?(o.src=e,o.decode().then(a,h)):(o.onload=a,o.onerror=h,o.src=e),s.promise}_attachLoadedTiles(t){0!==this._loadedTiles.size&&(this._loadedTiles.forEach((e=>{if(e.animate){Z(e,Y.ANIMATING).animationStartTs=t}else this._countReadyTile(Z(e,Y.READY))})),this._loadedTiles.clear())}B35_revealNewTiles(t){this.FE8_haveTilesToAnimate=!1,this.D8E_currentTiles.forEach((e=>{if(e.state!==Y.ANIMATING)return;const i=this.C67_getTileRevealDuration(),s=i>0?Math.min(1,(t-e.animationStartTs)/i):1;this.D9A_setTileRevealProgress(e,s),s<1?this.FE8_haveTilesToAnimate=!0:this._countReadyTile(Z(e,Y.READY))})),this.FE8_haveTilesToAnimate?this._emit("requestRender"):this.D9D_releaseAwaitAllTilesTrigger()}C75_countLoadedTile(t){t.info.border?this.state.borderLoaded++:this.state.tilesLoaded++,this.A1F_emitStateChanged()}_countReadyTile(t){t.info.border?this.state.borderReady++:this.state.tilesReady++,this.A1F_emitStateChanged()}A1F_emitStateChanged(){this.state=Object.assign({},this.state),this._emit("stateChanged")}B2E_updateState(){const t={borderTotal:0,borderLoaded:0,borderReady:0,tilesTotal:0,tilesReady:0,tilesLoaded:0,graphicsTotal:0,graphicsReady:0};this.D8E_currentTiles.forEach((e=>{e.info.border?t.borderTotal++:t.tilesTotal++,e.state!==Y.LOADED&&e.state!==Y.ANIMATING&&e.state!==Y.READY||(e.info.border?t.borderLoaded++:t.tilesLoaded++),e.state===Y.READY&&(e.info.border?t.borderReady++:t.tilesReady++)}));const e=t.borderTotal!==this.state.borderTotal||t.borderLoaded!==this.state.borderLoaded||t.borderReady!==this.state.borderReady||t.tilesTotal!==this.state.tilesTotal||t.tilesReady!==this.state.tilesReady||t.tilesLoaded!==this.state.tilesLoaded;return e&&(this.state=t),e}D89_computeTilePriority(t){return(t.border?Number.MAX_SAFE_INTEGER/2:0)+(e=t,i=this.D90_centralTilePoint,Math.pow(e.x-i.x,2)+Math.pow(e.y-i.y,2));var e,i}EAE_computeScreenCoordinatesForTile(t){const e=this._tileSource.tileSize,i=f.B.worldToPixels(this.C64_visibleCenter,this.zoom),s=C.Sm(t,e),o=C.IH(C.lu(s,i),C.ZO(this.C5B_size,2));return C.G7(o,Math.round)}}var W=i(38575);const G=t=>Math.abs(t)>=1e21?t.toPrecision(100):t.toFixed(5);class Q extends U{constructor(t,e,i,s,o,n,r,a,h,l,c,d,u,_){super(e,i,s,o,n,r,a,h,l,c,d,u,_,((t,e)=>this.C65__setTileOpacity(t,e)),((t,e)=>this.C55__setTilePosition(t,e)),((t,e)=>this.FDE__onPromiseTileLoad(t,e))),this._loadedTiles=new Set,this.element=(0,W.E)("ymaps3x0--tile-layer__container"),this._removeTile=t=>{var e;super._removeTile(t),null===(e=t.element)||void 0===e||e.remove()},this.FE2_parent=t,this.element.dataset.z=String(r),t.appendChild(this.element),this.element.addEventListener("dragstart",(t=>{t.stopPropagation(),t.preventDefault()}))}_applyScaleAndTranslate(t,e,i){this.element.style.transform=`\n            rotateX(${G(this._tilt)}rad)\n            translate3d(0px, ${t}px, ${e}px)\n            rotateZ(${G(this._azimuth)}rad) translate3d(${i})\n        `}_computeContainerSubpixelOffset(t){const e=this.FE2_parent.getBoundingClientRect(),i={x:e.left,y:e.top};return C.G7(i,(e=>{const i=e*t;return(i-Math.round(i))/t}))}setVisibility(t){this.element.style.display=t?"":"none"}destroy(){this.element.remove(),super.destroy()}_attachLoadedTiles(t){if(0===this._loadedTiles.size)return;const e=document.createDocumentFragment();this._loadedTiles.forEach((t=>{this.C55__setTilePosition(t,{x:t.screenX,y:t.screenY}),t.element.style.width=`${this._tileSource.tileSize}px`,t.element.style.height=`${this._tileSource.tileSize}px`,this.C65__setTileOpacity(t,t.animate?0:1),e.appendChild(t.element)})),this.element.appendChild(e),super._attachLoadedTiles(t)}C55__setTilePosition(t,e){if(H(t)){const i=t.element;i.style.left=e.x+"px",i.style.top=e.y+"px"}}C65__setTileOpacity(t,e){H(t)&&(t.element.style.opacity=String(e))}FDE__onPromiseTileLoad(t,e){const i=e.image;if(!(i instanceof HTMLImageElement||i instanceof HTMLCanvasElement||V(i)))throw new Error("Unsupported image type allow only HTMLImageElement, HTMLCanvasElement or ImageBitmap");let s;if(V(i)){const t=document.createElement("canvas");t.width=i.width,t.height=i.height,t.style.width=`${this._tileSource.tileSize}px`,t.style.height=`${this._tileSource.tileSize}px`,t.style.position="absolute",t.getContext("2d").drawImage(i,0,0),s=t}else s=i;t.element=s}}function H(t){return void 0!==t.element}function V(t){return"undefined"!=typeof ImageBitmap&&t instanceof ImageBitmap}var X=i(39190);class $ extends((0,_.GA)().with()){constructor(t){super(),this._props=t,this.EB8_needsRender=!0,this.A1E_awaitAllTilesTrigger=!1,this._fov=X.d$,this.C66_deprecatedLayers=[],this.EB4_onForegroundTileReady=()=>{(this.AEC_layer.state.tilesReady===this.AEC_layer.state.tilesTotal||this._tileSource.transparent&&this.AEC_layer.state.tilesLoaded>0)&&this.B3B_cleanUpDeprecatedLayers(),this._emit("stateChanged")},this._shouldAwaitAllTiles=()=>this.A1E_awaitAllTilesTrigger,this._releaseAwaitAllTilesTrigger=()=>{this.A1E_awaitAllTilesTrigger=!1,this.C5E_oldDataSourceLayer&&(this.C5E_oldDataSourceLayer.destroy(),this.C5E_oldDataSourceLayer=void 0)},this._getTileRevealDuration=()=>this.tileRevealDuration;const{dataSource:e,size:i,camera:s,zoomRoundingRule:o,processingQueue:n,animateFirstScreen:r,options:a}=t;this.A1E_awaitAllTilesTrigger=this.awaitAllTilesOnFirstDisplay,this._size=i,this._camera=s,this.FF2_options=a,ymaps3.strictMode&&(0,A.h)(e instanceof F.Nt,"Data source should be instance of TileDataSource"),this._tileSource=e,this.FE3_zoomRoundingRule=o,this._processingQueue=n,this._updatePerspective(),this.C6A_roundZoom=this.FE3_zoomRoundingRule(this._camera.zoom),this.FCE_createLayerForCurrentZoom(r),this.FE2_inZoomRange=!0,this.A13_tileSourceSubscription=this._tileSource.group().on("sourceChanged",(t=>this.handleDataSourceUpdate(t)))}get center(){return this._camera.worldCenter}get zoom(){return this._camera.zoom}get size(){return this._size}get state(){return this.AEC_layer.state}get awaitAllTilesOnFirstDisplay(){var t;return Boolean(null===(t=this.FF2_options)||void 0===t?void 0:t.awaitAllTilesOnFirstDisplay)}get tileRevealDuration(){var t,e;return Math.max(null!==(e=null===(t=this.FF2_options)||void 0===t?void 0:t.tileRevealDuration)&&void 0!==e?e:200,0)}setOptions(t){this.FF2_options=t,this.A1E_awaitAllTilesTrigger=this.awaitAllTilesOnFirstDisplay}destroy(){this.A13_tileSourceSubscription.offAll(),this.AEC_layer.destroy(),this.B3B_cleanUpDeprecatedLayers()}update(t,e){var i,s;this._fov===e&&this._camera===t||(this.EB8_needsRender=!0,i=this._camera,s=t,C.pU(i.worldCenter,s.worldCenter)&&i.zoom===s.zoom&&i.azimuth===s.azimuth&&i.tilt===s.tilt||this._releaseAwaitAllTilesTrigger(),this._camera=t,this._fov=e,this.C6A_roundZoom=this.FE3_zoomRoundingRule(this._camera.zoom),this.C6A_roundZoom!==this.AEC_layer.zoom&&this.AEC_layer.freeze())}resize(t){if(!(0,C.wy)(this._size,t)){this.EB8_needsRender=!0,this._size=t,this.AEC_layer.resize(t);for(const e of this.C66_deprecatedLayers)e.resize(t);this._updatePerspective()}}handleDataSourceUpdate(t){this.A1E_awaitAllTilesTrigger=this.awaitAllTilesOnFirstDisplay,(t.fetchTile||t.tileSize)&&(t.fetchTile&&this.A1E_awaitAllTilesTrigger?this.C5E_oldDataSourceLayer||(this.C5E_oldDataSourceLayer=this.AEC_layer,this.C5E_oldDataSourceLayer.freeze()):this.AEC_layer.destroy(),this.B3B_cleanUpDeprecatedLayers(),this.FCE_createLayerForCurrentZoom(!0),this._emit("requestRender"))}render(t){if(this.EB8_needsRender||this.AEC_layer.needsRender||t.qualityHint===m._.FULL){if(this.DA2_checkZoomInZoomRange())this.FE2_inZoomRange||(this.AEC_layer.unfreeze(),this.AEC_layer.setVisibility(!0),this.FE2_inZoomRange=!0);else{if(!this.FE2_inZoomRange)return;this.AEC_layer.freeze(),this.AEC_layer.setVisibility(!1),this.B3B_cleanUpDeprecatedLayers(),this.FE2_inZoomRange=!1}this._updatePerspective(),this.EB8_needsRender=!1,t.qualityHint===m._.FULL&&this.C6A_roundZoom!==this.AEC_layer.zoom&&(this.A26_layerEventGroup.offAll(),Math.abs(this.AEC_layer.zoom-this.C6A_roundZoom)>3?this.AEC_layer.destroy():this.C66_deprecatedLayers.push(this.AEC_layer),this.FCE_createLayerForCurrentZoom(!0));for(const e of this.C66_deprecatedLayers)this.A18_updateLayer(e),e.reposition(t.qualityHint),e.finishTileAnimations();this.A18_updateLayer(this.AEC_layer),this.C6A_roundZoom===this.AEC_layer.zoom?this.AEC_layer.render(t):this.AEC_layer.reposition(t.qualityHint),this.FF3_sortLayers()}}A18_updateLayer(t){const e=f.B.getScale(t.zoom,this._camera.zoom);t.update(this._camera.worldCenter,this._camera.azimuth,this._camera.tilt,e,this._fov)}findObjectInPosition(){return null}findFeatureByElement(){return null}_updatePerspective(){}DA2_checkZoomInZoomRange(){return this.C6A_roundZoom>=this._tileSource.zoomRange.min&&this.C6A_roundZoom<=this._tileSource.zoomRange.max}B3B_cleanUpDeprecatedLayers(){for(const t of this.C66_deprecatedLayers)t.destroy();this.C66_deprecatedLayers=[]}FCE_createLayerForCurrentZoom(t){let e=this.C66_deprecatedLayers.find((t=>t.zoom===this.C6A_roundZoom));if(e)this.C66_deprecatedLayers.splice(this.C66_deprecatedLayers.indexOf(e),1),e.unfreeze();else{const i=(0,v.q)(this.FE3_zoomRoundingRule(this._camera.zoom),this._tileSource.zoomRange.min,this._tileSource.zoomRange.max),s=f.B.getScale(i,this._camera.zoom);e=this._makeSingleLayer(s,i,t)}this.AEC_layer=e,this.A26_layerEventGroup=this.AEC_layer.on("stateChanged",this.EB4_onForegroundTileReady).on("requestRender",(()=>this._emit("requestRender")))}_makeSingleLayer(t,e,i){return new U(this._camera.worldCenter,t,this._camera.azimuth,this._camera.tilt,this._fov,e,this._size,this._tileSource,i,this._processingQueue,this._shouldAwaitAllTiles,this._releaseAwaitAllTilesTrigger,this._getTileRevealDuration,(()=>{}),(()=>{}),(()=>{}))}FF3_sortLayers(){var t,e,i,s,o,n;const r=Math.round(this._camera.zoom),a=[this.AEC_layer,...this.C66_deprecatedLayers],h=a.reduce(((t,{zoom:e})=>Math.max(e,t)),-1/0);for(const l of a)r===l.zoom?null===(e=(t=this._props).setLayerZIndex)||void 0===e||e.call(t,l,h):r>l.zoom?null===(s=(i=this._props).setLayerZIndex)||void 0===s||s.call(i,l,l.zoom-r):null===(n=(o=this._props).setLayerZIndex)||void 0===n||n.call(o,l,h-l.zoom)}}class q extends ${constructor(t){super(Object.assign(Object.assign({},t),{setLayerZIndex:(t,e)=>{t.element.style.zIndex=String(e)}})),this._props=t}_makeSingleLayer(t,e,i){return new Q(this._props.element,this._camera.worldCenter,t,this._camera.azimuth,this._camera.tilt,this._fov,e,this._size,this._tileSource,i,this._processingQueue,this._shouldAwaitAllTiles,this._releaseAwaitAllTilesTrigger,this._getTileRevealDuration)}_updatePerspective(){this._props.element.style.perspective=`${(0,s.Os)(this._size.y,this._fov)}px`}}var J=i(47226),K=i(17421);function tt(t,e,i={minX:0,maxX:0,minY:0,maxY:0}){const s=t.minX>e.minX?t.minX:e.minX,o=t.maxX>e.maxX?e.maxX:t.maxX;if(s>o)return null;const n=t.minY>e.minY?t.minY:e.minY,r=t.maxY>e.maxY?e.maxY:t.maxY;return n>r?null:(i.minX=s,i.maxX=o,i.minY=n,i.maxY=r,i)}function et(t,e){return e.minX>=t.minX&&e.minY>=t.minY&&e.maxX<=t.maxX&&e.maxY<=t.maxY}const it={tilesLoaded:0,tilesReady:0,tilesTotal:0,borderLoaded:0,borderReady:0,borderTotal:0,graphicsReady:0,graphicsTotal:0},st="http://www.w3.org/2000/svg";function ot(t,e){const i=Math.floor((t+1)/2),s=Math.floor((e+1)/2),o=[];for(let t=i;t<=s;t++)o.push(t);return o}var nt=i(76664);function rt(t,e,i){const s=[],o={x:0,y:0},n={x:1/0,y:1/0},r={x:e,y:-e};let a=0,h=0;for(const e of t)a=e.x-n.x,h=e.y-n.y,(s.length<2||a>=i||a<=-i||h>=i||h<=-i)&&(C.PV(e,r,o),s.push({x:o.x,y:o.y}),n.x=e.x,n.y=e.y);return s}class at{constructor(t,e,i){this.A1A_strokeStamp="",this.FD4_lineSegments=[],this.C57_simplifiedLineSegments=new Map,this.EBF_colorLines=new Map,this.worldsTranslations=[],this.geometry=Object.assign({},t.geometry),this.bbox=i,ot(i.minX,i.maxX).reduce(((t,e)=>t.add(e).add(-e)),new Set).forEach((t=>this.worldsTranslations.push({x:2*t,y:0}))),this.worldsTranslations.sort(((t,e)=>t.x-e.x)),this.updateStyle(e)}get style(){return this.B3D_style}get strokeSize(){return this.C5D_strokeSize}get maxStrokeWidth(){return this.D7C_maxStrokeWidth}get strokeStamp(){return this.A1A_strokeStamp}get hasPalette(){return this.style.paletteColorStops.length>0}updateStyle(t){this.B3D_style=t,this.C5D_strokeSize="LineString"===this.geometry.type||"MultiLineString"===this.geometry.type?this.B3D_style.stroke.length:1,this.D7C_maxStrokeWidth=-1/0,this.A1A_strokeStamp="";for(let t=0;t<this.C5D_strokeSize;t++){const e=this.style.stroke[t];e.width>this.D7C_maxStrokeWidth&&(this.D7C_maxStrokeWidth=e.width),this.A1A_strokeStamp+=e.paletteColors.length>0?"c":"p"}"LineString"===this.geometry.type&&t.paletteColorStops.length>0&&(this.FD4_lineSegments=function(t,e){const i=[];let s=0;for(const o of e){const e=t.slice(s,o+1);i.push({coordinates:e,length:lt(e)}),s=o}return i}(this.geometry.coordinates,t.paletteColorStops))}getStrokeStyleForStrokeIndex(t){const{stroke:e}=this.style;return e.length-1<t&&(0,x._y)(new Error(`Can't find stroke style for stroke with index ${t}`)),this.style.stroke[this.style.stroke.length-1-t]}getSimplifiedLineSegments(t,e){if(t=Math.round(t),!this.C57_simplifiedLineSegments.has(t)){const i=f.B.getWorldPixelSize(t)/2,s=this.FD4_lineSegments.map((t=>{const s=rt(t.coordinates,i,e);return Object.assign(Object.assign({},t),{coordinates:(0,nt.p)(s,this.style.simplificationRate)})}));this.C57_simplifiedLineSegments.set(t,s)}return this.C57_simplifiedLineSegments.get(t)}getColorLine(t,e,i){const s=`${t}_${e=Math.round(e)}`;if(!this.EBF_colorLines.has(s)){const{paletteColors:o,simplifyPalette:n}=this.getStrokeStyleForStrokeIndex(t);this.EBF_colorLines.set(s,function(t,e,i,s){const o=[],n=t.length-1,r=ht/f.B.getWorldPixelSize(i);let a=[],h=0,l="",c=0,d={};for(let i=0;i<t.length;i++){const{coordinates:u,length:_}=t[i];s?a.push(...u):a=u,h+=_;const p=e[i];d[p]=void 0===d[p]?_:d[p]+_,d[p]>c&&(c=d[p],l=p);const m=o[o.length-1];s&&i!==n&&(!m||l!==m.color)&&h<r||(m&&l===m.color?m.coordinates=m.coordinates.concat(a):o.push({coordinates:a,color:l}),a=[],h=0,l="",c=0,d={})}return o}(this.getSimplifiedLineSegments(e,i),o,e,n))}return this.EBF_colorLines.get(s)}hasStructuralDifferenceWithOtherModel(t){return this.geometry.type!==t.geometry.type||this.A1A_strokeStamp!==t.strokeStamp||"MultiPolygon"===this.geometry.type&&"MultiPolygon"===t.geometry.type&&this.geometry.coordinates.length!==t.geometry.coordinates.length}}const ht=1.5;function lt(t){const e={x:0,y:0};let i=0;for(let s=1;s<t.length;s++)C.lu(t[s-1],t[s],e),i+=C.kE(e);return i}var ct=i(51888);function dt(t){for(;t.firstChild;)t.removeChild(t.firstChild)}const ut=[Object.assign({},C.jQ)];class _t{constructor(t,e,i){this.C69_recreateDomStructureOnNextRender=!1,this.D7A_clippedPointElements=[],this.FEF_renderedCenter=C.jQ,this.A15_renderedZoom=-1/0,this.EA3_renderedBBoxes=[],this.EA9_isVisible=!1,this.A13_translation={x:0,y:0};const s=`ymaps3x0--feature-${t}-${e}`;this.D9B_model=i,this.element=document.createElementNS(st,"g"),this.element.setAttribute("stroke-linejoin","round"),this.element.setAttribute("stroke-linecap","round"),this.element.setAttribute("id",s),this.elementCopy=document.createElementNS(st,"use"),this.elementCopy.setAttribute("href",`#${s}`),this.elementCopy.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",`#${s}`),this.elementCopy.setAttribute("data-feature-id",e),this.C78_featureId=e,this.D8B_fullWorldVisibleData={worldsTranslations:ut,bboxes:[i.bbox]},this.C66_createDomStructure()}get model(){return this.D9B_model}setModel(t){this.C69_recreateDomStructureOnNextRender=this.C69_recreateDomStructureOnNextRender||this.D9B_model.hasStructuralDifferenceWithOtherModel(t),this.D9B_model=t,this.C6F_teardownRenderedState(),this.D8B_fullWorldVisibleData={worldsTranslations:ut,bboxes:[t.bbox]}}render(t){const{worldsTranslations:e,bboxes:i}=t.fullWorldVisible?this.D8B_fullWorldVisibleData:this.AED_computeWorldsTranslationsAndBBoxes(t.svgBBox,t.viewportWorldsTranslations);0!==e.length?(this.C56_setVisibility(!0),this.B43_needsFullRender(i,t.zoom)?(this.B4E_fullRender(t,e,i),this.adjustStrokeWidthAndDash(t.clippingPadding)):this.A18_reposition(t.pixelCenter)):this.C56_setVisibility(!1)}adjustStrokeWidthAndDash(t,e=1){Math.min(this.model.maxStrokeWidth/e,t)===t&&(e=this.model.maxStrokeWidth/t);for(let t=0;t<this.model.strokeSize;t++){const{dash:i,width:s}=this.model.getStrokeStyleForStrokeIndex(t),o=(s/e).toFixed(3),n=(1===e?i:i.map((t=>t/e))).join(" ");if("MultiPolygon"===this.model.geometry.type||"Polygon"===this.model.geometry.type)return this.element.setAttribute("stroke-width",o),void this.element.setAttribute("stroke-dasharray",n);const r=this.element.childNodes[t];r&&(r.setAttribute("stroke-width",o),r.setAttribute("stroke-dasharray",n))}}AED_computeWorldsTranslationsAndBBoxes(t,e){const{bbox:i,worldsTranslations:s}=this.model,o={},n={worldsTranslations:[],bboxes:[]};for(const r of e.concat(s))if(o[r.x]=o[r.x]||{},!o[r.x][r.y]){o[r.x][r.y]=!0;const e=tt(t,{minX:i.minX+r.x,maxX:i.maxX+r.x,minY:i.minY+r.y,maxY:i.maxY+r.y});e&&(n.worldsTranslations.push(r),n.bboxes.push(e))}return n}B43_needsFullRender(t,e){if(this.C69_recreateDomStructureOnNextRender||0===this.EA3_renderedBBoxes.length||this.EA3_renderedBBoxes.length!==t.length||this.A15_renderedZoom!==e)return!0;for(let e=0;e<this.EA3_renderedBBoxes.length;e++)if(!et(this.EA3_renderedBBoxes[e],t[e]))return!0;return!1}A18_reposition(t){const e=C.lu(this.FEF_renderedCenter,t);this.C74_setTranslation(e.x,e.y)}B4E_fullRender(t,e,i){const s=t.fullWorldVisible||1===i.length&&(o=this.D9B_model.bbox,n=i[0],o.minX===n.minX&&o.maxX===n.maxX&&o.minY===n.minY&&o.maxY===n.maxY);var o,n;switch(this.FEF_renderedCenter=t.pixelCenter,this.A15_renderedZoom=t.zoom,this.EA3_renderedBBoxes=i,this.element.style.cursor=this.model.style.cursor,this.model.style.interactive?this.element.style.pointerEvents="":this.element.style.pointerEvents="none",this.C74_setTranslation(0,0),this.C69_recreateDomStructureOnNextRender&&(this.C69_recreateDomStructureOnNextRender=!1,this.C66_createDomStructure()),this.model.geometry.type){case"Point":if(this.model.style.element)return;this.element.setAttribute("fill","none"),this.C5A_renderIconPoint(this.model.geometry.coordinates,t,e);break;case"LineString":case"MultiLineString":if(this.element.setAttribute("fill","none"),this.model.hasPalette)this.B2C_renderLineWithPalette(e,t,s);else{const i="LineString"===this.model.geometry.type?[this.model.geometry.coordinates]:this.model.geometry.coordinates;this.FD3_renderLinesWithoutPalette(i,e,t,s)}break;case"Polygon":case"MultiPolygon":this.element.setAttribute("fill",this.model.style.fill),this.element.setAttribute("fill-opacity",String(this.model.style.fillOpacity)),this.element.setAttribute("fill-rule",this.model.style.fillRule);const{geometry:i}=this.model,o="Polygon"===i.type?[i.coordinates]:i.coordinates;this.A1C_renderPolygons(o,e,t,s);break;default:(0,x._y)(new Error(`Unexpected geometry type: ${this.model.geometry.type}`))}}B2C_renderLineWithPalette(t,e,i){let s=null;for(let o=0;o<this.model.strokeSize;o++){const n=this.element.childNodes[o],r=this.model.getStrokeStyleForStrokeIndex(o);r.paletteColors.length>0?this.A56_renderColorLineStroke(n,o,e,i,t):(null===s&&(s=this.C51_computeSplittedLinePath(e,i,t)),gt(n,s,r))}}FD3_renderLinesWithoutPalette(t,e,i,s){const o=[];for(const n of t){const t=rt(n,i.halfWorldSize,i.pointFilterBox);o.push(pt(t,i,s,e,this.model.style.simplificationRate))}const n=o.join(" ");for(let t=0;t<this.model.strokeSize;t++)gt(this.element.childNodes[t],n,this.model.getStrokeStyleForStrokeIndex(t))}A1C_renderPolygons(t,e,i,s){for(let o=0;o<t.length;o++){const n=[];for(const r of t[o]){const t=rt(r,i.halfWorldSize,i.pointFilterBox);n.push(pt(t,i,s,e,this.model.style.simplificationRate,!0))}gt(this.element.childNodes[o],n.join(" "),this.model.style.stroke[0])}}A56_renderColorLineStroke(t,e,i,s,o){const n=this.model.getColorLine(e,i.zoom,i.pointFilterBox),r=this.model.getStrokeStyleForStrokeIndex(e);dt(t);const a=document.createDocumentFragment(),h=f.B.getScale(Math.round(i.zoom),i.zoom);let l=null;n.forEach((({coordinates:t,color:e})=>{if("hidden"===e)return;const n=pt(t,i,s,o,0,!1,h),c=mt(this.C78_featureId);gt(c,n,r),c.setAttribute("stroke",e),a.insertBefore(c,l),l=c})),t.appendChild(a)}C51_computeSplittedLinePath(t,e,i){const s=this.model.getSimplifiedLineSegments(t.zoom,t.pointFilterBox),o=[];for(const{coordinates:t}of s)o.push(...t);return pt(o,t,e,i,0,!1,f.B.getScale(Math.round(t.zoom),t.zoom))}C5A_renderIconPoint(t,e,i){this.C6C_setImageElementsCount(i.length);const{scale:s,offset:o}=this.model.style.icon,n=`scale(${s}) translate(${100*o[0]}%, ${100*o[1]}%)`;for(let s=0;s<i.length;s++){const o=this.element.children[s];o.getAttribute("transform")!==n&&(o.style.transform=n),o.getAttribute("href")!==this.model.style.icon.url&&o.setAttribute("href",this.model.style.icon.url);const r=C.IH(t,i[s]),a=f.B.worldToRelativePixels(r,e.zoom);C.lu(a,e.pixelCenter,a),o.setAttribute("x",a.x.toString()),o.setAttribute("y",a.y.toString())}}C6C_setImageElementsCount(t){for(;this.element.children.length<t;){const t=document.createElementNS(st,"image");t.style.transformBox="fill-box",t.setAttribute("data-feature-id",this.C78_featureId),this.element.appendChild(t)}for(;this.element.children.length>t&&this.element.lastChild;)this.element.removeChild(this.element.lastChild)}B28_setPointVisibility(t){t?this.C77_unclipPoint():this.EA3_clipPoint()}EA3_clipPoint(){this.D7A_clippedPointElements.length=0;for(let t=0;t<this.element.children.length;t++){const e=this.element.children[t];this.D7A_clippedPointElements.push(e),this.element.removeChild(e)}}C77_unclipPoint(){for(const t of this.D7A_clippedPointElements)this.element.appendChild(t);this.D7A_clippedPointElements.length=0}C66_createDomStructure(){if(dt(this.element),"Point"!==this.model.geometry.type)if("MultiPolygon"!==this.model.geometry.type)for(let t=0;t<this.model.strokeSize;t++){const e=this.model.getStrokeStyleForStrokeIndex(t).paletteColors.length>0&&"LineString"===this.model.geometry.type?document.createElementNS(st,"g"):mt(this.C78_featureId);this.element.appendChild(e)}else for(let t=0;t<this.model.geometry.coordinates.length;t++){const t=mt(this.C78_featureId);this.element.appendChild(t)}}C56_setVisibility(t){this.EA9_isVisible!==t&&(this.element.style.display=t?"":"none","Point"===this.D9B_model.geometry.type&&this.B28_setPointVisibility(t),this.EA9_isVisible=t)}C74_setTranslation(t,e){this.A13_translation.x===t&&this.A13_translation.y===e||(this.element.setAttribute("transform",`translate(${t} ${e})`),this.A13_translation={x:t,y:e})}C6F_teardownRenderedState(){this.A15_renderedZoom=-1/0,this.EA3_renderedBBoxes=[],this.FEF_renderedCenter=C.jQ}}function pt(t,e,i,s,o=0,n=!1,r=1){const a=[],h={x:0,y:0};for(const l of s){const s=f.B.worldToRelativePixels(l,e.zoom);let c=t;if(!i){const i=C.lu(e.pixelCenter,s),o=e.clippingWindow.map((t=>{const e=C.IH(t,i);return 1===r?e:C.ZO(e,r,e)}));c=(0,ct._)(t,o,n)}if(c.length>0){const t=0===o?c:(0,nt.p)(c,o),i=C.lu(s,e.pixelCenter);let l="M"+t.map((t=>(1!==r&&(t=C.Sm(t,r,h)),C.IH(t,i,h),`${h.x},${h.y}`))).join(" L");n&&(l+=" Z"),a.push(l)}}return a.join(" ")}function mt(t){const e=document.createElementNS(st,"path");return e.setAttribute("data-feature-id",t),e}function gt(t,e,i){t.setAttribute("d",e);const{opacity:s,color:o}=i;t.setAttribute("stroke-opacity",String(s)),t.setAttribute("stroke",o)}var yt=i(98648);const Et={x:50,y:50},ft=18*y.Z;let Ct=0;class Dt extends((0,_.GA)().with()){constructor({element:t,size:e,camera:i,worldOptions:s,dataSource:o,tiltRange:n}){super(),this.FE4_svg=document.createElementNS(st,"svg"),this.EBE_zeroWorld=document.createElementNS(st,"g"),this.EB6_groups=new Map,this.B49_features=new Map,this.FE4_nodesToRemove=new Set,this.D83_renderedWorldCopies=new Set,this.B3C_multiWorldsSource=document.createDocumentFragment(),this.FE4_layerId=String(Ct++),this.EA4_elementChildrenKey=Symbol("childrenSet"),this.EB8_needsRender=!0,this.A3F_fullWorldRendered=!1,this.FF3_lastTimeStrokeAdjusted=0,this.D95_willChangeFlag=!1,this.C5B_size={x:1/0,y:1/0},this.FEC_fov=X.d$,this.EA6_isSvgFixedAtAzimuth=!1,this.C6C_element=t,this.EA2_camera=i,this.EAE_tiltRange=n,this.B29__resize(e),this.C53_worldOptions=s,ymaps3.strictMode&&(0,A.h)(o instanceof yt.m5,"Data source should be instance of FeaturesDataSource"),this.EBC_dataSource=o,this.A15_renderedZoom=i.zoom,this.A1D_zoomOfAdjustedStoke=i.zoom,this.FEF_renderedCenter=i.worldCenter;const r=document.createElementNS(st,"g");this.B3C_multiWorldsSource.appendChild(r),this.EB6_groups.set(yt.oR,{id:yt.oR,element:this.EBE_zeroWorld,elementCopy:r}),this.FE4_svg.appendChild(this.EBE_zeroWorld),this.FE4_svg.setAttributeNS("xmlns","xlink","http://www.w3.org/1999/xlink"),this.FE4_svg.ondragstart=()=>!1,this.C6C_element.appendChild(this.FE4_svg),this.EC7_dataSourcesSubscriptions=o.group().on("groupAdded",(t=>this.B29_addGroup(t))).on("groupRemoved",(t=>this.EB7_removeGroup(t))).on("featureAdded",(t=>this.A3B_addFeatureById(t))).on("featureRemoved",(t=>this.B3D_removeFeatureById(t))).on("featureUpdated",(t=>this.EAF_updateFeatureById(t))).on("featureMovedToGroup",(()=>this.EB8_needsRender=!0)),this.EBC_dataSource.groups.forEach((({id:t})=>{t!==yt.oR&&this.B29_addGroup(t)})),this.EBC_dataSource.features.forEach((({id:t})=>this.A3B_addFeatureById(t)))}destroy(){this.B49_features.clear(),this.EC7_dataSourcesSubscriptions.offAll(),this.EB8_needsRender=!0}get state(){return it}update(t,e){return this.D91__update(t,e)}resize(t){return this.B29__resize(t)}B29__resize(t){(0,C.wy)(this.C5B_size,t)||(this.C5B_size=t,this.FF1_halfSize=C.ZO(this.C5B_size,2),this.EC6_setSvgSizeValues(),this.B2D_updatePerspective(),this.EB8_needsRender=!0)}D91__update(t,e){this.FEC_fov===e&&this.EA2_camera===t||(this.EA2_camera=t,this.FEC_fov=e,this.EB8_needsRender=!0)}render({qualityHint:t,camera:e,fov:i}){if(this.D91__update(e,i),this.C6A_cleanupNodesToRemove(),this.B2D_updatePerspective(),0===this.B49_features.size)return void(this.C6C_element.style.display="none");this.C6C_element.style.setProperty("display",null);const s=this.B4D_getVisibleWorlds(),o=f.B.getScale(this.A15_renderedZoom,this.EA2_camera.zoom);t===m._.QUICK?(this.FE2_setWillChange(!0),this.C64_positionZeroWorld(o)):this.B43_needsFullRender(t)?(this.B4E_fullRender(s),this.C51_renderWorldCopies(this.EA2_camera.zoom,!0)):(this.C5A_adjustStrokeWidthAndDash(o),this.C64_positionZeroWorld(o),this.C51_renderWorldCopies(this.A15_renderedZoom))}findObjectInPosition(t){const e=(0,s.Rv)(t,Object.assign(Object.assign({},this.EA2_camera),{size:this.C5B_size,container:this.C6C_element,fov:this.FEC_fov}));if(!isFinite(e.x)||!isFinite(e.y))return null;const i=document.elementFromPoint(e.x,e.y);if(!i)return null;const o=i.getAttribute("data-feature-id");return null!==o&&this.EBC_dataSource.hasFeatureWithId(o)&&this.C6C_element.contains(i)?{type:"feature",feature:this.EBC_dataSource.getFeatureById(o)}:null}findFeatureByElement(){return null}B29_addGroup(t){ymaps3.strictMode&&(0,A.h)(!this.EB6_groups.has(t),`Layer already have group with id "${t}"`);const e=document.createElementNS(st,"g");this.EB6_groups.set(t,{id:t,element:e,elementCopy:e.cloneNode()}),this.EB8_needsRender=!0}EB7_removeGroup({id:t,removed:e}){ymaps3.strictMode&&(0,A.h)(this.EB6_groups.has(t),`Layer does not have group with id "${t}"`),this.FE4_nodesToRemove.add(this.EB6_groups.get(t));for(const t of e)"feature"===t.type?this.B3D_removeFeatureById(t.id):(ymaps3.strictMode&&(0,A.h)(this.EB6_groups.has(t.id),`Layer does not have group with id "${t.id}"`),this.EB6_groups.delete(t.id));this.EB8_needsRender=!0}A3B_addFeatureById(t){const e=this.EBC_dataSource.getFeatureById(t);if((0,yt.uT)(e))return;const{feature:i,style:s,bbox:o}=e,n=new at(i,s,o),r=new _t(this.FE4_layerId,i.id,n),a={id:i.id,element:r.element,elementCopy:r.elementCopy,renderer:r};this.B49_features.set(i.id,a),this.EB8_needsRender=!0}B3D_removeFeatureById(t){this.B49_features.has(t)&&(this.FE4_nodesToRemove.add(this.B49_features.get(t)),this.B49_features.delete(t),this.EB8_needsRender=!0)}EAF_updateFeatureById(t){if(this.B49_features.has(t)){const e=this.B49_features.get(t),{feature:i,style:s,bbox:o}=this.EBC_dataSource.features.get(t);e.renderer.setModel(new at(i,s,o)),this.EB8_needsRender=!0}}B43_needsFullRender(t){if(t===m._.QUICK)return!1;const e=this.C64_computeHalfSvgWorldSize(),i={minX:this.FEF_renderedCenter.x-e.x,maxX:this.FEF_renderedCenter.x+e.x,minY:this.FEF_renderedCenter.y-e.y,maxY:this.FEF_renderedCenter.y+e.y},s=this.EC7_computeHalfViewportSize(),o=!et(i,{minX:this.EA2_camera.worldCenter.x-s.x,maxX:this.EA2_camera.worldCenter.x+s.x,minY:this.EA2_camera.worldCenter.y-s.y,maxY:this.EA2_camera.worldCenter.y+s.y}),n=Math.abs(this.A15_renderedZoom-this.EA2_camera.zoom);return o||n>=2||t===m._.FULL&&(this.EB8_needsRender||this.EA2_camera.zoom!==this.A15_renderedZoom)}B4E_fullRender(t){ymaps3.strictMode&&(0,A.h)(!this.C53_worldOptions.cycledY,"Y-cycled projections are not supported"),this.EC6_setSvgSizeValues(),this.C53_setSvgAttributes();const e=this.B4F_getRenderVariables(t);this.FE2_setWillChange(!1),this.EB8_needsRender=!1,this.A15_renderedZoom=this.EA2_camera.zoom,this.FEF_renderedCenter=this.EA2_camera.worldCenter,this.A3F_fullWorldRendered=e.fullWorldVisible,this.A1D_zoomOfAdjustedStoke=this.EA2_camera.zoom,this.FF3_lastTimeStrokeAdjusted=performance.now(),this.C64_positionZeroWorld(),this.EBC_dataSource.groups.forEach((t=>{ymaps3.strictMode&&(0,A.h)(this.EB6_groups.has(t.id),`Layer does not have group with id "${t.id}"`);const{element:i,elementCopy:s}=this.EB6_groups.get(t.id);i.setAttribute("opacity",String(t.style.opacity)),s.setAttribute("opacity",String(t.style.opacity)),this.EBA_renderChildren(t.children,i,s,e)}))}B2D_updatePerspective(){const t=(0,s.Os)(this.C5B_size.y,this.FEC_fov);this.B2A_perspective!==t&&(this.B2A_perspective=t,this.C6C_element.style.perspective=`${t}px`)}EBA_renderChildren(t,e,i,s){let o=null,n=null;const r=(h=(t,e)=>e.style.zIndex-t.style.zIndex,(a=t).map(((t,e)=>e)).sort(((t,e)=>{const i=a[t],s=a[e],o=h(i,s);return 0!==o?o:t-e})).map((t=>a[t])));var a,h;for(const t of r){let r,a;switch(t.type){case"group":ymaps3.strictMode&&(0,A.h)(this.EB6_groups.has(t.id),`Layer does not have group with id "${t.id}"`);const e=this.EB6_groups.get(t.id);r=e.element,a=e.elementCopy;break;case"feature":if((0,yt.uT)(t))continue;ymaps3.strictMode&&(0,A.h)(this.B49_features.has(t.id),`Layer does not have feature with id "${t.id}"`);const i=this.B49_features.get(t.id);i.renderer.render(s),r=i.element,a=i.elementCopy}this.A53_insertElementBefore(e,r,o),this.A53_insertElementBefore(i,a,n),o=r,n=a}}DA0_getCachedChildren(t){var e,i;return(e=t)[i=this.EA4_elementChildrenKey]||(e[i]=new Set)}A53_insertElementBefore(t,e,i){const s=this.DA0_getCachedChildren(t);s.has(e)||(t.insertBefore(e,i),s.add(e))}FEB_removeElement(t){const e=t.parentNode;e&&(e.removeChild(t),this.DA0_getCachedChildren(e).delete(t))}C5A_adjustStrokeWidthAndDash(t){const e=performance.now(),i=e-this.FF3_lastTimeStrokeAdjusted;Math.abs(this.A1D_zoomOfAdjustedStoke-this.EA2_camera.zoom)>=.5&&i>250?(this.FE2_setWillChange(!1),this.A1D_zoomOfAdjustedStoke=this.EA2_camera.zoom,this.FF3_lastTimeStrokeAdjusted=e,this.B49_features.forEach((({renderer:e})=>{e.adjustStrokeWidthAndDash(50,t)}))):this.FE2_setWillChange(!0)}C6A_cleanupNodesToRemove(){0!==this.FE4_nodesToRemove.size&&(this.FE4_nodesToRemove.forEach((t=>{this.FEB_removeElement(t.element),this.FEB_removeElement(t.elementCopy)})),this.FE4_nodesToRemove.clear())}C6B_getSvgPixelBBox(){const t=f.B.worldToPixels(this.EA2_camera.worldCenter,this.EA2_camera.zoom);return{minX:t.x-this.D8D_halfSvgSize.x,maxX:t.x+this.D8D_halfSvgSize.x,minY:t.y-this.D8D_halfSvgSize.y,maxY:t.y+this.D8D_halfSvgSize.y}}C56_getClippingWindow(t){const{minX:e,maxX:i,minY:s,maxY:o}=function(t,e,i={minX:0,maxX:0,minY:0,maxY:0}){return i.minX=t.minX-e.x,i.maxX=t.maxX+e.x,i.minY=t.minY-e.y,i.maxY=t.maxY+e.y,i}(t,Et),n=f.B.worldToPixels(this.EA2_camera.worldCenter,this.EA2_camera.zoom),r=C.lu({x:e,y:s},n);return[C.lu({x:e,y:o},n),r,C.lu({x:i,y:s},n),C.lu({x:i,y:o},n)]}C64_positionZeroWorld(t=1){ymaps3.strictMode&&(0,A.h)(!this.C53_worldOptions.cycledY,"Y-cycled projections are not supported");const e=this.C53_worldOptions.cycledX?f.B.moveCloseToCenter(this.FEF_renderedCenter,this.EA2_camera.worldCenter):this.FEF_renderedCenter,{zoom:i,azimuth:s,tilt:o}=this.EA2_camera,n=f.B.worldToRelativePixels(e,i),r=f.B.worldToRelativePixels(this.EA2_camera.worldCenter,i),a=C.lu(n,r),h=C.lu(this.FF1_halfSize,this.D8D_halfSvgSize),l=`translate3d(${a.x}px, ${a.y}px, 0px)`,c=[`${`translate3d(${h.x}px, ${h.y}px, 0px)`}`,`rotateX(${o}rad)`,`rotateZ(${s}rad)`,`${l}`,`scale(${t})`];this.FE4_svg.style.setProperty("transform",c.join(" "))}D85_clearWorldCopies(){const t=this.FE4_svg.querySelectorAll("g[data-world-copy]");for(let e=0;e<t.length;e++)this.FE4_svg.removeChild(t[e]);this.D83_renderedWorldCopies.clear()}C51_renderWorldCopies(t,e=!1){this.C53_worldOptions.cycledX&&(e&&this.D85_clearWorldCopies(),this.A3F_fullWorldRendered&&this.EBA_makeMissingWorldCopies(t))}EBA_makeMissingWorldCopies(t){ymaps3.strictMode&&(0,A.h)(!this.C53_worldOptions.cycledY,"Y-cycled projections are not supported");const e=f.B.getWorldPixelSize(t);for(const t of[-1,1,...this.B4D_getVisibleWorlds()])if(0!==t&&!this.D83_renderedWorldCopies.has(t)){const i=document.createElementNS(st,"g");i.setAttribute("data-world-copy",String(t));const s=this.D8D_halfSvgSize.x+e*t;i.setAttribute("transform",`translate(${s}, ${this.D8D_halfSvgSize.y})`),i.appendChild(this.B3C_multiWorldsSource.cloneNode(!0)),this.FE4_svg.appendChild(i),this.D83_renderedWorldCopies.add(t)}}B4D_getVisibleWorlds(){let t=this.EC7_computeHalfViewportSize().x+.11111111111111112;const{worldCenter:e}=this.EA2_camera;return this.EBC_dataSource.adhocEnabledExtraWorldCopies&&(t+=2),ot(e.x-t,e.x+t)}B4F_getRenderVariables(t){const e=f.B.getWorldPixelSize(this.EA2_camera.zoom),i=this.C6B_getSvgPixelBBox(),s=function({minX:t,maxX:e,minY:i,maxY:s},o){const n=f.B.pixelsToWorld({x:t,y:s},o),r=f.B.pixelsToWorld({x:e,y:i},o);return{minX:n.x,maxX:r.x,minY:n.y,maxY:r.y}}(i,this.EA2_camera.zoom),o=s.minX<=-1&&s.maxX>=1;return{pixelCenter:f.B.worldToRelativePixels(this.EA2_camera.worldCenter,this.EA2_camera.zoom),zoom:this.EA2_camera.zoom,worldSize:e,halfWorldSize:e/2,clippingWindow:this.C56_getClippingWindow(i),clippingPadding:50,pointFilterBox:1/e,fullWorldVisible:o,viewportWorldsTranslations:t.map((t=>({x:2*t,y:0}))),svgBBox:s}}FE2_setWillChange(t){this.D95_willChangeFlag!==t&&(this.D95_willChangeFlag=t,this.FE4_svg.style.setProperty("will-change",t?"transform":""))}EC7_computeHalfViewportSize(){const t=f.B.convertPixelSizeToWorldSize(this.FF1_halfSize,this.EA2_camera.zoom);return C.G7(t,Math.abs,t),t}C64_computeHalfSvgWorldSize(){const t=f.B.convertPixelSizeToWorldSize(this.D8D_halfSvgSize,this.A15_renderedZoom);if(C.G7(t,Math.abs,t),this.EA2_camera.tilt){const e=Math.cos(this.EAE_tiltRange.max),i={x:this.EA2_camera.azimuth?e:1,y:e};C.PV(t,i,t)}if(this.EA2_camera.azimuth){const e=(0,v.d)(-ft,0,2*Math.PI)<this.EA2_camera.azimuth||this.EA2_camera.azimuth<ft,i=this.EA6_isSvgFixedAtAzimuth||e?.65:.45;C.Sm(t,i,t)}return t}EC6_setSvgSizeValues(){let t=C.Sm(this.C5B_size,2);if(this.EA2_camera.tilt){const e={x:1,y:1/Math.cos(this.EAE_tiltRange.max)};C.PV(t,e,t)}if(this.EA2_camera.azimuth){const e=C.kE(t);t={x:e,y:e},this.EA6_isSvgFixedAtAzimuth=!0}else this.EA6_isSvgFixedAtAzimuth=!1;this.D9E_svgSize=t,this.D8D_halfSvgSize=C.ZO(t,2)}C53_setSvgAttributes(){this.FE4_svg.setAttribute("width",String(this.D9E_svgSize.x)),this.FE4_svg.setAttribute("height",String(this.D9E_svgSize.y)),this.FE4_svg.setAttribute("viewBox",`0 0 ${this.D9E_svgSize.x} ${this.D9E_svgSize.y}`),this.EBE_zeroWorld.setAttribute("transform",`translate(${this.D8D_halfSvgSize.x}, ${this.D8D_halfSvgSize.y})`)}}var Mt=i(91249),vt=i(50218);class At extends((0,_.GA)().with()){constructor({element:t,size:e,camera:i,worldOptions:s,projection:o,dataSource:n}){super(),this.FEC_fov=X.d$,this.C6B_fullRenderedZoom=-1/0,this.B49_features=new Map,this.B3E_featureToWrapper=new Map,this.EA4_elementToFeature=new WeakMap,this.C6C_element=t,this.C5B_size=e,this.EA2_camera=i,this.EB8_needsRender=!0,ymaps3.strictMode&&(0,A.h)(n instanceof yt.m5,"Data source should be instance of FeaturesDataSource"),this.EBC_dataSource=n,this.projection=o,this.worldOptions=s,this.B2F_dataSourceEventGroup=this.EBC_dataSource.group().on("featureAdded",(t=>this.A3B_addFeatureById(t))).on("featureRemoved",(t=>this.B3D_removeFeatureById(t))).on("featureUpdated",(t=>this.EAF_updateFeatureById(t))),this.EBC_dataSource.forEachFeatureElement((t=>{this.A3B_addFeatureById(t.id)}))}get state(){return it}destroy(){this.EBC_dataSource.forEachFeatureElement((t=>this.B3D_removeFeatureById(t.id))),this.B2F_dataSourceEventGroup.offAll()}update(t,e){this.FEC_fov===e&&this.EA2_camera===t||(this.EB8_needsRender=!0,this.EA2_camera=t,this.FEC_fov=e)}resize(t){(0,C.wy)(this.C5B_size,t)||(this.EB8_needsRender=!0,this.C5B_size=t)}render({qualityHint:t,camera:e,fov:i}){this.update(e,i),this.EB8_needsRender&&(t>=m._.FULL&&(this.C6B_fullRenderedZoom=this.EA2_camera.zoom),this.EB8_needsRender=t<m._.FULL,this.C5F__repositionAll(t>=m._.FULL||this.C6B_fullRenderedZoom===this.EA2_camera.zoom))}findFeatureByElement(t){let e=t;for(;e&&e!==this.C6C_element;){const t=this.EA4_elementToFeature.get(e);if(t)return{type:"feature",feature:t};e=e.parentElement}return null}findObjectInPosition(t){const e=(0,s.Rv)(t,Object.assign(Object.assign({},this.EA2_camera),{size:this.C5B_size,container:this.C6C_element,fov:this.FEC_fov}));if(!isFinite(e.x)||!isFinite(e.y))return null;const i=document.elementFromPoint(e.x,e.y);return i&&this.C6C_element.contains(i)?this.findFeatureByElement(i):null}A3B_addFeatureById(t){const e=this.EBC_dataSource.getFeatureById(t);if(ymaps3.strictMode&&(0,A.h)(null!=e,`Feature ${t} not found`),!(0,yt.uT)(e))return;this.EA4_elementToFeature.set(e.style.element,e),this.B49_features.set(t,e);const i=At.FEDwrapElement(e.style.element);this.B3E_featureToWrapper.set(t,i),this.FE3__repositionFeature(e),this.A8E__safeAddElement(i),this.EB8_needsRender=!0}B3D_removeFeatureById(t){const e=this.B49_features.get(t);if(!e)return;this.EA4_elementToFeature.delete(e.style.element);const i=this.B3E_featureToWrapper.get(t);ymaps3.strictMode&&(0,A.h)(null!=i,`Wrapper for feature ${t} not found`),this.D8C__safeRemoveElement(i),e.style.element.isConnected&&i.removeChild(e.style.element),this.EB8_needsRender=!0,this.B49_features.delete(t)}static FEDwrapElement(t){const e=(0,W.E)("ymaps3x0--marker");return e.appendChild(t),e}EAF_updateFeatureById(t){const e=this.EBC_dataSource.getFeatureById(t);ymaps3.strictMode&&(0,A.h)(null!=e,"Feature ${featureId} not found"),(0,yt.uT)(e)&&(this.B49_features.set(t,e),this.FE3__repositionFeature(e,!0))}C5F__repositionAll(t=!1){this.C6C_element.style.transformOrigin=`${this.C5B_size.x/2}px ${this.C5B_size.y/2}px`,this.EBC_dataSource.forEachFeatureElement((e=>this.FE3__repositionFeature(e,t)))}FE3__repositionFeature(t,e=!1){const i=this.A10__computeMarkerScreenCoordinates(t.feature.geometry.coordinates,!t.feature.disableRoundCoordinates&&e),{x:s,y:o}=i,n=this.B3E_featureToWrapper.get(t.id);ymaps3.strictMode&&(0,A.h)(null!=n,`Wrapper for feature ${t.id} not found`),this.B4B__shouldBeVisible(t)?this.A8E__safeAddElement(n):this.D8C__safeRemoveElement(n),n.style.transform=`translate(${s.toFixed(10)}px, ${o.toFixed(10)}px)`,n.style.zIndex=String(t.style.zIndex)}A10__computeMarkerScreenCoordinates(t,e){ymaps3.strictMode&&(0,A.h)(!this.worldOptions.cycledY,"Y-cycled projections are not supported");const{zoom:i,tilt:o,azimuth:n,worldCenter:r}=this.EA2_camera,a=this.C5B_size,h=e&&0===o?f.B.computePixelPerfectWorldCoordinates(r,i,(0,R.x)(),1):r,l=e?f.B.computePixelPerfectWorldCoordinates(t,i,(0,R.x)(),1):t,c=this.worldOptions.cycledX?f.B.moveCloseToCenter(l,h):l;return c.y=(0,v.q)(c.y,-1,1),(0,s.k6)(c,{azimuth:n,tilt:o,worldCenter:h,zoom:i,size:a,fov:this.FEC_fov})}B4B__shouldBeVisible(t){const{hideOutsideViewport:e,geometry:i}=t.feature;if(!e)return!0;const s=!0===e?X.rK:e.extent,{worldCenter:o,zoom:n}=this.EA2_camera,r=s?f.B.convertPixelSizeToWorldSize({x:s,y:s},n):{x:0,y:0},a=f.B.convertPixelSizeToWorldSize(this.C5B_size,n),h=o.x-Math.abs(a.x)/2-Math.abs(r.x),l=o.y-Math.abs(a.y)/2-Math.abs(r.y),c=o.x+Math.abs(a.x)/2+Math.abs(r.x),d=o.y+Math.abs(a.y)/2+Math.abs(r.x),{x:u,y:_}=i.coordinates;return!(u<h||u>c||_<l||_>d)}D8C__safeRemoveElement(t){t.isConnected&&t.parentElement===this.C6C_element&&this.C6C_element.removeChild(t)}A8E__safeAddElement(t){t.isConnected||this.C6C_element.appendChild(t)}}var xt=i(65005);const St=new WeakMap,bt=new Set([J.K,q,$,At,Dt]);b.raster=t=>"markers"===t.type?At:"features"===t.type||"geojson"===t.source?Dt:"__virtual-tile-iml-do-not-use-MAPSAPI-17151"===t.type?$:q;class wt extends((0,_.GA)().with()){constructor(t,e,i,s,o,n,r,a,h){super(),this.A1B_layerImplementationsById=new Map,this.D92_dataSourceSubscriptions=[],this.FEC_fov=0,this.B2F_dataSources={},this.C6C_processingQueue=new I.$7(I.fv),this.element=(0,W.E)(),this.A1F_layerElementMap=new WeakMap,this.FF1_createLayerImplementation=t=>{const e=this.B2F_dataSources[t.source];if(e instanceof Mt.N)throw new Error("Tile3dDataSource is not supported by raster engine");const i=t.implementation({source:this.B50_getDataSourceType(e),type:t.type,effectiveMode:"raster"}),s=this.C62__createLayerElement(e,t.type),o={element:s,processingQueue:this.C6C_processingQueue,requestRender:this.FDB_requestRenderLoopUpdate,animateFirstScreen:this.animateFirstScreen,size:this.C5B_size,camera:this.EA2_camera,projection:this.EA3_projection,worldOptions:this.C53_worldOptions,zoomRoundingRule:this.FE3_zoomRoundingRule,dataSource:e,options:t.options,tiltRange:this.EAE_tiltRange},n=bt.has(i)?new i(o):new xt.K(i,o);if(this.A1F_layerElementMap.set(n,s),!(0,vt.il)(n))return Object.assign(Object.assign({},t),{layer:n});if(e instanceof F.Nt)return this.EC7_createTileLayerImplementation(t,n,e);const r=n.group().on("requestRender",this.FDB_requestRenderLoopUpdate);return Object.assign(Object.assign({},t),{layer:n,eventGroup:r})},this.C57_destroyLayerImplementation=t=>{var e;this.A25_removeLayerElementFromDom(t.layer),t.layer.destroy(),null===(e=t.eventGroup)||void 0===e||e.offAll(),this.EB1_resetTileHotspotsLayer(t,null),t.tileSourceEventGroup&&t.tileSourceEventGroup.offAll()},this.FDB_requestRenderLoopUpdate=()=>this.renderLoop.update(),this.A23_emitHotspotsChanged=()=>this._emit("hotspotsChanged"),this.C5E_onLayerStateChange=()=>{let t=!0,e=!1,i=!0,s=!1;this.A1B_layerImplementationsById.forEach((({layer:o})=>{var n,r,a,h;const l=St.get(o),c=l.loaded;l.loaded=(null===(n=o.state)||void 0===n?void 0:n.tilesLoaded)===(null===(r=o.state)||void 0===r?void 0:r.tilesTotal),t=t&&l.loaded,!c&&l.loaded&&(e=!0);const d=l.ready;l.ready=(null===(a=o.state)||void 0===a?void 0:a.tilesReady)===(null===(h=o.state)||void 0===h?void 0:h.tilesTotal),i=i&&l.ready,!d&&l.ready&&(s=!0)})),this._emit("stateChanged"),t&&e&&this._emit("tilesLoaded"),i&&s&&this._emit("tilesReady")},this.C5B_size=t,this.EA2_camera=e,this.C53_worldOptions=s,this.EA3_projection=o,this.renderLoop=i,this.FE3_zoomRoundingRule=r,this.EAE_tiltRange=h,this.animateFirstScreen=a,this.D9E_layers=[],this.D9F_renderLoopSubscriptions=this.renderLoop.on("render",this.B3D_render.bind(this)),this.setDataSources(n)}setDataSources(t){this.B51_destroyDataSourceSubscriptions(),this.B2F_dataSources=Object.assign({},t);for(const t of Object.keys(this.B2F_dataSources))this.D92_dataSourceSubscriptions.push(this.B2F_dataSources[t].on("changed",this.FDB_requestRenderLoopUpdate))}setLayers(t){var e;const i=[];this.A1B_layerImplementationsById.forEach(((t,e)=>i.push(e)));const s=new Map;for(const i of t)if(i.implementation({source:i.source,type:i.type,effectiveMode:"raster"})){const t=this.B2F_dataSources[i.source];(t instanceof F.Nt&&(null===(e=t.rasterSourceDescription)||void 0===e?void 0:e.type)===i.type||t instanceof yt.m5||"custom"===i.type||"__virtual-tile-iml-do-not-use-MAPSAPI-17151"===i.type)&&s.set(i.id,i)}const o=(0,N.B)(this.A1B_layerImplementationsById,s,this.FF1_createLayerImplementation,this.C57_destroyLayerImplementation,(()=>{this.D83_applyLayersOptions()}),((t,e)=>t.source===e.source&&t.type===e.type));this.A1B_layerImplementationsById=o.result,this.D9D_flattenLayers(),this.A1B_layerImplementationsById.forEach((({layer:t})=>{var e,i,s,o;St.has(t)||St.set(t,{ready:(null===(e=t.state)||void 0===e?void 0:e.tilesReady)===(null===(i=t.state)||void 0===i?void 0:i.tilesTotal),loaded:(null===(s=t.state)||void 0===s?void 0:s.tilesLoaded)===(null===(o=t.state)||void 0===o?void 0:o.tilesTotal)})})),this.D83_applyLayersOptions(),this.A1C_addLayerElementsToDom(),0===o.created.length&&0===o.removed.length&&(0,K.R)(i,t.map((t=>t.id)))||(this._emit("stateChanged"),this.renderLoop.update())}getIndoorPlans(){return null}getVisibleObjects(){return null}getTile3dState(){return null}getLayerReadyState(t,e){const i=this.A1B_layerImplementationsById.get(t);if(i){if(e){const{layer:t}=i;switch(!0){case"__virtual-tile-iml-do-not-use-MAPSAPI-17151"===e&&!(t instanceof $):case"tile"===e&&!(t instanceof q):case"markers"===e&&!(t instanceof At):case"features"===e&&!(t instanceof Dt):return}}return i.layer.state}}destroy(){this.setLayers([]),this.B51_destroyDataSourceSubscriptions(),this.D9F_renderLoopSubscriptions.offAll(),this.A17_removeLayerElementsFromDom()}update(t,e){this.EA2_camera=t,this.FEC_fov=e,this.D9E_layers.forEach((i=>{var s,o;return null===(o=(s=i.layer).update)||void 0===o?void 0:o.call(s,t,e)})),this.FDB_requestRenderLoopUpdate()}resize(t){this.C5B_size=t,this.D9E_layers.forEach((e=>{var i,s;return null===(s=(i=e.layer).resize)||void 0===s?void 0:s.call(i,t)})),this.FDB_requestRenderLoopUpdate()}findObjectInPosition(t){var e;for(let i=this.D9E_layers.length-1;i>=0;i--){const{layer:s,implementation:{id:o,source:n}}=this.D9E_layers[i],r=null===(e=s.findObjectInPosition)||void 0===e?void 0:e.call(s,t);if(r)return Object.assign({layer:o,source:n},r)}return null}findObjectInPositionEx(t){var e;const i={layers:[]};for(let s=this.D9E_layers.length-1;s>=0;s--){const{layer:o,implementation:{id:n,source:r}}=this.D9E_layers[s],a=null===(e=o.findObjectInPosition)||void 0===e?void 0:e.call(o,t);if(i.layers.push({layer:n,object:a&&Object.assign({layer:n,source:r},a)}),a)break}return i}findFeatureByElement(t){var e;for(let i=this.D9E_layers.length-1;i>=0;i--){const{layer:s,implementation:{id:o,source:n}}=this.D9E_layers[i],r=null===(e=s.findFeatureByElement)||void 0===e?void 0:e.call(s,t);if(r)return Object.assign({layer:o,source:n},r)}return null}D9D_flattenLayers(){this.D9E_layers=[],this.A1B_layerImplementationsById.forEach((t=>{this.D9E_layers.push({layer:t.layer,implementation:t}),t.hotspots&&this.D9E_layers.push({layer:t.hotspots.layer,implementation:t})}))}preloadHotspotsInPoint(t){this.A1B_layerImplementationsById.forEach((({hotspots:e})=>{e&&e.layer.preloadHotspotsInPoint(t)}))}preloadHotspotsForViewport(){this.A1B_layerImplementationsById.forEach((({hotspots:t})=>{t&&t.layer.preloadHotspotsForViewport()}))}setObjectFilters(t){}setInvisibleCollidingPrimitives(t){}setObjectHighlight(t){}setTileContentClippingGeometry(t){}EC7_createTileLayerImplementation(t,e,i){const s=e.group().on("stateChanged",this.C5E_onLayerStateChange).on("requestRender",this.FDB_requestRenderLoopUpdate),o=i.group(),n=Object.assign(Object.assign({},t),{layer:e,eventGroup:s,tileSourceEventGroup:o});return o.on("sourceChanged",(()=>{this.EB1_resetTileHotspotsLayer(n,i.getHotspotTileDataSource())})),this.EB1_resetTileHotspotsLayer(n,i.getHotspotTileDataSource()),n}EB1_resetTileHotspotsLayer(t,e){if(!(!e&&!t.hotspots||e&&t.hotspots&&(0,F.PP)(t.hotspots.source,e))){if(t.hotspots&&(t.hotspots.eventGroup.offAll(),t.hotspots.layer.destroy(),t.hotspots=void 0),e){const i=new J.K({element:this.C62__createLayerElement(e,"hotspot"),size:this.C5B_size,camera:this.EA2_camera,dataSource:e,processingQueue:this.C6C_processingQueue,worldOptions:this.C53_worldOptions,zoomRoundingRule:this.FE3_zoomRoundingRule,tiltRange:this.EAE_tiltRange}),s=i.on("hotspotsChanged",this.A23_emitHotspotsChanged).on("requestRender",this.FDB_requestRenderLoopUpdate);t.hotspots={layer:i,eventGroup:s,source:e}}this.D9D_flattenLayers()}}B3D_render(t){const e=this;e.C6C_processingQueue.pause();const i=Object.assign({camera:this.EA2_camera,size:this.C5B_size,fov:this.FEC_fov,get worlds(){const{C5B_size:t}=e,i=(0,s.k6)({x:0,y:0},Object.assign(Object.assign({size:t},e.EA2_camera),{fov:e.FEC_fov})),o=f.B.getWorldPixelSize(this.camera.zoom),n=[],r=e.C53_worldOptions.cycledX?Math.floor((o/2-i.x)/o):0,a=e.C53_worldOptions.cycledX?Math.ceil((t.x-o/2-i.x)/o):0;for(let t=0,e=r;e<=a;e+=1,t+=1)n.push({left:e*o+i.x-o/2,top:i.y-o/2,width:o,height:o});return n}},t);e.D9E_layers.forEach((({layer:t})=>t.render(i))),this.C6C_processingQueue.resume()}A25_removeLayerElementFromDom(t){var e;null===(e=this.A1F_layerElementMap.get(t))||void 0===e||e.remove()}A17_removeLayerElementsFromDom(){for(const{layer:t}of this.D9E_layers)this.A25_removeLayerElementFromDom(t)}A1C_addLayerElementsToDom(){const t=new Map;for(const{layer:e}of this.D9E_layers){const i=this.A1F_layerElementMap.get(e);if(i){const e=this.element,s=t.get(e)||0,o=e.childNodes[s];i!==o&&e.insertBefore(i,o||null),t.set(e,s+1)}}}D83_applyLayersOptions(){var t,e;for(const{layer:i,implementation:s}of this.D9E_layers){null===(t=i.setOptions)||void 0===t||t.call(i,s.options.raster);const o=this.A1F_layerElementMap.get(i);if(o){const t=(0,v.q)(null!==(e=s.options.raster.opacity)&&void 0!==e?e:1,0,1);o.style.opacity=String(t)}}}B51_destroyDataSourceSubscriptions(){for(const t of this.D92_dataSourceSubscriptions)t.offAll();this.D92_dataSourceSubscriptions=[]}get fov(){return X.d$}B50_getDataSourceType(t){switch(!0){case t instanceof yt.m5:return"geojson";case t instanceof F.Nt:return"tile";default:return"none"}}C62__createLayerElement(t,e){const i=(0,W.E)("ymaps3x0--layer");switch(!0){case"markers"===e:i.classList.add("ymaps3x0--marker-layer");break;case"hotspot"===e:case t instanceof yt.m5:i.classList.add("ymaps3x0--graphics-layer");break;case t instanceof F.Nt:i.classList.add("ymaps3x0--tile-layer")}return i}}var jt;!function(t){t[t.INACTIVE=-1]="INACTIVE",t[t.PRIMARY=0]="PRIMARY",t[t.SECONDARY=2]="SECONDARY",t[t.CTRL_PRIMARY=8]="CTRL_PRIMARY",t[t.CMD_PRIMARY=16]="CMD_PRIMARY"}(jt||(jt={}));const Lt={windows:/Windows/,macos:/Macintosh/,ios:/iPad|iPod|iPhone/},Tt={firefox:/Firefox/,chrome:/Chrome/},zt=new Map;function Bt(t,e){let i=(null==e?void 0:e.withoutCache)?void 0:zt.get(t);return void 0===i&&(i=new RegExp(Lt[t],"i").test(navigator.userAgent),zt.set(t,i)),i}const Ft=/(\d+)/,It=new Map;function Nt(t,e){let i=(null==e?void 0:e.withoutCache)?void 0:It.get(t);if(void 0===i){const e=new RegExp(`${Tt[t].source}/${Ft.source}`,"i").exec(navigator.userAgent);i=!!e&&Number(e[1]),It.set(t,i)}return!!i&&(!(null==e?void 0:e.gte)||i>=(null==e?void 0:e.gte))}function Ot(){const t=Bt("ios"),e=Nt("firefox")&&Bt("windows");return!t&&!e&&"PointerEvent"in window}class Rt extends((0,_.GA)().with()){constructor(t,e,i){super(),this.A2C_suppressNextClickStartTs=0,this.destroyed=!1,this.state=jt.INACTIVE,this._spots=[],this.D9D_onElementPointerDown=()=>{if(void 0===Rt.C52_owner)Rt.C52_owner=this;else if(Rt.C52_owner!==this)return;this.element.removeEventListener(this.C57_eventMap.start,this.D9D_onElementPointerDown),document.addEventListener(this.C57_eventMap.start,this.D85_onDocumentPointerDown),document.addEventListener(this.C57_eventMap.end,this.EB4_onPointerUp)},this.D85_onDocumentPointerDown=t=>{if(Rt.C52_owner!==this)return;const e=0===this._spots.length;this.state=e?this._getEventState(t):this.state,this._handleAdd(t),this._emit("spotsAdded"),e&&this._emit("stateChanged")},this.FCC_onPointerMove=t=>{Rt.C52_owner===this&&(this._handleChange(t),this._spots.length>0&&this._emit("spotsChanged"))},this.EB4_onPointerUp=t=>{Rt.C52_owner===this&&(this._handleRemove(t),0===this._spots.length?(document.removeEventListener(this.C57_eventMap.start,this.D85_onDocumentPointerDown),document.removeEventListener(this.C57_eventMap.end,this.EB4_onPointerUp),this.element.addEventListener(this.C57_eventMap.start,this.D9D_onElementPointerDown),Rt.C52_owner=void 0,this._emit("spotsRemoved"),this.state=jt.INACTIVE,this._emit("stateChanged")):this._emit("spotsRemoved"))},this.B41_onClick=t=>{const e=Date.now();this.A2C_suppressNextClickStartTs+500>e&&(this.A2C_suppressNextClickStartTs=0,t.stopPropagation(),t.preventDefault())},this.EBD_onDragStart=t=>{t.stopPropagation(),t.preventDefault()},this.element=t,this.C57_eventMap=e,this.options=i,this.element.style.touchAction="none",this.element.addEventListener(this.C57_eventMap.start,this.D9D_onElementPointerDown),this.element.addEventListener("click",this.B41_onClick,!0),this.element.addEventListener("dragstart",this.EBD_onDragStart),document.addEventListener(this.C57_eventMap.move,this.FCC_onPointerMove)}get spots(){return this._spots}get pointerPosition(){return this._spots.length>0?C.Kt(this._spots):this._getPointerPositionWithoutSpots()}destroy(){this.destroyed||(this.element.removeEventListener(this.C57_eventMap.start,this.D9D_onElementPointerDown),document.removeEventListener(this.C57_eventMap.start,this.D85_onDocumentPointerDown),document.removeEventListener(this.C57_eventMap.move,this.FCC_onPointerMove),document.removeEventListener(this.C57_eventMap.end,this.EB4_onPointerUp),this.element.removeEventListener("dragstart",this.EBD_onDragStart),this.element.removeEventListener("click",this.B41_onClick,!0),this.element.style.touchAction="auto",this.destroyed=!0,Rt.C52_owner===this&&(Rt.C52_owner=void 0))}suppressNextClick(){this.A2C_suppressNextClickStartTs=Date.now()}suppressSelection(){}_getEventState(t){return"undefined"!=typeof MouseEvent&&t instanceof MouseEvent?t.ctrlKey&&0===t.button?jt.CTRL_PRIMARY:t.metaKey&&0===t.button&&Bt("macos")?jt.CMD_PRIMARY:t.button:jt.PRIMARY}}const Pt={start:"pointerdown",move:"pointermove",end:"pointerup"};function kt(t){const e=[];return t.forEach((t=>{e.push(t)})),e}class Yt extends Rt{constructor(t,e){super(t,Pt,e),this.C77_spotMap=new Map,this.FD3_pointerPosition={x:0,y:0},this.C6E_suppressSelection=!1,this.A1D_onWheel=t=>{("boolean"!=typeof t.isTrusted||t.isTrusted)&&(this.FD3_pointerPosition={x:t.clientX,y:t.clientY})},document.addEventListener("wheel",this.A1D_onWheel,!0),document.addEventListener("pointercancel",(()=>{this.C77_spotMap.clear(),this.state=jt.INACTIVE,this._emit("stateChanged")}))}suppressSelection(){this.C6E_suppressSelection=!0}destroy(){document.removeEventListener("wheel",this.A1D_onWheel,!0),super.destroy()}_handleAdd(t){var e;if(null===(e=this.options)||void 0===e?void 0:e.filter(t))return;this.C77_spotMap.set(t.pointerId,{x:t.clientX,y:t.clientY}),this._spots=kt(this.C77_spotMap),this.FD3_pointerPosition={x:t.clientX,y:t.clientY};const i=t.target;if(i){const t=e=>{i.removeEventListener("pointerup",t),this._handleRemove(e)};i.addEventListener("pointerup",t)}}_handleChange(t){var e;(null===(e=this.options)||void 0===e?void 0:e.filter(t))||(this.C6E_suppressSelection&&1===this._spots.length&&t.preventDefault(),this.FD3_pointerPosition={x:t.clientX,y:t.clientY},this._spots.length>0&&this.C77_spotMap.has(t.pointerId)&&(this.C77_spotMap.set(t.pointerId,this.FD3_pointerPosition),this._spots=kt(this.C77_spotMap)))}_handleRemove(t){var e;(null===(e=this.options)||void 0===e?void 0:e.filter(t))||(this.C77_spotMap.delete(t.pointerId),this._spots=kt(this.C77_spotMap),this.C6E_suppressSelection=!1)}_getPointerPositionWithoutSpots(){return this.FD3_pointerPosition}}const Zt={start:"touchstart",move:"touchmove",end:"touchend"};class Ut extends Rt{constructor(t,e){super(t,Zt,e),this.D81_mouseCoords={x:0,y:0},this.B36_holdingMouseButton=!1,this.FEA_onMouseDown=t=>{if(void 0===Ut.C5C_mouseOwner)Ut.C5C_mouseOwner=this;else if(Ut.C5C_mouseOwner!==this)return;this.D81_mouseCoords={x:t.clientX,y:t.clientY};const e=this.state===jt.INACTIVE;this.state=e?this._getEventState(t):this.state,this.B36_holdingMouseButton=!0,document.addEventListener("mouseup",this.B2C_onMouseUp),this._emit("spotsAdded"),e&&this._emit("stateChanged")},this.A27_onMouseMove=t=>{this.D81_mouseCoords={x:t.clientX,y:t.clientY},Ut.C5C_mouseOwner===this&&this.B36_holdingMouseButton&&this._emit("spotsChanged")},this.B2C_onMouseUp=()=>{Ut.C5C_mouseOwner===this&&(Ut.C5C_mouseOwner=void 0,this.B36_holdingMouseButton=!1,document.removeEventListener("mouseup",this.B2C_onMouseUp),this._emit("spotsRemoved"),this.state=jt.INACTIVE,this._emit("stateChanged"))},this.A1D_onWheel=t=>{("boolean"!=typeof t.isTrusted||t.isTrusted)&&(this.D81_mouseCoords={x:t.clientX,y:t.clientY})},this.element.addEventListener("mousedown",this.FEA_onMouseDown),document.addEventListener("mousemove",this.A27_onMouseMove),this.element.addEventListener("wheel",this.A1D_onWheel),/ipad|iphone/i.test(navigator.userAgent)&&this.element.addEventListener("touchmove",(t=>{var e;(null===(e=this.options)||void 0===e?void 0:e.filter(t))||t.preventDefault()}))}get spots(){return 0!==this._spots.length?this._spots:this.B36_holdingMouseButton?[this.D81_mouseCoords]:[]}destroy(){this.destroyed||(this.element.removeEventListener("mousedown",this.FEA_onMouseDown),document.removeEventListener("mousemove",this.A27_onMouseMove),document.removeEventListener("mouseup",this.B2C_onMouseUp),this.element.removeEventListener("wheel",this.A1D_onWheel),super.destroy())}_handleAdd(t){var e;(null===(e=this.options)||void 0===e?void 0:e.filter(t))||(this._spots=Wt(t.touches))}_handleChange(t){var e;if(null===(e=this.options)||void 0===e?void 0:e.filter(t))return;const i=this._spots.length;this._spots=Wt(t.touches),this._spots.length<i?this._emit("spotsRemoved"):this._spots.length>i&&this._emit("spotsAdded")}_handleRemove(t){var e;(null===(e=this.options)||void 0===e?void 0:e.filter(t))||(this._spots=Wt(t.touches))}_getPointerPositionWithoutSpots(){return this.D81_mouseCoords}}function Wt(t){const e=new Array;for(let i=0;i<t.length;i++)e[i]={x:t[i].clientX,y:t[i].clientY};return e}const Gt=new WeakMap;var Qt;!function(t){t[t.IDLE=0]="IDLE",t[t.DRAGGING_BEYOND_THRESHOLD=1]="DRAGGING_BEYOND_THRESHOLD",t[t.DRAGGING=2]="DRAGGING"}(Qt||(Qt={}));const Ht={tremorPixels:3,listenToButtons:new Set([jt.PRIMARY]),minSpotsCount:1};class Vt extends((0,_.GA)().with()){constructor(t,e={}){super(),this.C58_state=Qt.IDLE,this.A24_startingPoint={x:0,y:0},this.D92_dragOffset={x:0,y:0},this.FD3_pointerPosition={x:0,y:0},this.EB6_onSpotAdded=()=>{if(this.EC4_device.spots.length<this.FF2_options.minSpotsCount)return;const t=this.EC4_device.state;if(this.C58_state<Qt.DRAGGING_BEYOND_THRESHOLD&&this.FF2_options.listenToButtons.has(t)){const t=this.EC4_device.pointerPosition;this.C58_state=Qt.DRAGGING_BEYOND_THRESHOLD,this.A24_startingPoint.x=t.x,this.A24_startingPoint.y=t.y,this.D92_dragOffset={x:0,y:0},this.FD3_pointerPosition=this.EC4_device.pointerPosition}else this.B49_skip(this.EC4_device.pointerPosition)},this.FD6_onSpotsChanged=()=>{if(this.C58_state<Qt.DRAGGING_BEYOND_THRESHOLD)return;const t=this.EC4_device.pointerPosition,e=this.D92_dragOffset;this.D92_dragOffset=C.lu(t,this.A24_startingPoint),this.FD3_pointerPosition=this.EC4_device.pointerPosition,this.C58_state<=Qt.DRAGGING_BEYOND_THRESHOLD&&Math.max(Math.abs(this.D92_dragOffset.x),Math.abs(this.D92_dragOffset.y))>this.FF2_options.tremorPixels?(this._emit("dragStart"),this.C58_state=Qt.DRAGGING,this.EC4_device.suppressSelection()):this.C58_state!==Qt.DRAGGING||C.wy(e,this.D92_dragOffset)||this._emit("dragMove")},this.C79_onSpotsRemoved=()=>{this.EC4_device.spots.length<this.FF2_options.minSpotsCount?(this._emit("dragEnd"),this.C58_state===Qt.DRAGGING&&this.EC4_device.suppressNextClick(),this.C58_state=Qt.IDLE,this.D92_dragOffset={x:0,y:0},this.FD3_pointerPosition={x:0,y:0}):this.B49_skip(this.EC4_device.pointerPosition)},this.EC4_device=t,this.FF2_options=Object.assign(Object.assign({},Ht),e),this.EC7_deviceSubscription=this.EC4_device.on("spotsAdded",this.EB6_onSpotAdded).on("spotsChanged",this.FD6_onSpotsChanged).on("spotsRemoved",this.C79_onSpotsRemoved)}destroy(){this.EC7_deviceSubscription.offAll()}get dragStartingPoint(){return this.A24_startingPoint}get pointerPosition(){return this.FD3_pointerPosition}get dragOffset(){return this.C58_state===Qt.DRAGGING?this.D92_dragOffset:{x:0,y:0}}get isDragging(){return this.C58_state!==Qt.IDLE}B49_skip(t){if(this.C58_state<Qt.DRAGGING)return this.A24_startingPoint=t,void(this.FD3_pointerPosition=t);this._emit("dragEnd"),this.A24_startingPoint=t,this.FD3_pointerPosition=t,this._emit("dragStart")}}const Xt=12*y.Z;class $t extends((0,_.GA)().with()){constructor(t){super(),this.C5C_scale=1,this.C58_state=0,this.D7F_angle=0,this.EB7_angleDelta=0,this.C5C_panTiltDelta=0,this.B31_initialTouchDistance=1,this.B3B_initialTouchesY=[0,0],this.D87_initialDirection={x:0,y:0},this.EC4_device=t,this.EC7_deviceSubscription=this.EC4_device.on("spotsAdded",(()=>{2===this.EC4_device.spots.length&&(this.C58_state=1,this.B31_initialTouchDistance=qt(this.EC4_device.spots),this.B3B_initialTouchesY=[this.EC4_device.spots[0].y,this.EC4_device.spots[1].y],this.D87_initialDirection=Jt(this.EC4_device.spots),this.B2E_updateState())})).on("spotsChanged",(()=>{if(this.EC4_device.spots.length<=1)return;if(this.B2E_updateState(),1!==this.C58_state)return;const t=Math.abs(qt(this.EC4_device.spots)-this.B31_initialTouchDistance),e=Math.abs(this.D7F_angle)>Xt,i=t>=15,s=this.EC4_device.spots[0].y-this.B3B_initialTouchesY[0],o=this.EC4_device.spots[1].y-this.B3B_initialTouchesY[1],n=!e&&Math.sign(s)===Math.sign(o)&&Math.abs(s)>=5&&Math.abs(o)>=5&&t<10;(e||i||n)&&(this.C58_state=2,this.B31_initialTouchDistance=qt(this.EC4_device.spots),this.D87_initialDirection=Jt(this.EC4_device.spots),this.B2E_updateState(),this._emit(i||e?"pinchRotateStart":"panTiltStart"))})).on("spotsRemoved",(()=>{this.EC4_device.spots.length<=1?(2===this.C58_state&&this._emit("gestureEnd"),this.C5C_scale=1,this.D7F_angle=0,this.EB7_angleDelta=0,this.C5C_panTiltDelta=0,this.D87_initialDirection={x:0,y:0},this.B31_initialTouchDistance=0,this.B3B_initialTouchesY=[0,0]):this.B2E_updateState()}))}destroy(){this.EC7_deviceSubscription.offAll()}get scale(){return 2===this.C58_state?this.C5C_scale:1}get angle(){return 2===this.C58_state?this.EB5_getCorrectedAngle():0}get panTiltDelta(){return 2===this.C58_state?this.C5C_panTiltDelta:0}B2E_updateState(){const t=this.EC4_device.spots,e=qt(t);var i,s;this.C5C_scale=e?e/this.B31_initialTouchDistance:1,this.D7F_angle=(i=Jt(t),s=this.D87_initialDirection,Math.atan2(i.y,i.x)-Math.atan2(s.y,s.x)),this.C5C_panTiltDelta=this.B3B_initialTouchesY[0]-t[0].y}EB5_getCorrectedAngle(){const t=Math.abs(this.D7F_angle)>Xt;return!this.EB7_angleDelta&&t&&(this.EB7_angleDelta=-Math.sign(this.D7F_angle)*Xt),this.EB7_angleDelta?this.D7F_angle+this.EB7_angleDelta:0}}function qt(t){if(t.length<2)return 0;const e=C.lu(t[0],t[1]);return C.kE(e)}function Jt(t){return C.lu(t[0],t[1])}var Kt;!function(t){t[t.SCROLL_DOWN=-1]="SCROLL_DOWN",t[t.SCROLL_UP=1]="SCROLL_UP"}(Kt||(Kt={}));class te extends((0,_.GA)().with()){constructor(t,e){super(),this.EB9_disabled=!1,this.A1D_onWheel=t=>{var e;if(this.EB9_disabled||"boolean"==typeof t.isTrusted&&!t.isTrusted)return;if(null===(e=this.options)||void 0===e?void 0:e.filter(t))return;t.preventDefault(),t.stopPropagation();let i=t.deltaMode===WheelEvent.DOM_DELTA_PIXEL?1:40,s=!1;Nt("firefox",{gte:90})&&t.deltaMode===WheelEvent.DOM_DELTA_LINE&&(i=1),t.ctrlKey&&Bt("macos")&&Nt("firefox")&&(i*=6),t.ctrlKey&&Bt("macos")&&Nt("chrome",{gte:100})&&(i*=6,s=!0);let o=(s||void 0===t.wheelDeltaY?-t.deltaY:t.wheelDeltaY)*i*(t.shiftKey?.25:1);this._emit("wheel",o)},this.C6C_element=t,this.C6C_element.addEventListener("wheel",this.A1D_onWheel,{passive:!1}),this.options=e}destroy(){this.C6C_element.removeEventListener("wheel",this.A1D_onWheel)}disable(){this.EB9_disabled=!0}enable(){this.EB9_disabled=!1}}const ee=5,ie=.001,se={linear:{p1:{x:0,y:0},p2:{x:1,y:1}},ease:{p1:{x:.25,y:.1},p2:{x:.25,y:1}},"ease-in":{p1:{x:.42,y:0},p2:{x:1,y:1}},"ease-out":{p1:{x:0,y:0},p2:{x:.58,y:1}},"ease-in-out":{p1:{x:.42,y:0},p2:{x:.58,y:1}}};function oe(t){if("function"==typeof t)return t;if("string"==typeof t)return t in se||(0,x._y)(new Error(`Unexpected timing function used: ${t}`)),oe(se[t]);const e=t,{p1:i,p2:s}=e,o={x:3*i.x,y:3*i.y},n={x:3*(s.x-2*i.x),y:3*(s.y-2*i.y)},r={x:3*(i.x-s.x)+1,y:3*(i.y-s.y)+1};function a(t){return r.x*Math.pow(t,3)+n.x*Math.pow(t,2)+o.x*t}function h(t){return o.x+t*(2*n.x+3*t*r.x)}return function(t){return e=function(t){let e,i=t,s=0;for(;s<ee&&(e=a(i)-t,!(Math.abs(e)<ie));)i-=e/h(i),s++;return i}(t),r.y*Math.pow(e,3)+n.y*Math.pow(e,2)+o.y*e;var e}}const ne=oe("ease");function re(t,e,i){return t(e)-t(e-i)}function ae(t,e,i,s,o=ne){const n=s?f.B.worldToRelativePixels(C.lu(s,t.worldCenter),t.zoom):null,r=ce(o,e-t.zoom,n);return t.animateForDuration(i,r)}function he(t,e,i,s=ne){if(C.pU(e,C.jQ,1e-10))return{complete:Promise.resolve(),isRunning:!1,stop(){}};const o=oe(s);return t.animateForDuration(i,((t,i,s)=>{const n=C.Sm(e,re(o,i,s)),r=C.IH(t.worldCenter,n);return Object.assign(Object.assign({},t),{worldCenter:r})}))}function le(t,e,i,s,o=ne){return Math.abs(i-t.zoom)<1e-10?he(t,C.lu(e,t.worldCenter),s,o):function(t,e,i,s,o=ne){const n=t.worldCenter,r={x:0,y:0},a={x:!1,y:!1},h=ce(o,i-t.zoom,r);return t.animateForDuration(s,((s,o,l)=>{if(1===o)return Object.assign(Object.assign({},s),{worldCenter:e,zoom:i});const c=f.B.convertPixelSizeToWorldSize(t.size,s.zoom),d=!t.worldOptions.cycledX&&c.x>2,u=!t.worldOptions.cycledY&&Math.abs(c.y)>2;if(!a.x&&!d){const{x:t}=de(e,i,n,s.zoom);r.x=t,a.x=!0}if(!a.y&&!u){const{y:t}=de(e,i,n,s.zoom);r.y=t,a.y=!0}return h(s,o,l)}))}(t,e,i,s,o)}function ce(t,e,i){const s=oe(t);return(t,o,n)=>{const r=t.zoom+e*re(s,o,n);if(!i)return Object.assign(Object.assign({},t),{zoom:r});const a=C.lu(f.B.convertPixelSizeToWorldSize(i,t.zoom),f.B.convertPixelSizeToWorldSize(i,r)),h=C.IH(t.worldCenter,a);return Object.assign(Object.assign({},t),{worldCenter:h,zoom:r})}}function de(t,e,i,s){const o=e-s,n=C.lu(t,i),r=C.Sm(n,Math.sign(o)/(Math.pow(2,Math.abs(o))-1)),a=o>0?t:i,h=C.IH(a,r);return f.B.worldToRelativePixels(C.lu(h,i),s)}function ue(t,e,i,s,o=ne){const n=oe(o);return t.animateForDuration(s,((t,s,o)=>{if(1===s)return Object.assign(Object.assign({},t),{azimuth:i});const r=t.azimuth+e*re(n,s,o);return Object.assign(Object.assign({},t),{azimuth:r})}))}function _e(t,e,i,s=ne){const o=e-t.tilt,n=oe(s);return t.animateForDuration(i,((t,i,s)=>{if(1===i)return Object.assign(Object.assign({},t),{tilt:e});const r=t.tilt+o*re(n,i,s);return Object.assign(Object.assign({},t),{tilt:r})}))}function pe(t,{zoom:e,azimuth:i},s){const o=f.B.getScale(e,s),n=C.Sm(t,o-1);return C.U1(f.B.convertPixelSizeToWorldSize(n,s,n),i)}class me extends((0,_.GA)().with()){constructor(t,e,i,s){super(),this.D84_deltaAccumulator=0,this.A11_zoomPointCenterOffset=C.jQ,this.A1D_onWheel=t=>{const e=Date.now();this.D84_deltaAccumulator=t;const i=this.zoomDuration;if(!this.B32_updateWheelTrend(t)||this.C58_state&&e-this.C58_state.startTs<i)return;this.A11_zoomPointCenterOffset=C.lu(this.FD3_zoomPointSource(),C.ZO(this.D86_map.size,2));const s=Math.sign(this.D84_deltaAccumulator);this.D84_deltaAccumulator=0;const o=this.A28_computeNewState(this.C58_state,e,s);if(o){const t=!this.C58_state;this.C58_state=o,t&&this._emit("zoomStart")}this.C58_state&&!this.isInAction&&(this.A12_animation=this.D86_map.animate(this.A1B_animationStep),this.A12_animation.complete.finally((()=>this._emit("zoomEnd"))))},this.A1B_animationStep=t=>{const{zoom:e,dt:i}=ge(this.C58_state,Date.now());if(i>=this.C58_state.duration+50&&(this.A12_animation.stop(),this.A12_animation=void 0,this.C58_state=void 0,this.A22_currentWheelTrend=void 0),e===t.zoom)return t;const s=pe(this.A11_zoomPointCenterOffset,t,e),o=C.IH(t.worldCenter,s);return Object.assign(Object.assign({},t),{worldCenter:o,zoom:e})},this.D86_map=t,this.EC4_device=e,this.FD3_zoomPointSource=i,this.zoomDuration=s,this.ECB_init()}get isInAction(){return void 0!==this.A12_animation&&this.A12_animation.isRunning}destroy(){this.FDF_suspend()}enable(){this.ECB_init()}disable(){this.FDF_suspend()}ECB_init(){this.EC7_deviceSubscription||(this.EC7_deviceSubscription=this.EC4_device.on("wheel",this.A1D_onWheel))}FDF_suspend(){this.A12_animation&&this.A12_animation.isRunning&&this.A12_animation.stop(),this.EC7_deviceSubscription&&(this.EC7_deviceSubscription.offAll(),this.EC7_deviceSubscription=void 0)}A28_computeNewState(t,e,i){const s=t?ge(t,e).zoom:this.D86_map.zoom;let o=s+i;if(t&&(o=(0,v.q)(o,t.startZoom-4,t.startZoom+4)),o=(0,v.q)(o,this.D86_map.zoomRange.min,this.D86_map.zoomRange.max),o=Math.round(o),o=Number(o.toFixed(2)),o!==s)return{startZoom:s,targetZoom:o,startTs:e,duration:this.zoomDuration}}B32_updateWheelTrend(t){const e=this.A22_currentWheelTrend,i=Math.sign(t);return!(Math.abs(i)<1e-10)&&(this.A22_currentWheelTrend=i,!e||i===e)}}function ge(t,e){const i=e-t.startTs,s=(0,v.q)(i/t.duration,0,1);return{zoom:t.startZoom+(t.targetZoom-t.startZoom)*s,dt:i}}const ye=.03;class Ee extends((0,_.GA)().with()){constructor(t,e,i){super(),this.EBF_wheelAccumulator=0,this.A11_zoomPointCenterOffset=C.jQ,this.ABF_deltaZoom=0,this.FD6_prevFrameTimestamp=0,this.A1D_onWheel=t=>{this.EBF_wheelAccumulator+=t,this.A11_zoomPointCenterOffset=C.lu(this.FD3_zoomPointSource(),C.ZO(this.D86_map.size,2)),this.A12_animation||(this.FD6_prevFrameTimestamp=Date.now(),this.A12_animation=this.D86_map.animate(this.A1B_animationStep),this.A12_animation.complete.finally((()=>{clearTimeout(this.B2B_zoomEndTimer),this.B2B_zoomEndTimer=window.setTimeout((()=>{this._emit("zoomEnd"),this.B2B_zoomEndTimer=void 0}))})),clearTimeout(this.B2B_zoomEndTimer),this.B2B_zoomEndTimer=void 0,this._emit("zoomStart"))},this.A1B_animationStep=t=>{this.EBF_wheelAccumulator&&(Math.sign(this.EBF_wheelAccumulator)!==Math.sign(this.ABF_deltaZoom)&&(this.ABF_deltaZoom=0),this.ABF_deltaZoom+=function(t,e){const i=Math.sign(t),s=Math.min(1,1/Math.abs(5.5*Math.abs(e)-1)),o=(0,v.q)(Math.abs(t)*s/600,.005,2);return i*o}(this.EBF_wheelAccumulator,this.ABF_deltaZoom),this.EBF_wheelAccumulator=0);const e=Date.now();if(e-this.FD6_prevFrameTimestamp>400||Math.abs(this.ABF_deltaZoom)<=.03){const e=t.zoom,i=(0,v.q)(e+this.ABF_deltaZoom,this.D86_map.zoomRange.min,this.D86_map.zoomRange.max);this.ABF_deltaZoom=0,this.A12_animation.stop(),this.A12_animation=void 0;const s=pe(this.A11_zoomPointCenterOffset,t,i),o=C.IH(t.worldCenter,s);return Object.assign(Object.assign({},t),{worldCenter:o,zoom:i})}let i;i=Math.abs(this.ABF_deltaZoom)>.12?.25*this.ABF_deltaZoom:Math.sign(this.ABF_deltaZoom)*ye,this.ABF_deltaZoom-=i;const s=(0,v.q)(t.zoom+i,this.D86_map.zoomRange.min,this.D86_map.zoomRange.max),o=pe(this.A11_zoomPointCenterOffset,t,s),n=C.IH(t.worldCenter,o);return this.FD6_prevFrameTimestamp=e,Object.assign(Object.assign({},t),{worldCenter:n,zoom:s})},this.D86_map=t,this.EC4_device=e,this.FD3_zoomPointSource=i,this.ECB_init()}get isInAction(){return void 0!==this.A12_animation&&this.A12_animation.isRunning}destroy(){this.FDF_suspend()}enable(){this.ECB_init()}disable(){this.FDF_suspend()}ECB_init(){this.EC7_deviceSubscription||(this.EC7_deviceSubscription=this.EC4_device.on("wheel",this.A1D_onWheel))}FDF_suspend(){this.A12_animation&&this.A12_animation.isRunning&&this.A12_animation.stop(),this.EC7_deviceSubscription&&(this.EC7_deviceSubscription.offAll(),this.EC7_deviceSubscription=void 0)}}const fe=Math.cos(Math.PI/6),Ce=oe("ease-out");class De{constructor(){this.B4F_history=[]}push(t){this.B4F_history.push({position:t,ts:Date.now()}),this.B4F_history.length>=30&&this.B4F_history.shift()}computeMovement(){const t=Date.now(),e=this.B4F_history.filter((e=>e.ts>=t-500));if(e.length<2||t-e[e.length-1].ts>=100)return null;const i=C.lu(e[e.length-2].position,e[e.length-1].position);if(C.pU(i,C.jQ,2))return null;C.Fv(i,i);let s=0;for(let o=e.length-1;o>=1;o--){const n=C.lu(e[o-1].position,e[o].position),r=C.kE(n);if(C.AK(n,i)/r<=fe)break;const a=(t-e[o].ts)/500;s+=r/Math.log2(2+a)}return C.Sm(i,Math.min(s,500))}}class Me extends((0,_.GA)().with()){constructor(t,e){super(),this.D86_map=t,this.D82_dragger=e,this.D9F_dragSubscription=this.D7F_initDrag()}destroy(){this.FEE_stopAnimationIfAny(),this.A13_stopAllSubscriptions()}enable(){this.D9F_dragSubscription||(this.D9F_dragSubscription=this.D7F_initDrag())}disable(){this.FEE_stopAnimationIfAny(),this.A13_stopAllSubscriptions(),this.D82_dragger.isDragging&&this._emit("dragEnd")}get isInAction(){return void 0!==this.A54_dragAnimation&&this.A54_dragAnimation.isRunning}A13_stopAllSubscriptions(){this.C75_dragEndSubscription&&(this.C75_dragEndSubscription.offAll(),this.C75_dragEndSubscription=void 0),this.D9F_dragSubscription&&(this.D9F_dragSubscription.offAll(),this.D9F_dragSubscription=void 0)}D7F_initDrag(){const t=this.D82_dragger.group();return t.on("dragStart",(()=>{if(this.D86_map.dragger.isDragging)return;this._emit("dragStart"),this.FEE_stopAnimationIfAny();const e=(0,s.XA)(this.D82_dragger.dragStartingPoint,this.D86_map),i=new De;i.push(this.D82_dragger.pointerPosition),t.on("dragMove",(()=>i.push(this.D82_dragger.pointerPosition))),this.A54_dragAnimation=this.D86_map.animate((t=>Object.assign(Object.assign({},t),{worldCenter:this.EAA_computeWorldCenter(e)}))),this.C75_dragEndSubscription=this.D82_dragger.on("dragEnd",(()=>{this.C75_dragEndSubscription.offAll();const t={worldCenter:this.EAA_computeWorldCenter(e),zoom:this.D86_map.zoom,azimuth:this.D86_map.azimuth,tilt:this.D86_map.tilt};this.D86_map.setCamera(t),this.FEE_stopAnimationIfAny();const s=i.computeMovement();if(!s)return void this._emit("dragEnd");const o=f.B.convertPixelSizeToWorldSize(s,this.D86_map.zoom),n=C.U1(o,t.azimuth),r=C.IH(this.D86_map.worldCenter,n);this._emit("inertiaStart",{targetPositionWcs:r}),this.A54_dragAnimation=he(this.D86_map,n,400,Ce),this.A54_dragAnimation.complete.finally((()=>this._emit("dragEnd")))}))})),t}FEE_stopAnimationIfAny(){this.A54_dragAnimation&&this.A54_dragAnimation.isRunning&&this.A54_dragAnimation.stop()}EAA_computeWorldCenter(t){const e=(0,s.XA)(this.D82_dragger.pointerPosition,this.D86_map),i=C.lu(e,t);return C.lu(this.D86_map.worldCenter,i)}}class ve extends((0,_.GA)().with()){constructor(t,e,i){super(),this.D88_isEnabled=!1,this.B31_onDblClick=()=>{this.D7B_zoomOn(1)},this.C76_onRightDblClick=()=>{this.D7B_zoomOn(-1)},this.D86_map=t,this.EA5_zoomDuration=e,this.C67_zoomPointSrc=i,this.ECB_init()}get isInAction(){return void 0!==this.A12_animation&&this.A12_animation.isRunning}destroy(){this.FDF_suspend()}enable(){this.ECB_init()}disable(){this.FDF_suspend()}ECB_init(){this.D88_isEnabled||(this.D86_map.events.on("dblclick","any",this.B31_onDblClick),this.D86_map.events.on("rightdblclick","any",this.C76_onRightDblClick),this.D88_isEnabled=!0)}FDF_suspend(){this.D88_isEnabled&&(this.D86_map.events.off("dblclick","any",this.B31_onDblClick),this.D86_map.events.off("rightdblclick","any",this.C76_onRightDblClick)),this.A12_animation&&this.A12_animation.isRunning&&this.A12_animation.stop(),this.D88_isEnabled=!1}D7B_zoomOn(t){this._emit("zoomStart");const e=(0,s.wm)(this.C67_zoomPointSrc(),this.D86_map);this.A12_animation=ae(this.D86_map,this.D86_map.zoom+t,this.EA5_zoomDuration,e),this.A12_animation.complete.finally((()=>this._emit("zoomEnd")))}}class Ae extends((0,_.GA)().with()){constructor(t,e,i){super(),this.rotationAllowed=!1,this.tiltAllowed=!1,this.B48_onTiltStart=()=>{if(!this.tiltAllowed)return this.B2B_onPinchRotateStart();this.FEE_stopAnimationIfAny(),this._emit("tiltStart"),this.D86_map.updateCameraOptions({enabledTiltTransition:!0});const t=this.D86_map.tilt,e=this.D86_map.animate((e=>{const i=t+Math.PI*this.EB3_gestureRecognizer.panTiltDelta/this.D86_map.size.y;return this._emit("tiltChanged"),Object.assign(Object.assign({},e),{tilt:i})})),i=this.EB3_gestureRecognizer.on("gestureEnd",(()=>{i.offAll(),e.stop();const t=()=>{this._emit("tiltEnd"),this.D86_map.updateCameraOptions({enabledTiltTransition:!1})},s=this.D86_map.tilt<this.EAE_tiltRange.min;if(s||this.D86_map.tilt>this.EAE_tiltRange.max){const e=s?this.EAE_tiltRange.min:this.EAE_tiltRange.max;this.EA5_stopTiltAnimationIfAny(),this.B3B_tiltAnimation=_e(this.D86_map,e,this.FE1_tiltDuration),this.B3B_tiltAnimation.complete.finally(t)}else t()}))},this.B2B_onPinchRotateStart=()=>{this.FEE_stopAnimationIfAny(),this._emit("zoomStart");const t=this.D86_map.zoom,e=this.D86_map.azimuth,i=this.D86_map.animate((i=>{const s=t+Math.log2(this.EB3_gestureRecognizer.scale);let o;o=this.rotationAllowed?e+this.EB3_gestureRecognizer.angle:i.azimuth;let n=i.worldCenter;if("zoomToCenter"===this.C72_getZoomStrategy()){const t=pe(C.lu(this.FE0_getZoomPointSrc(),C.ZO(this.D86_map.size,2)),i,s);n=C.IH(i.worldCenter,t)}return this._emit("zoomChanged"),Object.assign(Object.assign({},i),{worldCenter:n,azimuth:o,zoom:s})})),s=this.EB3_gestureRecognizer.on("gestureEnd",(()=>{s.offAll(),i.stop();const t=Math.round(this.D86_map.zoom),o=[];if(this.rotationAllowed&&Math.abs(this.EB3_gestureRecognizer.angle)<this.EC6_rotateThreshold&&(this.EC5_stopRotateAnimationIfAny(),this.B43_rotateAnimation=ue(this.D86_map,-this.EB3_gestureRecognizer.angle,e,this.ECA_rotateDuration),o.push(this.B43_rotateAnimation.complete)),this.snapToRound&&t!==this.D86_map.zoom){let e;if(this.D98_stopZoomAnimationIfAny(),"zoomToCenter"===this.C72_getZoomStrategy()){const[t,i]=this.D86_map.center;e=this.D86_map.projection.toWorldCoordinates([t,i])}this.D8B_zoomAnimation=ae(this.D86_map,t,this.EA5_zoomDuration,e),o.push(this.D8B_zoomAnimation.complete)}o.length?Promise.all(o).finally((()=>this._emit("zoomEnd"))).catch((t=>(0,x.H)(t))):this._emit("zoomEnd")}))},this.D86_map=t,this.snapToRound=i.snapToRound,this.EA5_zoomDuration=i.zoomDuration,this.ECA_rotateDuration=i.rotateDuration,this.EC6_rotateThreshold=i.rotateThreshold,this.FE1_tiltDuration=i.tiltDuration,this.EAE_tiltRange=i.tiltRange,this.FE0_getZoomPointSrc=i.getZoomPointSrc,this.C72_getZoomStrategy=i.getZoomStrategy,this.EB3_gestureRecognizer=e,this.ECB_init()}destroy(){this.FDF_suspend()}get isInAction(){var t,e,i;return Boolean((null===(t=this.D8B_zoomAnimation)||void 0===t?void 0:t.isRunning)||(null===(e=this.B43_rotateAnimation)||void 0===e?void 0:e.isRunning)||(null===(i=this.B3B_tiltAnimation)||void 0===i?void 0:i.isRunning))}enable(){this.ECB_init()}disable(){this.FDF_suspend()}ECB_init(){this.EC7_deviceSubscription||(this.EC7_deviceSubscription=this.EB3_gestureRecognizer.on("pinchRotateStart",this.B2B_onPinchRotateStart).on("panTiltStart",this.B48_onTiltStart))}FDF_suspend(){this.EC7_deviceSubscription&&(this.EC7_deviceSubscription.offAll(),this.EC7_deviceSubscription=void 0),this.FEE_stopAnimationIfAny()}FEE_stopAnimationIfAny(){this.D98_stopZoomAnimationIfAny(),this.EC5_stopRotateAnimationIfAny(),this.EA5_stopTiltAnimationIfAny()}D98_stopZoomAnimationIfAny(){var t;(null===(t=this.D8B_zoomAnimation)||void 0===t?void 0:t.isRunning)&&(this.D8B_zoomAnimation.stop(),this.D8B_zoomAnimation=void 0)}EC5_stopRotateAnimationIfAny(){var t;(null===(t=this.B43_rotateAnimation)||void 0===t?void 0:t.isRunning)&&(this.B43_rotateAnimation.stop(),this.B43_rotateAnimation=void 0)}EA5_stopTiltAnimationIfAny(){var t;(null===(t=this.B3B_tiltAnimation)||void 0===t?void 0:t.isRunning)&&(this.B3B_tiltAnimation.stop(),this.B3B_tiltAnimation=void 0)}}class xe extends((0,_.GA)().with()){constructor(t,e,i){super(),this.C6C_element=(0,W.E)("ymaps3x0--magnifier"),this.A11_backdropElement=(0,W.E)("ymaps3x0--magnifier-backdrop"),this.EBD_onDragStart=()=>{this.B3C_selectionInfo=this.D88_computeSelectionInfo(),this.D86_map.container.appendChild(this.C6C_element),document.body.appendChild(this.A11_backdropElement),this.B3F_updateElementDimensions(this.B3C_selectionInfo),this._emit("selectionStart")},this.C5F_onDragMove=()=>{this.B3C_selectionInfo&&(this.B3C_selectionInfo=this.D88_computeSelectionInfo(),this.B3F_updateElementDimensions(this.B3C_selectionInfo))},this.B3D_onDragEnd=()=>{this.B3C_selectionInfo&&(this.A12_animation=this.EC7_zoomByCurrentSelection(this.B3C_selectionInfo),this.A12_animation.complete.finally((()=>this._emit("selectionEnd"))),this.FCC_cleanupSelection()),setTimeout((()=>this.D89_detachBackdrop()))},this.C70_onKeyDown=t=>{"Escape"===t.key&&this.B3C_selectionInfo&&(this._emit("selectionEnd"),this.FCC_cleanupSelection())},this.A11_backdropElement.addEventListener("contextmenu",(t=>t.preventDefault())),this.D86_map=t,this.D82_dragger=e,this.snapToRound=i,this.ECB_init()}destroy(){this.FDF_suspend(),this.EA8_detachElement()}get isInAction(){return void 0!==this.A12_animation&&this.A12_animation.isRunning}enable(){this.ECB_init()}disable(){this.FDF_suspend()}ECB_init(){this.B29_subscriptions||(document.addEventListener("keydown",this.C70_onKeyDown),this.B29_subscriptions=this.D82_dragger.group().on("dragStart",this.EBD_onDragStart).on("dragMove",this.C5F_onDragMove).on("dragEnd",this.B3D_onDragEnd))}FDF_suspend(){this.A12_animation&&this.A12_animation.isRunning&&this.A12_animation.stop(),document.removeEventListener("keydown",this.C70_onKeyDown),this.B29_subscriptions&&(this.B29_subscriptions.offAll(),this.B29_subscriptions=void 0),this.D89_detachBackdrop()}FCC_cleanupSelection(){this.B3C_selectionInfo=void 0,this.EA8_detachElement()}EA8_detachElement(){this.C6C_element.parentNode&&this.C6C_element.parentNode.removeChild(this.C6C_element)}D89_detachBackdrop(){this.A11_backdropElement.parentNode&&this.A11_backdropElement.parentNode.removeChild(this.A11_backdropElement)}B3F_updateElementDimensions({point:t,offset:e}){this.C6C_element.style.left=`${Math.round(t.x)}px`,this.C6C_element.style.top=`${Math.round(t.y)}px`,this.C6C_element.style.width=`${Math.abs(Math.round(e.x))}px`,this.C6C_element.style.height=`${Math.abs(Math.round(e.y))}px`,this.C6C_element.style.transform=`scale(${e.x<0?-1:1}, ${e.y<0?-1:1})`}EC7_zoomByCurrentSelection(t){const{center:e,zoom:i}=function({size:t,worldCenter:e,zoom:i,zoomRange:o,azimuth:n,tilt:r,fov:a},h,l){const c=(0,v.q)(Math.abs(h.offset.x),1e-10,t.x),d=(0,v.q)(Math.abs(h.offset.y),1e-10,t.y);let u=i+Math.min(Math.log2(t.x/c),Math.log2(t.y/d));l&&(u=Math.floor(u));const _=h.point,p=C.IH(h.point,h.offset),m=C.ZO(C.IH(_,p),2);return{zoom:Math.min(Math.max(u,o.min),o.max),center:(0,s.wm)(m,{size:t,worldCenter:e,zoom:i,azimuth:n,tilt:r,fov:a})}}(this.D86_map,t,this.snapToRound);return le(this.D86_map,e,i,300)}D88_computeSelectionInfo(){const{left:t,top:e}=this.D86_map.container.getBoundingClientRect();return{point:C.lu(this.D82_dragger.dragStartingPoint,{x:t,y:e}),offset:this.D82_dragger.dragOffset}}}class Se extends((0,_.GA)().with()){constructor(t,e,i,s){super(),this.D88_isEnabled=!1,this.FE4_deviceStateChangedEventGroup=void 0,this.B41_onClick=t=>{if(this.C79_dragEventGroup)return void this.C67_destroyDragEvents();const e=C.Ue(t.x,t.y);this.C79_dragEventGroup=this.A1E_initDragEvents(e),window.clearTimeout(this.C55_clickTimer),this.C55_clickTimer=window.setTimeout((()=>{this.C67_destroyDragEvents()}),300)},this.D86_map=t,this.EC4_device=e,this.D82_dragger=i,this.zoomStrategy=s,this.ECB_init()}destroy(){this.FDF_suspend()}get isInAction(){return void 0!==this.A12_animation&&this.A12_animation.isRunning}enable(){this.ECB_init()}disable(){this.FDF_suspend()}ECB_init(){this.D88_isEnabled||(this.D95_addListeners(),this.D88_isEnabled=!0)}FDF_suspend(){this.D88_isEnabled&&(window.clearTimeout(this.C55_clickTimer),this.C67_destroyDragEvents(),this.D81_removeListeners(),this.A12_animation&&this.A12_animation.isRunning&&this.A12_animation.stop(),this.D88_isEnabled=!1)}D95_addListeners(){if(this.FE4_deviceStateChangedEventGroup)return;let t;this.FE4_deviceStateChangedEventGroup=this.EC4_device.on("stateChanged",(()=>{this.EC4_device.state!==jt.PRIMARY?(t&&C.kE(C.lu(t,this.EC4_device.pointerPosition))<=7&&this.B41_onClick(t),t=void 0):t=this.EC4_device.pointerPosition}))}D81_removeListeners(){this.FE4_deviceStateChangedEventGroup&&(this.FE4_deviceStateChangedEventGroup.offAll(),this.FE4_deviceStateChangedEventGroup=void 0)}A1E_initDragEvents(t){const e=this.D82_dragger.group();return e.on("dragStart",(()=>{let i=this.D82_dragger.dragStartingPoint;window.clearTimeout(this.C55_clickTimer);C.kE(C.lu(t,i))>20||(this._emit("zoomStart"),e.on("dragMove",(()=>{const e=this.D82_dragger.pointerPosition,o=C.lu(e,i);i=e;const n=o.y/this.D86_map.size.y*10,r=this.D86_map.zoom+n,a=this.D86_map.zoomRange;if(r<a.min||r>a.max)return;const h="zoomToCenter"===this.zoomStrategy?this.D86_map.worldCenter:(0,s.XA)(t,this.D86_map);this.A12_animation=ae(this.D86_map,r,0,h)})),e.on("dragEnd",(()=>{this.C67_destroyDragEvents(),this.A12_animation?this.A12_animation.complete.finally((()=>this._emit("zoomEnd"))):this._emit("zoomEnd")})))})),e}C67_destroyDragEvents(){this.C79_dragEventGroup&&(this.C79_dragEventGroup.offAll(),this.C79_dragEventGroup=void 0)}}class be extends((0,_.GA)().with()){constructor(t,e){super(),this.D95_isRotateStartEmitted=!1,this.EA9_isTiltStartEmitted=!1,this.C58_state={type:0},this.rotationAllowed=!0,this.tiltAllowed=!0,this.EBD_onDragStart=()=>{0===this.C58_state.type&&(this.C58_state={type:1,animation:this.D86_map.animate(this.FE0_onAnimationStep),previousPoint:this.D82_dragger.dragStartingPoint})},this.C5F_onDragMove=()=>{this.C58_state.type},this.B3D_onDragEnd=()=>{1===this.C58_state.type&&(this.C58_state.animation.stop(),this.C58_state={type:0},this.EB1_stopRotate(),this.EC0_stopTilt())},this.FE0_onAnimationStep=t=>{if(1!==this.C58_state.type)return t;const e=C.lu(this.C58_state.previousPoint,this.D82_dragger.pointerPosition);this.C58_state.previousPoint=this.D82_dragger.pointerPosition;const i=this.rotationAllowed?Math.PI*e.x/this.D86_map.size.x:0,s=this.tiltAllowed?Math.PI*e.y/this.D86_map.size.y:0;return i&&!this.D95_isRotateStartEmitted&&(this._emit("rotateStart"),this.D95_isRotateStartEmitted=!0),s&&!this.EA9_isTiltStartEmitted&&(this._emit("tiltStart"),this.EA9_isTiltStartEmitted=!0),Object.assign(Object.assign({},t),{azimuth:t.azimuth+i,tilt:t.tilt+s})},this.D86_map=t,this.D82_dragger=e,this.A13_draggerSubscription=this.D82_dragger.on("dragStart",this.EBD_onDragStart).on("dragMove",this.C5F_onDragMove).on("dragEnd",this.B3D_onDragEnd),this.enable()}get isInAction(){return 1===this.C58_state.type}enable(){this.C58_state={type:0}}disable(){this.stop(),this.C58_state={type:2}}stop(){1===this.C58_state.type&&(this.C58_state.animation.stop(),this.C58_state={type:0},this.EB1_stopRotate(),this.EC0_stopTilt())}destroy(){this.disable(),this.A13_draggerSubscription.offAll()}EB1_stopRotate(){this.D95_isRotateStartEmitted&&(this._emit("rotateEnd"),this.D95_isRotateStartEmitted=!1)}EC0_stopTilt(){this.EA9_isTiltStartEmitted&&(this._emit("tiltEnd"),this.EA9_isTiltStartEmitted=!1)}}const we=18*y.Z;class je extends((0,_.GA)().with()){constructor(t,e){super(),this.B29_subscriptions=[],this.C5A_zoomStrategy="zoomToPointer",this.FF1_userEnabled=[],this.C76_mapEnabledRotation=!0,this.C52_restoreDrag=()=>{-1!==this.FF1_userEnabled.indexOf("drag")&&this.drag.enable()},this.B29_deviceEventsFilter=({target:e})=>{const i=e instanceof Element?t.findFeatureByElement(e):null;return Boolean(null==i?void 0:i.feature.blockBehaviors)};const i=function(t,e){let i=Gt.get(t);return i&&!i.destroyed||(i=Ot()?new Yt(t,e):new Ut(t,e),Gt.set(t,i)),i}(t.container,{filter:this.B29_deviceEventsFilter});this.D86_map=t;const o="snap"===this.D86_map.effectiveZoomRounding;this.C67_zoomPointSrc=()=>{if("zoomToCenter"===this.C5A_zoomStrategy){const[t,e]=this.D86_map.center,i=this.D86_map.projection.toWorldCoordinates([t,e]);return(0,s.k6)(i,this.D86_map)}const e=i.pointerPosition,o=t.container.getBoundingClientRect();return{x:e.x-o.left,y:e.y-o.top}},this.D8F_leftButtonDragger=new Vt(i),this.D88_rightButtonDragger=new Vt(i,{listenToButtons:new Set([jt.SECONDARY])}),this.magnifier=new xe(t,this.D88_rightButtonDragger,o),this.FCE_proxyEvents(this.magnifier,"magnifier",["selectionStart","selectionEnd"]),this.drag=new Me(t,this.D8F_leftButtonDragger),this.FCE_proxyEvents(this.drag,"drag",["dragStart","dragEnd"]),this.dblClick=new ve(t,200,this.C67_zoomPointSrc),this.FCE_proxyEvents(this.dblClick,"dblClick",["zoomStart","zoomEnd"]),this.magnifier.disable();const n={zoomDuration:200,rotateDuration:200,rotateThreshold:we,tiltDuration:200,getZoomStrategy:()=>this.C5A_zoomStrategy,getZoomPointSrc:this.C67_zoomPointSrc,snapToRound:o,tiltRange:this.D86_map.tiltRange};this.FCF_twoFingersGesture=new $t(i),this.pinchZoom=new Ae(t,this.FCF_twoFingersGesture,n),this.FCE_proxyEvents(this.pinchZoom,"pinchZoom",["zoomStart","zoomEnd"]),this.FCE_proxyEvents(this.pinchZoom,"panTilt",["tiltStart","tiltEnd"]);const r=this.pinchZoom.on("zoomStart",(()=>{"zoomToCenter"===this.C5A_zoomStrategy&&this.drag.disable()})).on("zoomEnd",this.C52_restoreDrag).on("tiltStart",(()=>this.drag.disable())).on("tiltEnd",this.C52_restoreDrag);this.B29_subscriptions.push(r),this.AB4_wheelDevice=new te(this.D86_map.container,{filter:this.B29_deviceEventsFilter}),this.DA1_roundScrollZoom=new me(this.D86_map,this.AB4_wheelDevice,this.C67_zoomPointSrc,200),this.FCE_proxyEvents(this.DA1_roundScrollZoom,"scrollZoom",["zoomStart","zoomEnd"]),this.B2C_smoothScrollZoom=new Ee(this.D86_map,this.AB4_wheelDevice,this.C67_zoomPointSrc),this.FCE_proxyEvents(this.B2C_smoothScrollZoom,"scrollZoom",["zoomStart","zoomEnd"]),this.oneFingerZoom=new Se(t,i,this.D8F_leftButtonDragger,this.C5A_zoomStrategy),this.FCE_proxyEvents(this.oneFingerZoom,"oneFingerZoom",["zoomStart","zoomEnd"]);const a=this.oneFingerZoom.on("zoomStart",(()=>this.drag.disable())).on("zoomEnd",this.C52_restoreDrag);this.B29_subscriptions.push(a);const h=new Vt(i,{listenToButtons:new Set([jt.CTRL_PRIMARY,jt.CMD_PRIMARY])});this.rotate=new be(this.D86_map,h),this.FCE_proxyEvents(this.rotate,"mouseRotate",["rotateStart","rotateEnd"]),this.FCE_proxyEvents(this.rotate,"mouseTilt",["tiltStart","tiltEnd"]),this.C5B_behaviorsRegistry={drag:this.drag,pinchZoom:this.pinchZoom,scrollZoom:o?this.DA1_roundScrollZoom:this.B2C_smoothScrollZoom,dblClick:this.dblClick,magnifier:this.magnifier,oneFingerZoom:this.oneFingerZoom,mouseRotate:!1,mouseTilt:!1,pinchRotate:!1,panTilt:!1},this.setEnabled(e),this._updateZoomRounding()}get isInAction(){for(const t of Object.keys(this.C5B_behaviorsRegistry))if("pinchRotate"!==t&&"panTilt"!==t&&"mouseRotate"!==t&&"mouseTilt"!==t&&this.C5B_behaviorsRegistry[t].isInAction)return!0;return!1}get zoomStrategy(){return this.C5A_zoomStrategy}destroy(){this.B29_subscriptions.forEach((t=>t.offAll())),this.drag.destroy(),this.pinchZoom.destroy(),this.dblClick.destroy(),this.magnifier.destroy(),this.oneFingerZoom.destroy(),this.rotate.destroy(),this.DA1_roundScrollZoom.destroy(),this.B2C_smoothScrollZoom.destroy(),this.D8F_leftButtonDragger.destroy(),this.D88_rightButtonDragger.destroy(),this.FCF_twoFingersGesture.destroy(),this.AB4_wheelDevice.destroy()}setEnabled(t){this.FF1_userEnabled.splice(0,1/0,...t);for(const e of Object.keys(this.C5B_behaviorsRegistry))this.D83_setEnabledSingle(e,-1!==t.indexOf(e))}setZoomStrategy(t){this.C5A_zoomStrategy=t,this.oneFingerZoom.zoomStrategy=t}mapToggleRotation(t){this.C76_mapEnabledRotation=t,this.setEnabled(this.FF1_userEnabled)}_updateZoomRounding(){const t="snap"===this.D86_map.effectiveZoomRounding;this.magnifier.snapToRound=t,this.pinchZoom.snapToRound=t,t?(this.DA1_roundScrollZoom.enable(),this.B2C_smoothScrollZoom.disable(),this.C5B_behaviorsRegistry.scrollZoom=this.DA1_roundScrollZoom):(this.DA1_roundScrollZoom.disable(),this.B2C_smoothScrollZoom.enable(),this.C5B_behaviorsRegistry.scrollZoom=this.B2C_smoothScrollZoom)}D83_setEnabledSingle(t,e){"pinchRotate"===t?this.C5B_behaviorsRegistry.pinchZoom.rotationAllowed=this.C76_mapEnabledRotation&&e:"panTilt"===t?this.C5B_behaviorsRegistry.pinchZoom.tiltAllowed=this.C76_mapEnabledRotation&&e:"mouseRotate"===t?this.rotate.rotationAllowed=this.C76_mapEnabledRotation&&e:"mouseTilt"===t?this.rotate.tiltAllowed=this.C76_mapEnabledRotation&&e:e?this.C5B_behaviorsRegistry[t].enable():this.C5B_behaviorsRegistry[t].disable(),"scrollZoom"===t&&(e?this.AB4_wheelDevice.enable():this.AB4_wheelDevice.disable())}FCE_proxyEvents(t,e,i){this.B29_subscriptions.push(t.on(i[0],(()=>this._emit("actionStart",e))).on(i[1],(()=>this._emit("actionEnd",e))))}}var Le=i(24055),Te=i(83749);class ze extends((0,_.GA)().with()){constructor(){super(...arguments),this.element=(0,W.E)()}getLayerReadyState(){}destroy(){}update(){}resize(){}setLayers(){}setObjectFilters(){}setInvisibleCollidingPrimitives(){}findObjectInPosition(){return null}findObjectInPositionEx(){return{layers:[]}}preloadHotspotsInPoint(){}preloadHotspotsForViewport(){}setDataSources(){}getIndoorPlans(){return null}getVisibleObjects(){return null}getTile3dState(){return null}setObjectHighlight(){}setTileContentClippingGeometry(){}get fov(){return X.d$}}const Be={min:0,max:50*y.Z,expansion:10*y.Z};class Fe{constructor(t,e,i,s){this.B2F_dataSources={},this.D9E_layers=new Map,this.FEC_onMouseEnter=t=>{var e;if("feature"===t.type){const i=null===(e=this.B2F_dataSources[t.source].features.get(t.feature.id))||void 0===e?void 0:e.style.cursor;void 0!==i&&(void 0===this.D8D_prevCursor&&(this.D8D_prevCursor=this.C6C_element.style.cursor),this.C6C_element.style.cursor=i)}},this.B4D_onMouseLeave=()=>{void 0!==this.D8D_prevCursor&&(this.C6C_element.style.cursor=this.D8D_prevCursor,this.D8D_prevCursor=void 0)},this.D86_map=t,this.C6C_element=e,this.setDataSources(i),this.setLayers(s)}destroy(){this.D9E_layers.forEach(((t,e)=>this.C69_unsubscribeFromLayerEvents(e)))}setDataSources(t){this.B2F_dataSources=Object.assign({},t)}setLayers(t){const e=new Set;for(const i of t)i.source in this.B2F_dataSources&&e.add(i.id);const{result:i}=(0,N.B)(this.D9E_layers,e,(t=>this.D7D_subscribeToLayerEvents(t)),((t,e)=>this.C69_unsubscribeFromLayerEvents(e)));this.D9E_layers=i}D7D_subscribeToLayerEvents(t){this.D86_map.events.on("mouseenter",t,this.FEC_onMouseEnter),this.D86_map.events.on("mouseleave",t,this.B4D_onMouseLeave)}C69_unsubscribeFromLayerEvents(t){this.D86_map.events.off("mouseenter",t,this.FEC_onMouseEnter),this.D86_map.events.off("mouseleave",t,this.B4D_onMouseLeave)}}function Ie(t,e,i){const s=C.G7(f.B.pixelsToWorld(e,i),(t=>(0,v.q)(t,-1,1-1e-15)));return t.fromWorldCoordinates(s)}function Ne(t,e,i){const s=t.toWorldCoordinates(e);return f.B.worldToPixels(s,i)}function Oe(t,e,i){const s=Ne(t,e[0],i),o=Ne(t,e[1],i),n=f.B.getWorldPixelSize(i),r=[[s.x,s.y],[o.x,o.y]];return s.x>o.x&&(r[0][0]=s.x,r[1][0]=o.x+n),s.y>o.y&&(r[0][1]=o.y,r[1][1]=s.y),r}function Re(t,e){return{x:Math.max(t.x-(e?e[1]+e[3]:0),1),y:Math.max(t.y-(e?e[0]+e[2]:0),1)}}function Pe(t,e,i,s,o=!0,n=(0,u.oF)()){const r=function(t,e,i,s,o){const[[n,r],[a,h]]=Oe(t,e,0),l=Math.max(Math.abs(a-n),1e-10),c=Math.max(Math.abs(h-r),1e-10),d=(0,v.q)(Math.min(Math.log2(i.x/l),Math.log2(i.y/c)),o.min,o.max);return s?Math.floor(d+1e-6):d}(t,e,Re(i,s),o,n),a=function(t,e,i){const[[s,o],[n,r]]=Oe(t,e,i);return Ie(t,{x:(s+n)/2,y:(o+r)/2},i)}(t,e,r);return{center:a,zoom:r}}const ke={x:0,y:0},Ye=[25,25,25,25],Ze={pointer:{start:["pointerdown"],move:["pointermove"],end:["pointerup"]},touchMouse:{start:["touchstart","mousedown"],move:["touchmove","mousemove"],end:["touchend","mouseup"]}};class Ue extends((0,_.GA)().with()){constructor(t,e={tremorPixels:3}){super(),this._map=t,this.FF2_options=e,this.D84_filters=new Set,this.A48_draggableObjectPointer=null,this.EAA_startDiff=null,this.FE6_startCursorPosition=null,this.FD3_pointerPosition=ke,this.C58_state=0,this.FDF_mapCenterOffsetWcs=ke,this.A12_eventsNames=Ot()?Ze.pointer:Ze.touchMouse,this.EBD_onDragStart=(t,{screenCoordinates:e})=>{if(!t||"feature"!==t.type)return;const i=this.D8F_draggableObject(t);if(!this.B39_isDraggable(i))return;this.C58_state=1,this.A48_draggableObjectPointer=Object.assign({},t),this.FE6_startCursorPosition=e,this.FD3_pointerPosition={x:e[0],y:e[1]};const o=We(i),n=(0,s.XA)({x:e[0],y:e[1]},this._map);this.EAA_startDiff={world:C.lu(o,n),pixels:C.lu(f.B.worldToPixels(o,this._map.zoom),f.B.worldToPixels(n,this._map.zoom))},this.A12_eventsNames.move.forEach((t=>{this._map.events.on(t,"any",this.C5D_onDrag)})),this.A12_eventsNames.end.forEach((t=>{window.addEventListener(t,this.B3D_onDragEnd)}))},this.C5D_onDrag=(t,{screenCoordinates:e})=>{ymaps3.strictMode&&(0,A.h)(null!==this.A48_draggableObjectPointer,"The dragged object must exist"),ymaps3.strictMode&&(0,A.h)(null!==this.FE6_startCursorPosition,"Cursor start coordinates must be defined");const i=this.D8F_draggableObject(this.A48_draggableObjectPointer);if(!i)return this.B3D_onDragEnd();this.FD3_pointerPosition={x:e[0],y:e[1]};const o=(0,s.XA)(this.FD3_pointerPosition,this._map),n=this.DA1_getNewGeometry(o,i);if(1===this.C58_state){if(Math.max(Math.abs(this.FE6_startCursorPosition[0]-e[0]),Math.abs(this.FE6_startCursorPosition[1]-e[1]))>this.FF2_options.tremorPixels){!1!==this._emit("dragStart",{object:i,newGeometry:n})&&(this.C58_state=2,this._map.on("stateChanged",this.D7F_onMapChanged))}}else{this.FE6_startCursorPosition=e;!1!==this._emit("dragMove",{object:i,newGeometry:n})&&(this.D8F_updateCoordinates(n,i),this.D8C_dragMapFollowerHandler())}},this.D7F_onMapChanged=()=>{this.C5D_onDrag(null,{screenCoordinates:[this.FD3_pointerPosition.x,this.FD3_pointerPosition.y]})},this.B3D_onDragEnd=()=>{if(0!==this.C58_state){if(this.ECB_stopMapDragFollowAnimation(),this.A12_eventsNames.move.forEach((t=>{this._map.events.off(t,"any",this.C5D_onDrag)})),this.A12_eventsNames.end.forEach((t=>{window.removeEventListener(t,this.B3D_onDragEnd)})),this._map.offSingle("stateChanged",this.D7F_onMapChanged),2===this.C58_state){const t=this.D8F_draggableObject(this.A48_draggableObjectPointer);t&&this._emit("dragEnd",{object:t,newGeometry:t.geometry})}this.A48_draggableObjectPointer=null,this.C58_state=0}},this.A12_eventsNames.start.forEach((t=>{this._map.events.on(t,"any",this.EBD_onDragStart)}))}destroy(){this.A12_eventsNames.start.forEach((t=>{this._map.events.off(t,"any",this.EBD_onDragStart)})),this.B3D_onDragEnd(),this.ECB_stopMapDragFollowAnimation()}get filters(){const t=[];return this.D84_filters.forEach((e=>{t.push(e)})),t}get isDragging(){return this.C58_state>0}addFilter(t){return this.D84_filters.add(t),this}removeFilter(t){return this.D84_filters.delete(t),this}D8F_draggableObject(t){return t?"feature"===t.type?this._map.getFeatureInWorldCoordinatesById(t.source,t.feature.id):void(0,x._y)(new Error(`Need implementation for type: ${t.type}`)):null}B39_isDraggable(t){if(!t||!this.D84_filters.size)return!1;let e=!1;return this.D84_filters.forEach((i=>{i(t)&&(e=!0)})),e}DA1_getNewGeometry(t,e){if(ymaps3.strictMode&&(0,A.h)(null!==this.A48_draggableObjectPointer,"The dragged object must exist"),ymaps3.strictMode&&(0,A.h)(null!==this.EAA_startDiff,"Need difference between cursor coordinates and object start"),ymaps3.strictMode&&(0,A.h)("Feature"===e.type,`Need implementation for type: ${e.type}`),"Point"===e.geometry.type)return this.A1D_calculateWorldWithPixelFixedOffset(t);const i=C.lu(We(e),C.IH(t,this.EAA_startDiff.world));return(0,p.ZE)(e.geometry,(t=>C.lu(t,i)))}D8F_updateCoordinates(t,e){ymaps3.strictMode&&(0,A.h)(null!==this.A48_draggableObjectPointer,"The dragged object must exist"),ymaps3.strictMode&&(0,A.h)(null!==this.EAA_startDiff,"Need difference between cursor coordinates and object start"),ymaps3.strictMode&&(0,A.h)("Feature"===e.type,`Need implementation for type: ${e.type}`),e.geometry.coordinates=t.coordinates,this._map.updateInWorldCoordinatesFeature(this.A48_draggableObjectPointer.source,e)}A1D_calculateWorldWithPixelFixedOffset(t){ymaps3.strictMode&&(0,A.h)(null!==this.EAA_startDiff,"Need difference between cursor coordinates and object start");const e=f.B.worldToPixels(t,this._map.zoom);return{type:"Point",coordinates:f.B.pixelsToWorld(C.IH(e,this.EAA_startDiff.pixels),this._map.zoom)}}D8C_dragMapFollowerHandler(){const t=this.D8F_draggableObject(this.A48_draggableObjectPointer);if(!t||!t.mapFollowsOnDrag)return;const e=this._map;if(!e||!this.isDragging)return void this.FEA_setMapCenterOffsetWcs(ke);const i="boolean"!=typeof t.mapFollowsOnDrag&&t.mapFollowsOnDrag.activeZoneMargin?[...t.mapFollowsOnDrag.activeZoneMargin]:Ye.slice();e.margin&&(i[0]+=e.margin[0],i[1]+=e.margin[1],i[2]+=e.margin[2],i[3]+=e.margin[3]);const s=e.container.getBoundingClientRect(),o={x:s.width,y:s.height};o.x-=i[1]+i[3],o.y-=i[0]+i[2];const n=function(t,e,i){const s=C.ZO(t,2),o=C.lu(i,e);if(o.x>-s.x&&o.x<s.x&&o.y>-s.y&&o.y<s.y)return{x:0,y:0};const n={x:0,y:0};if(0===o.x)n.x=0,n.y=s.y*Math.sign(o.y);else{const t=o.y/o.x,e=t*s.x;if(e>=-s.y&&e<=s.y){const t=Math.sign(o.x);n.x=s.x*t,n.y=e*t}else{const e=1/t*s.y,i=Math.sign(o.y);n.x=e*i,n.y=s.y*i}}return C.lu(o,n)}(o,C.IH(C.ZO(o,2),{x:i[3],y:i[0]}),C.lu(this.FD3_pointerPosition,{x:s.left,y:s.top}));C.ZO(n,2,n);const r=C.kE(n);r>120&&C.Sm(n,120/r,n),this.FEA_setMapCenterOffsetWcs(f.B.convertPixelSizeToWorldSize(n,e.zoom))}DA1_animateMap(){if(!this._hasOffset||!this.isDragging)return;const t=this._map,e=this.D8F_draggableObject(this.A48_draggableObjectPointer);e&&(this.B42_mapDragFollowHandler=this._map.animate((()=>(this.D8F_updateCoordinates((0,p.ZE)(e.geometry,(t=>C.IH(t,this.FDF_mapCenterOffsetWcs))),e),{worldCenter:C.IH(this.FDF_mapCenterOffsetWcs,t.worldCenter),azimuth:t.azimuth,zoom:t.zoom,tilt:t.tilt,fov:t.fov}))))}ECB_stopMapDragFollowAnimation(){var t;(null===(t=this.B42_mapDragFollowHandler)||void 0===t?void 0:t.isRunning)&&this.B42_mapDragFollowHandler.stop()}FEA_setMapCenterOffsetWcs({x:t,y:e}){var i;this.FDF_mapCenterOffsetWcs.x===t&&this.FDF_mapCenterOffsetWcs.y===e||(this.FDF_mapCenterOffsetWcs={x:t,y:e},null===(i=this.ECB_stopMapDragFollowAnimation)||void 0===i||i.call(this),this.DA1_animateMap())}get _hasOffset(){return 0!==this.FDF_mapCenterOffsetWcs.x||0!==this.FDF_mapCenterOffsetWcs.y}}function We(t){switch(ymaps3.strictMode&&(0,A.h)("Feature"===t.type,`Need implementation for type: ${t.type}`),t.geometry.type){case"Point":return t.geometry.coordinates;case"LineString":return t.geometry.coordinates[0];case"Polygon":case"MultiLineString":return t.geometry.coordinates[0][0];case"MultiPolygon":return t.geometry.coordinates[0][0][0]}}var Ge=i(45852);const Qe=Math.round,He=Math.round,Ve="ymaps3x0--main-engine-container",Xe="ymaps3x0--hide";class $e extends((0,_.GA)().with()){get projection(){return this.EA3_projection}constructor(t){super(),this.A15_renderLoop=new m.d,this.B2F_dataSources={},this.D84_filters=new Set,this.C5F_invisibleCollidingPrimitives=new Map,this.D9A_collidingGeometriesBySource=new Map,this.FEF_topRasterLayers=[],this.D8D_mainLayers=[],this.EBE_vectorFailed=!1,this.C74_featuresByDataSource=new Map,this.D85_cameraOptions={enabledTiltTransition:!1},this.EBE_destroyed=!1,this.container=(0,W.E)("ymaps3x0--map"),this.C6F_onVectorError=t=>{this.EBE_vectorFailed=!0,this.B3C_applyMode(),this._emit("vectorError"),(0,x.H)(t)};const{element:e,dataSources:i,topRasterLayers:s,mainLayers:o,mode:n,margin:r,tiltRange:a,zoomRange:h,zoomRounding:l="auto",behaviors:c=["drag","scrollZoom","pinchZoom","dblClick","magnifier"],projection:d=Le.L,worldOptions:_={cycledX:!0,cycledY:!1},restrictMapArea:p=!1,eventObjectsFilter:y,experiments:E={},nonRotatableRasterSources:f=[],metricsTransport:C=(()=>{}),tilt:D=0,azimuth:M=0}=t;var v;v=C,B||(B=v),this.EC2_experiments=E,this.EA3_projection=d,this.worldOptions=_,this.B2B_restrictMapArea=p,this.B30_worldRestrictMapArea=this.B2B_restrictMapArea&&this.B2B_restrictMapArea.map((t=>d.toWorldCoordinates(t))),this.B2D_nonRotatableRasterSources=new Set(f),this.tiltRange=null!=a?a:Be,this.FF1_topEngineContainer=(0,W.E)("ymaps3x0--top-engine-container"),this.FEE_mainEngineContainer=(0,W.E)(Ve),this.container.appendChild(this.FEE_mainEngineContainer),this.container.appendChild(this.FF1_topEngineContainer),e.appendChild(this.container);const{size:A,offset:S}=qe(this.container.parentElement);this.C5B_size=A,this.FD6_offset=S,this.B2F_resizeContainer(),this.D7B_zoomRange=h?Object.assign({},h):(0,u.oF)(),this.EB6_zoomRounding=l,"raster"===n&&(this.FCE_effectiveZoomRounding="snap"),this.A41_margin=r;const{bounds:b,center:w,zoom:j}=t;this.EA2_camera=this.C6F_createCamera(b,w,j,M,D),this.C69_effectiveMode=null,this.D8E_desiredMode=n,this.EC3_dataSourceDescriptions={};for(const t of Object.keys(i)){this.EC3_dataSourceDescriptions[t]=(0,g.wo)(i[t]);const e=this.B36_createDataSource(this.EC3_dataSourceDescriptions[t]);null!==e&&(this.B2F_dataSources[t]=e)}Ke(this.D7B_zoomRange,this.EC3_dataSourceDescriptions),this.D8D_mainLayers=Je(o,i),this.FEF_topRasterLayers=Je(s,i),this.D93_assertLayersIsValid(this.FEF_topRasterLayers,this.D8D_mainLayers);const{topEngine:L,eventGroup:T}=this.C72_createTopEngine();this.AF9_topRasterEngine=L,this.A15_topRasterEngineEventGroup=T,this.B3C_applyMode(),this.events=new Te.Q(this,y),this.behaviors=new je(this,c),this.dragger=new Ue(this),this.dragger.addFilter((t=>"Feature"===(null==t?void 0:t.type)&&Boolean(t.draggable))),this.EB2_subscribeToDomEvents(),this.EAE_handleRotatability(),this.B44_update(),this.on("ready",(()=>{this.AF9_topRasterEngine.animateFirstScreen=!0,"raster"===this.EA8_mainEngine.type&&(this.EA8_mainEngine.engine.animateFirstScreen=!0)}))}C6F_createCamera(t,e,i,s=0,o=0){t&&({center:e,zoom:i}=Pe(this.projection,t,this.size,this.margin,"snap"===this.effectiveZoomRounding,this.zoomRange));const n=D(this.projection,e,i,s,this.margin),r=f.B.restrictToZeroWorld(n,this.worldOptions);return this.EB9_restrictCamera({zoom:i,worldCenter:r,azimuth:s,tilt:o})}get size(){return this.C5B_size}get offset(){return this.FD6_offset}get center(){return this.calculateCenter(this.EA2_camera.worldCenter)}get worldCenter(){return this.EA2_camera.worldCenter}get zoom(){return this.EA2_camera.zoom}get bounds(){return function(t,e,i,s,o){const n=Re(s,o),r=Ne(t,e,i),a={x:r.x-n.x/2,y:r.y-n.y/2},h={x:r.x+n.x/2,y:r.y+n.y/2};return[Ie(t,a,i),Ie(t,h,i)]}(this.projection,this.center,this.zoom,this.size,this.margin)}get tilt(){return this.EA2_camera.tilt}get azimuth(){return this.EA2_camera.azimuth}get camera(){return this.EA2_camera}get fov(){var t,e;return null!==(e=null===(t=this.EA8_mainEngine)||void 0===t?void 0:t.engine.fov)&&void 0!==e?e:E}get zoomRange(){let t=Object.assign({},this.D7B_zoomRange);const e=[...this.FEF_topRasterLayers,...this.D8D_mainLayers];for(const i of e)if(i.source&&i.source!==j){const e=this.EC3_dataSourceDescriptions[i.source];"tile"===e.type&&e.clampMapZoom&&(t=(0,u.Hx)(t,e.zoomRange||this.D7B_zoomRange))}return t}get destroyed(){return this.EBE_destroyed}get isInAction(){return Boolean(this.FE1_animateHandler&&this.FE1_animateHandler.isRunning||this.behaviors&&this.behaviors.isInAction||this.D92_animateHandlerAzimuth&&this.D92_animateHandlerAzimuth.isRunning||this.D86_animateHandlerTilt&&this.D86_animateHandlerTilt.isRunning)}get restrictMapArea(){return this.B2B_restrictMapArea}get zoomRounding(){return this.EB6_zoomRounding}setZoomRounding(t){t!==this.EB6_zoomRounding&&(this.EB6_zoomRounding=t,this.FD5_chooseEffectiveZoomRounding())}get effectiveZoomRounding(){return this.FCE_effectiveZoomRounding}addObjectFilter(t){this.D84_filters.add(t),this.FD4_applyFilters()}removeObjectFilter(t){this.D84_filters.delete(t),this.FD4_applyFilters()}getInvisibleCollidingPrimitives(){return this.C5F_invisibleCollidingPrimitives}addInvisibleCollidingPrimitives(t){t.forEach(((t,e)=>{this.C5F_invisibleCollidingPrimitives.set(e,{anchor:this.projection.toWorldCoordinates(t.anchor),rect:t.rect})})),this.B36_applyInvisibleCollidingPrimitives()}removeInvisibleCollidingPrimitives(t){t.forEach((t=>{this.C5F_invisibleCollidingPrimitives.delete(t)})),this.B36_applyInvisibleCollidingPrimitives()}setObjectHighlight(t){this.EA8_mainEngine.engine.setObjectHighlight(t),"transitionToVector"===this.EA8_mainEngine.type&&this.EA8_mainEngine.vector.engine.setObjectHighlight(t)}calculateCenter(t){return function(t,e,i,s,o){if(o){const t=M(o,i,s);e=C.IH(e,t)}return t.fromWorldCoordinates(e)}(this.projection,t,this.EA2_camera.zoom,this.EA2_camera.azimuth,this.A41_margin)}setProjection(t){this.EA3_projection=t,this.B44_update()}setCamera(t){const{worldCenter:e,zoom:i}=t;isFinite(e.x)&&isFinite(e.y)||(0,x._y)(new Error("Trying to set non-finite center")),isFinite(i)||(0,x._y)(new Error("Trying to set non-finite zoom")),this.EA2_camera=this.EB9_restrictCamera(Object.assign(Object.assign({},t),{zoom:i})),this.B44_update()}animate(t){const e=this.A15_renderLoop.animate((e=>{const i=this.EA2_camera,s=t(i,e);s!==i&&this.setCamera(s)}));return e.complete.then((()=>this._emit("update"))),e}animateForDuration(t,e){let i=0;const s=this.A15_renderLoop.animateForDuration((t=>{const s=t-i;i=t;const o=this.EA2_camera,n=e(o,t,s);n!==o&&this.setCamera(n)}),t);return s.complete.then((()=>this._emit("update"))),s}setZoomRange(t){Ke(t,this.EC3_dataSourceDescriptions),this.D7B_zoomRange=Object.assign({},t),this._emit("zoomRangeChange")}getMode(){return this.D8E_desiredMode}getEffectiveMode(){return this.C69_effectiveMode}setMode(t){this.D8E_desiredMode!==t&&(this.D8E_desiredMode=t,this.B3C_applyMode())}get margin(){if(this.A41_margin)return this.A41_margin}setMargin(t){this.A41_margin=t,this._emit("update")}setCenter(t){this.setCenterAndZoom(t,this.zoom)}setCenterAndZoom(t,e){const i=D(this.projection,t,e,this.EA2_camera.azimuth,this.A41_margin);C.pU(i,this.EA2_camera.worldCenter,X.YQ)&&e===this.EA2_camera.zoom||this.setCamera(Object.assign(Object.assign({},this.EA2_camera),{worldCenter:i,zoom:e,azimuth:0,tilt:0}))}setZoom(t){this.setCenterAndZoom(this.center,t)}setBounds(t){const{center:e,zoom:i}=Pe(this.projection,t,this.size,this.margin,"snap"===this.effectiveZoomRounding,this.zoomRange);this.setCenterAndZoom(e,i)}setRestrictMapArea(t){this.B2B_restrictMapArea=t,this.B30_worldRestrictMapArea=this.B2B_restrictMapArea&&this.B2B_restrictMapArea.map((t=>this.projection.toWorldCoordinates(t)))}animateCenterAndZoom(t,e,i,s){this.FE1_animateHandler&&this.FE1_animateHandler.isRunning&&this.FE1_animateHandler.stop();const o=this.zoomRange,n=(0,v.q)(e,o.min,o.max),r=D(this.projection,t,e,this.EA2_camera.azimuth,this.A41_margin),a=f.B.moveCloseToCenter(r,this.EA2_camera.worldCenter);return this.FE1_animateHandler=le(this,a,n,i,s),this.FE1_animateHandler.complete}animateTilt(t,e,i){return this.D86_animateHandlerTilt&&this.D86_animateHandlerTilt.isRunning&&this.D86_animateHandlerTilt.stop(),e?(this.D86_animateHandlerTilt=_e(this,null!=t?t:0,e,i),this.D86_animateHandlerTilt.complete):(this.setCamera(Object.assign(Object.assign({},this.camera),{tilt:t})),Promise.resolve())}animateAzimuth(t,e,i){return this.D92_animateHandlerAzimuth&&this.D92_animateHandlerAzimuth.isRunning&&this.D92_animateHandlerAzimuth.stop(),e?(this.D92_animateHandlerAzimuth=ue(this,t-this.azimuth,t,e,i),this.D92_animateHandlerAzimuth.complete):(this.setCamera(Object.assign(Object.assign({},this.camera),{azimuth:t})),Promise.resolve())}getLayerReadyState(t){const e=this.AF9_topRasterEngine.getLayerReadyState(t),i=this.EA8_mainEngine.engine.getLayerReadyState(t);return e||i}getLayerState(t,e,i){i||(i="vector"===this.FE6_getEffectiveMode()?"vector":"raster");const s=this.EA8_mainEngine;if(s.type!==i&&"transitionToVector"!==s.type&&"preVector"!==s.type)return;let o=s.engine;return"transitionToVector"===s.type&&"vector"===i&&(o=s.vector.engine),o.getLayerReadyState(t,e)}destroy(){this.EBE_destroyed||(this._emit("beforeDestroy"),this.dragger.destroy(),this.events.destroy(),this.behaviors.destroy(),this.D95_destroyMainEngine(),this.A15_topRasterEngineEventGroup.offAll(),this.AF9_topRasterEngine.destroy(),this.container.removeChild(this.FF1_topEngineContainer),this.container.removeChild(this.FEE_mainEngineContainer),this.container.parentElement.removeChild(this.container),this.EBE_destroyed=!0)}resize(t=!1,e=!1){const{size:i,offset:s}=qe(this.container.parentElement);if(C.wy(i,this.C5B_size))return;let o=this.EA2_camera.worldCenter;if(t){const t=C.ZO(C.lu(i,this.C5B_size),2);C.U1(t,this.EA2_camera.azimuth,t);const e=f.B.convertPixelSizeToWorldSize({x:t.x,y:-t.y},this.EA2_camera.zoom);o=C.lu(this.EA2_camera.worldCenter,e)}const n=f.B.convertPixelSizeToWorldSize(C.ZO(i,2),this.EA2_camera.zoom);o={x:o.x,y:(0,v.q)(o.y,-1-n.y,1+n.y)},C.wy(o,this.EA2_camera.worldCenter)||this.setCamera(Object.assign(Object.assign({},this.EA2_camera),{worldCenter:o})),this.C5B_size=i,this.FD6_offset=s,this.B2F_resizeContainer(),this.AF9_topRasterEngine.resize(this.C5B_size),this.EA8_mainEngine.engine.resize(this.C5B_size),"transitionToVector"===this.EA8_mainEngine.type&&this.EA8_mainEngine.vector.engine.resize(this.C5B_size),this._emit("resize"),e?this.renderImmediately():this.A15_renderLoop.update()}B2F_resizeContainer(){this.container.style.width=this.C5B_size.x+"px",this.container.style.height=this.C5B_size.y+"px"}addGroup(t,e,i={},s=yt.oR){this.D95_getFeaturesDataSource(t).addGroup(e,i,s)}removeGroupAndChildren(t,e){this.D95_getFeaturesDataSource(t).removeGroupAndChildren(e)}addFeature(t,e,i={},s=yt.oR){const{feature:o,bbox:n}=this.B35_convertFeatureToWorld(e);this.D95_getFeaturesDataSource(t).addFeature(o,i,n,s),this.B39_getFeaturesForDataSource(t).set(e.id,e)}addFeatureInWorldCoordinates(t,e,i={},s=yt.oR){const{feature:o,bbox:n}=this.A97_convertFeatureToGeo(e);this.D95_getFeaturesDataSource(t).addFeature(e,i,n,s),this.B39_getFeaturesForDataSource(t).set(e.id,o)}getFeatureById(t,e){var i;const s=this.B39_getFeaturesForDataSource(t);return s.has(e)&&null!==(i=s.get(e))&&void 0!==i?i:null}getFeatureInWorldCoordinatesById(t,e){var i,s;return null!==(s=null===(i=this.D95_getFeaturesDataSource(t).getFeatureById(e))||void 0===i?void 0:i.feature)&&void 0!==s?s:null}removeFeatureById(t,e){this.D95_getFeaturesDataSource(t).removeFeatureById(e),this.B39_getFeaturesForDataSource(t).delete(e)}updateFeature(t,e,i){const{feature:s,bbox:o}=this.B35_convertFeatureToWorld(e);this.D95_getFeaturesDataSource(t).updateFeature(s,o,i),this.B39_getFeaturesForDataSource(t).set(e.id,e)}updateInWorldCoordinatesFeature(t,e,i){const{feature:s,bbox:o}=this.A97_convertFeatureToGeo(e);this.D95_getFeaturesDataSource(t).updateFeature(e,o,i),this.B39_getFeaturesForDataSource(t).set(e.id,s)}upsertFeature(t,e,i={},s=yt.oR){const o=this.D95_getFeaturesDataSource(t),{feature:n,bbox:r}=this.B35_convertFeatureToWorld(e);o.hasFeatureWithId(e.id)?(o.updateFeature(n,r,i),o.moveFeatureToGroup(e.id,s)):o.addFeature(n,i,r,s),this.B39_getFeaturesForDataSource(t).set(e.id,e)}moveFeatureToGroup(t,e,i=yt.oR){return this.D95_getFeaturesDataSource(t).moveFeatureToGroup(e,i)}hasFeature(t,e){return this.D95_getFeaturesDataSource(t).hasFeatureWithId(e)}addTile3d(t,e){this.EAA_getTile3dDataSource(t).addRootTile(e)}replaceTile3d(t,e){this.EAA_getTile3dDataSource(t).replaceRootTile(e)}removeTile3d(t,e){this.EAA_getTile3dDataSource(t).removeRootTile(e)}showTile3d(t,e){this.EAA_getTile3dDataSource(t).showRootTile(e)}hideTile3d(t,e){this.EAA_getTile3dDataSource(t).hideRootTile(e)}changeTile3dTextures(t,e,i){this.EAA_getTile3dDataSource(t).changeRootTileTextures(e,i)}getTile3dTexturesTiers(t,e){return this.EAA_getTile3dDataSource(t).getRootTileTexturesTiers(e)}getTile3dState(t,e){return"vector"===this.EA8_mainEngine.type?this.EA8_mainEngine.engine.getTile3dState(t,e):"transitionToVector"===this.EA8_mainEngine.type?this.EA8_mainEngine.vector.engine.getTile3dState(t,e):null}setTileContentClippingGeometry(t,e){var i,s;const o=this.C5E_getDataSourceById(t);if(ymaps3.strictMode&&(0,A.h)(o instanceof F.Nt,`"${t}" must be TileDataSource`),!e)return this.D9A_collidingGeometriesBySource.delete(t),void(null===(i=this.FEC_getVectorEngine())||void 0===i||i.setTileContentClippingGeometry(this.D9A_collidingGeometriesBySource));const n={type:"MultiPolygon",coordinates:("Polygon"===e.type?[e.coordinates]:e.coordinates).map((t=>t.map((t=>t.map((t=>this.EA3_projection.toWorldCoordinates(t)))))))};this.D9A_collidingGeometriesBySource.set(t,n),null===(s=this.FEC_getVectorEngine())||void 0===s||s.setTileContentClippingGeometry(this.D9A_collidingGeometriesBySource)}FEC_getVectorEngine(){return"vector"===this.EA8_mainEngine.type?this.EA8_mainEngine.engine:"transitionToVector"===this.EA8_mainEngine.type?this.EA8_mainEngine.vector.engine:null}setLayers({topRasterLayers:t,mainLayers:e}){t&&(this.FEF_topRasterLayers=Je(t,this.EC3_dataSourceDescriptions)),e&&(this.D8D_mainLayers=Je(e,this.EC3_dataSourceDescriptions)),this.D93_assertLayersIsValid(this.FEF_topRasterLayers,this.D8D_mainLayers),this.AF9_topRasterEngine.setLayers(this.FEF_topRasterLayers);"vector"===this.EA8_mainEngine.type&&this.EA8_mainEngine.initLayersTimer||this.B31_setMainEngineLayers(this.D8D_mainLayers),"transitionToVector"===this.EA8_mainEngine.type&&this.EA8_mainEngine.vector.setLayersAbortController&&this.EA8_mainEngine.vector.engine.setLayers(this.D8D_mainLayers),this.FD5_chooseEffectiveZoomRounding(),this.EAE_handleRotatability(),this._emit("update"),this._emit("copyrightsChange")}getLayers(){return{topRasterLayers:this.FEF_topRasterLayers.map(ti),mainLayers:this.D8D_mainLayers.map(ti)}}getLayersEx(){return{topRasterLayers:this.FEF_topRasterLayers.map((t=>Object.assign({},t))),mainLayers:this.D8D_mainLayers.map((t=>Object.assign({},t)))}}getDataSource(t){const e=this.EC3_dataSourceDescriptions[t];return e?(0,g.wo)(e):void 0}addDataSource(t,e){this.EC3_dataSourceDescriptions[t]=(0,g.wo)(e);const i=this.B36_createDataSource(this.EC3_dataSourceDescriptions[t]);null!==i&&(this.B2F_dataSources[t]=i),this.D80_setEngineDataSources(this.B2F_dataSources)}removeDataSource(t){[...this.D8D_mainLayers,...this.FEF_topRasterLayers].some((e=>e.source===t))&&(0,x._y)(new Error(`Can't remove, data source with id="${t} is used"`)),delete this.EC3_dataSourceDescriptions[t],delete this.B2F_dataSources[t],this.D80_setEngineDataSources(this.B2F_dataSources)}updateTileDataSource(t,e){const i=this.C56_getTileDataSource(t),s=(0,g.wo)(e);this.EC3_dataSourceDescriptions[t]=s,i.setSource(s),Ke(this.D7B_zoomRange,this.EC3_dataSourceDescriptions),this._emit("zoomRangeChange"),this._emit("copyrightsChange")}updateTile3dDataSource(t,e){const i=this.EAA_getTile3dDataSource(t),s=(0,g.wo)(e);i.setSource(s)}provideVectorMapEngineFactory(t){this.D9E_vectorMapEngineFactory=t,this._emit("vectorLoad"),"raster"!==this.D8E_desiredMode&&this.B3C_applyMode()}isVectorMapEngineFactoryProvided(){return Boolean(this.D9E_vectorMapEngineFactory)}findFeatureByElement(t){const e=this.AF9_topRasterEngine.findFeatureByElement(t);if(e){const t=this.B39_getFeaturesForDataSource(e.source).get(e.feature.id);return{type:"feature",layer:e.layer,source:e.source,feature:t}}return null}findObjectInWorldPosition(t){const e=this.AF9_topRasterEngine.findObjectInPosition(t)||this.EA8_mainEngine.engine.findObjectInPosition(t);return this.EBD_toMapObject(e)||null}findObjectInWorldPositionEx(t){const e=this.AF9_topRasterEngine.findObjectInPositionEx(t),i=e.layers.find((t=>t.object))?{layers:[]}:this.EA8_mainEngine.engine.findObjectInPositionEx(t);return{layers:[...e.layers.map((({layer:t,object:e})=>({layer:t,object:this.EBD_toMapObject(e)}))),...i.layers.map((({layer:t,object:e})=>({layer:t,object:this.EBD_toMapObject(e)})))]}}renderImmediately(t=m._.FULL){this.A15_renderLoop.renderImmediately(t)}preloadHotspotsInPoint(t){const e=f.B.restrictToZeroWorld(t,this.worldOptions);this.AF9_topRasterEngine.preloadHotspotsInPoint(e),this.EA8_mainEngine.engine.preloadHotspotsInPoint(e),"transitionToVector"===this.EA8_mainEngine.type&&this.EA8_mainEngine.vector.engine.preloadHotspotsInPoint(t)}preloadHotspotsForViewport(){this.AF9_topRasterEngine.preloadHotspotsForViewport(),this.EA8_mainEngine.engine.preloadHotspotsForViewport(),"transitionToVector"===this.EA8_mainEngine.type&&this.EA8_mainEngine.vector.engine.preloadHotspotsForViewport()}getIndoorPlans(){return"vector"===this.EA8_mainEngine.type?this.EA8_mainEngine.engine.getIndoorPlans():"transitionToVector"===this.EA8_mainEngine.type?this.EA8_mainEngine.vector.engine.getIndoorPlans():null}getVisibleObjects(t){return"vector"===this.EA8_mainEngine.type?this.EA8_mainEngine.engine.getVisibleObjects(t):"transitionToVector"===this.EA8_mainEngine.type?this.EA8_mainEngine.vector.engine.getVisibleObjects(t):null}B31_setMainEngineLayers(t){this.EA8_mainEngine.engine.setLayers(t),"vector"===this.EA8_mainEngine.type&&this.EA8_mainEngine.cursorController&&this.EA8_mainEngine.cursorController.setLayers(t)}D80_setEngineDataSources(t){this.AF9_topRasterEngine.setDataSources(t),this.EA8_mainEngine.engine.setDataSources(t),"transitionToVector"===this.EA8_mainEngine.type&&this.EA8_mainEngine.vector.engine.setDataSources(t),"vector"===this.EA8_mainEngine.type&&this.EA8_mainEngine.cursorController&&this.EA8_mainEngine.cursorController.setDataSources(t)}FE6_getEffectiveMode(){return"raster"===this.D8E_desiredMode||this.EBE_vectorFailed?"raster":this.D9E_vectorMapEngineFactory?"vector":"auto"===this.D8E_desiredMode?"raster":"vector"===this.D8E_desiredMode?this.EA8_mainEngine&&"preVector"!==this.EA8_mainEngine.type?"raster":"preVector":void(ymaps3.strictMode&&(0,A.h)(!1,"Cant get effective map mode"))}B3C_applyMode(){const t=this.FE6_getEffectiveMode();if(this.C69_effectiveMode===t)return this.B31_setMainEngineLayers(this.D8D_mainLayers),void this.A15_renderLoop.update();if(this.C69_effectiveMode=t,"preVector"===this.C69_effectiveMode){const t=new ze;this.EA8_mainEngine={type:"preVector",engine:t,eventGroup:t.group()}}else if("raster"===this.C69_effectiveMode){this.D95_destroyMainEngine();const t=new wt(this.C5B_size,this.EA2_camera,this.A15_renderLoop,this.worldOptions,this.projection,this.B2F_dataSources,He,this.AF9_topRasterEngine.animateFirstScreen,this.tiltRange);this.FEE_mainEngineContainer.appendChild(t.element),t.setLayers(this.D8D_mainLayers),t.setObjectFilters(this.D84_filters);const e=t.group().on("tilesReady",(()=>this._emit("ready"))).on("tilesLoaded",(()=>this._emit("loaded"))).on("stateChanged",(()=>this._emit("stateChanged"))).on("hotspotsChanged",(()=>this._emit("hotspotsChanged")));this.EA8_mainEngine={type:"raster",engine:t,eventGroup:e},this._emit("mainEngineChanged"),this.FD5_chooseEffectiveZoomRounding(),this.EAE_handleRotatability(),this.AF9_topRasterEngine.update(this.EA2_camera,this.EA8_mainEngine.engine.fov)}else{let t;const e={init:performance.now(),duration:-1};try{t=this.D9E_vectorMapEngineFactory(this.C5B_size,this.EA2_camera,this.B2F_dataSources,this.A15_renderLoop,this.worldOptions,this.tiltRange)}catch(t){return void this.C6F_onVectorError(new Error(`ymaps3: failed to create vector engine: ${t}`))}if("preVector"===this.EA8_mainEngine.type){const i=this.D85_switchMainEngineToVector(t);i.initLayersTimer=window.setTimeout((()=>{const s=t.on("stateChanged",(()=>{var i;this.D7C_isReadyToShowVector(t)&&(s.offAll(),this.FEE_mainEngineContainer.appendChild(t.element),this._emit("vectorStart",{duration:e.duration}),i={vectorStart:e.duration},null==B||B(i)),this._emit("stateChanged")}));this.D7F_setVectorLayers(i,e),i.initLayersTimer=void 0}))}else{const i=t.on("internalError",(()=>this.C6F_onVectorError(new Error("vector: internal error")))).on("indoorPlansChanged",(()=>this._emit("indoorPlansChanged"))).on("hotspotsChanged",(()=>this._emit("hotspotsChanged"))).on("tile3dChanged",(t=>this._emit("tile3dChanged",t))).on("tile3dVisibilityChange",(t=>this._emit("tile3dVisibilityChange",t))).on("visibleObjectsChanged",(()=>this._emit("visibleObjectsChanged"))),s={type:"vector",engine:t,eventGroup:i};this.EA8_mainEngine={engine:this.EA8_mainEngine.engine,eventGroup:this.EA8_mainEngine.eventGroup,type:"transitionToVector",vector:s},this.EA8_mainEngine.vector.initLayersTimer=window.setTimeout((()=>{"transitionToVector"===this.EA8_mainEngine.type?(this.EA8_mainEngine.vector.transitionEventGroup=t.on("stateChanged",(()=>{var i;if(this.D7C_isReadyToShowVector(t,this.EA8_mainEngine.engine)){if("transitionToVector"!==this.EA8_mainEngine.type)return void this.C74_onBadMainEngineState();null===(i=this.EA8_mainEngine.vector.transitionEventGroup)||void 0===i||i.offAll(),this.D80_finalizeSwitchingToVector(e.duration)}this._emit("stateChanged")})),this.D7F_setVectorLayers(s,e),this.EA8_mainEngine.vector.initLayersTimer=void 0):this.C74_onBadMainEngineState()}))}}this.A15_renderLoop.update(),this._emit("indoorPlansChanged")}D7F_setVectorLayers(t,e){return new Promise((i=>{const s=t.engine,o=t=>{(0,O.D)(t)||this.C6F_onVectorError(new Error(`ymaps3: failed to set vector layers: ${t}`))},n=()=>{s.setObjectFilters(this.D84_filters),s.setInvisibleCollidingPrimitives(this.C5F_invisibleCollidingPrimitives),s.setTileContentClippingGeometry(this.D9A_collidingGeometriesBySource),e.duration=performance.now()-e.init,i()};try{if(s.initLayersAsync){t.setLayersAbortController=new AbortController;const e=t.setLayersAbortController.signal;s.initLayersAsync(this.D8D_mainLayers,e).then(n).catch(o)}else s.setLayers(this.D8D_mainLayers),n();t.cursorController&&t.cursorController.setLayers(this.D8D_mainLayers)}catch(t){o(t)}}))}D85_switchMainEngineToVector(t){return this.EA8_mainEngine.eventGroup.offAll(),this.EA8_mainEngine.engine.destroy(),"transitionToVector"===this.EA8_mainEngine.type&&this.EA8_mainEngine.vector.eventGroup.offAll(),this.EA8_mainEngine={type:"vector",engine:t,cursorController:new Fe(this,t.element,this.B2F_dataSources,this.D8D_mainLayers),eventGroup:t.group().on("internalError",(()=>this.C6F_onVectorError(new Error("vector: internal error")))).on("tilesReady",(()=>this._emit("ready"))).on("tilesLoaded",(()=>this._emit("loaded"))).on("stateChanged",(()=>this._emit("stateChanged"))).on("indoorPlansChanged",(()=>this._emit("indoorPlansChanged"))).on("tile3dChanged",(t=>this._emit("tile3dChanged",t))).on("tile3dVisibilityChange",(t=>this._emit("tile3dVisibilityChange",t))).on("visibleObjectsChanged",(()=>this._emit("visibleObjectsChanged")))},this.AF9_topRasterEngine.update(this.EA2_camera,this.EA8_mainEngine.engine.fov),this._emit("indoorPlansChanged"),this._emit("mainEngineChanged"),this.FD5_chooseEffectiveZoomRounding(),this.EAE_handleRotatability(),this.EA8_mainEngine}D7C_isReadyToShowVector(t,e){let i=0,s=0,o=0,n=0,r=0,a=0;if(this.D8D_mainLayers.forEach((h=>{const l=t.getLayerReadyState(h.id);l&&(n+=l.tilesTotal,o+=l.tilesReady),l&&(r+=l.graphicsTotal,a+=l.graphicsReady);const c=null==e?void 0:e.getLayerReadyState(h.id);c&&(s+=c.tilesTotal,i+=c.tilesReady)})),0===n||0===o)return!1;return 0===s||a===r&&(o>=.75*n||o/n>=i/s)}C74_onBadMainEngineState(){this.C6F_onVectorError(new Error(`ymaps3: unexpected main engine state: ${this.EA8_mainEngine.type}`))}D80_finalizeSwitchingToVector(t){if("transitionToVector"!==this.EA8_mainEngine.type)return void this.C74_onBadMainEngineState();const e=this.EA8_mainEngine.vector.engine;this.EA8_mainEngine.vector.animationAbortController=new AbortController;const i=this.EA8_mainEngine.vector.animationAbortController.signal,s=this.FEE_mainEngineContainer;this.FEE_mainEngineContainer=(0,W.E)(Ve),this.FEE_mainEngineContainer.appendChild(e.element),this._emit("vectorStart",{duration:t}),function(t,e,i){return new Promise(((s,o)=>{t.parentElement.insertBefore(e,t),i.addEventListener("abort",(()=>{o((0,O.o)())})),t.addEventListener("transitionend",(()=>{ei(t),s()})),t.classList.add(Xe),getComputedStyle(t).opacity}))}(s,this.FEE_mainEngineContainer,i).then((()=>{"transitionToVector"===this.EA8_mainEngine.type?this.D85_switchMainEngineToVector(e):this.C74_onBadMainEngineState()})).catch((t=>{(0,O.D)(t)||this.C6F_onVectorError(new Error(`ymaps3: switch to vector aborted: ${t}`))}))}EAE_handleRotatability(){var t;const e=[...this.FEF_topRasterLayers,..."vector"!==this.EA8_mainEngine.type?this.D8D_mainLayers:[]].every((t=>!this.B2D_nonRotatableRasterSources.has(t.source)));null===(t=this.behaviors)||void 0===t||t.mapToggleRotation(e),!e&&(0!==this.EA2_camera.azimuth||this.EA2_camera.tilt>0)&&(this.EA2_camera=Object.assign(Object.assign({},this.EA2_camera),{azimuth:0,tilt:0}),this.B44_update())}D93_assertLayersIsValid(t,e){for(const{source:t}of e){const e=this.EC3_dataSourceDescriptions[t];e?"tile"!==e.type||e.hasOwnProperty("vector")?"indoor"!==t||"tile"===e.type&&e.vector&&e.vector.indoorPlanUrl||(0,x._y)(new Error('Source "indoor" has a special meaning and must be a vector indoor data source.')):(0,x._y)(new Error(`Source "${t}" in main engine does not have vector field`)):(0,x._y)(new Error(`Unknown data source ${t}`))}const i=[...e,...t].map((({id:t})=>t)),s=new Set(i);ymaps3.strictMode&&(0,A.h)(i.length===s.size,`Layers have duplicates "${i}"`)}D95_destroyMainEngine(){this.EA8_mainEngine&&("vector"===this.EA8_mainEngine.type&&(this.EA8_mainEngine.setLayersAbortController&&this.EA8_mainEngine.setLayersAbortController.abort(),this.EA8_mainEngine.cursorController&&this.EA8_mainEngine.cursorController.destroy(),clearTimeout(this.EA8_mainEngine.initLayersTimer),ei(this.EA8_mainEngine.engine.element)),"transitionToVector"===this.EA8_mainEngine.type&&(this.EA8_mainEngine.vector.animationAbortController&&this.EA8_mainEngine.vector.animationAbortController.abort(),this.EA8_mainEngine.vector.setLayersAbortController&&this.EA8_mainEngine.vector.setLayersAbortController.abort(),this.EA8_mainEngine.vector.transitionEventGroup&&this.EA8_mainEngine.vector.transitionEventGroup.offAll(),clearTimeout(this.EA8_mainEngine.vector.initLayersTimer),this.EA8_mainEngine.vector.eventGroup.offAll(),ei(this.EA8_mainEngine.vector.engine.element),this.EA8_mainEngine.vector.engine.destroy()),this.EA8_mainEngine.eventGroup.offAll(),this.EA8_mainEngine.engine.destroy())}C72_createTopEngine(){const t=new wt(this.C5B_size,this.EA2_camera,this.A15_renderLoop,this.worldOptions,this.projection,this.B2F_dataSources,(t=>this.EA8_mainEngine&&"vector"===this.EA8_mainEngine.type?(t=>{const e=Math.floor(t);return t-e<.5?e:e+1})(t):He(t)),!1,this.tiltRange);this.FF1_topEngineContainer.appendChild(t.element);const e=t.group().on("tilesReady",(()=>this._emit("ready"))).on("tilesLoaded",(()=>this._emit("loaded"))).on("stateChanged",(()=>this._emit("stateChanged"))).on("hotspotsChanged",(()=>this._emit("hotspotsChanged")));return t.setLayers(this.FEF_topRasterLayers),t.setObjectFilters(this.D84_filters),{topEngine:t,eventGroup:e}}B44_update(){this.EA8_mainEngine.engine.update(this.EA2_camera,E),"transitionToVector"===this.EA8_mainEngine.type&&this.EA8_mainEngine.vector.engine.update(this.EA2_camera,E),this.AF9_topRasterEngine.update(this.EA2_camera,this.EA8_mainEngine.engine.fov),this.A15_renderLoop.update(),this._emit("update")}EB2_subscribeToDomEvents(){this.container.addEventListener("contextmenu",(t=>t.preventDefault()))}convertScreenToWorldCoordinates({clientX:t,clientY:e}){const i=(0,s.XA)({x:t,y:e},this);return{worldCoordinates:i,coordinates:this.projection.fromWorldCoordinates(i)}}EBA_restrictZoom(t){const{min:e,max:i}=this.zoomRange;return(0,v.q)(t,e,i)}B35_convertFeatureToWorld(t){return this.D83_convertAndCalculateBBox(t,(t=>this.projection.toWorldCoordinates(t)),((t,e)=>({geo:t,global:e})))}A97_convertFeatureToGeo(t){return this.D83_convertAndCalculateBBox(t,(t=>this.projection.fromWorldCoordinates(t)),((t,e)=>({geo:e,global:t})))}D83_convertAndCalculateBBox(t,e,i){ymaps3.strictMode&&(0,A.h)(!this.worldOptions.cycledY,"Y-cycled projections are not supported");let s=1/0,o=-1/0,n=1/0,r=-1/0;return{feature:(0,p.Cr)(t,(t=>{const a=e(t),{geo:h,global:l}=i(t,a);if(this.worldOptions.cycledX){const t=h[0]<-180||h[0]>180?Math.round(h[0]/360):0;l.x+=2*t}return s=l.x<s?l.x:s,o=l.x>o?l.x:o,n=l.y<n?l.y:n,r=l.y>r?l.y:r,a})),bbox:{minX:s,maxX:o,minY:n,maxY:r}}}B39_getFeaturesForDataSource(t){return this.C74_featuresByDataSource.has(t)||this.C74_featuresByDataSource.set(t,new Map),this.C74_featuresByDataSource.get(t)}B36_createDataSource(t){const{type:e}=t;switch(e){case"markers":case"geojson":return new yt.m5({disablePointGeometry:!this.EC2_experiments.pointGeometry});case"tile":return new F.Nt(t,this.worldOptions);case"tile3d":return new Mt.N(t)}return new Ge.m}D95_getFeaturesDataSource(t){const e=this.C5E_getDataSourceById(t);return ymaps3.strictMode&&(0,A.h)(e instanceof yt.m5,`"${t}" must be FeaturesDataSource`),e}EAA_getTile3dDataSource(t){const e=this.C5E_getDataSourceById(t);return ymaps3.strictMode&&(0,A.h)(e instanceof Mt.N,`"${t}" must be Tile3dDataSource`),e}C56_getTileDataSource(t){const e=this.C5E_getDataSourceById(t);return ymaps3.strictMode&&(0,A.h)(e instanceof F.Nt,`"${t}" must be TileDataSource`),e}C5E_getDataSourceById(t){return ymaps3.strictMode&&(0,A.h)(void 0!==this.B2F_dataSources[t],`Unknown data source "${t}"`),this.B2F_dataSources[t]}B3E_getEffectiveZoomRounding(){return"auto"!==this.EB6_zoomRounding?this.EB6_zoomRounding:this.EBE_vectorFailed?"snap":this.D8D_mainLayers.length&&"raster"!==this.C69_effectiveMode?"smooth":"snap"}FD5_chooseEffectiveZoomRounding(){var t;const e=this.B3E_getEffectiveZoomRounding();if(this.FCE_effectiveZoomRounding!==e){if(this.FCE_effectiveZoomRounding=e,"snap"===this.FCE_effectiveZoomRounding){const t=Qe(this.EA2_camera.zoom);this.setCamera(Object.assign(Object.assign({},this.EA2_camera),{zoom:t}))}null===(t=this.behaviors)||void 0===t||t._updateZoomRounding(),this._emit("zoomRoundingChanged")}}FD4_applyFilters(){this.EA8_mainEngine.engine.setObjectFilters(this.D84_filters),this.AF9_topRasterEngine.setObjectFilters(this.D84_filters),"transitionToVector"===this.EA8_mainEngine.type&&this.EA8_mainEngine.vector.engine.setObjectFilters(this.D84_filters)}B36_applyInvisibleCollidingPrimitives(){this.EA8_mainEngine.engine.setInvisibleCollidingPrimitives(this.C5F_invisibleCollidingPrimitives),"transitionToVector"===this.EA8_mainEngine.type&&this.EA8_mainEngine.vector.engine.setInvisibleCollidingPrimitives(this.C5F_invisibleCollidingPrimitives)}EBD_toMapObject(t){if(!t)return t;if("raw-hotspot"===t.type){const e=Object.assign(Object.assign({},t.feature),{geometry:t.feature.geometry&&(0,p.ZE)(t.feature.geometry,(([t,e])=>[e,t]))});return{type:"hotspot",layer:t.layer,source:t.source,feature:e}}if("hotspot"===t.type){const e=Object.assign(Object.assign({},t.feature),{geometry:t.feature.geometry&&(0,p.ZE)(t.feature.geometry,(t=>this.projection.fromWorldCoordinates(t)))});return{type:"hotspot",layer:t.layer,source:t.source,feature:e}}if("feature"===t.type){const e=this.B39_getFeaturesForDataSource(t.source).get(t.feature.id);return e?{type:"feature",layer:t.layer,source:t.source,feature:e}:null}return"empty-object"===t.type?Object.assign({},t):null}updateCameraOptions(t){this.D85_cameraOptions=Object.assign(Object.assign({},this.D85_cameraOptions),t)}EB9_restrictCamera(t){const e=this.EBA_restrictZoom(t.zoom),{enabledTiltTransition:i}=this.D85_cameraOptions,s={zoom:e,worldCenter:f.B.fitViewportToWorld(t.worldCenter,{zoom:e,worldOptions:this.worldOptions,size:this.size}),azimuth:(0,v.d)(t.azimuth,0,2*Math.PI),tilt:(0,v.q)(t.tilt,this.tiltRange.min-(i?this.tiltRange.expansion:0),this.tiltRange.max+(i?this.tiltRange.expansion:0))};return this.B30_worldRestrictMapArea?function(t,e,i,s){const o=Re(i,s),{x:n,y:r}=f.B.convertPixelSizeToWorldSize(o,t.zoom),a=n/2,h=-r/2,{x:l,y:c}=t.worldCenter;let{x:d,y:u}=t.worldCenter;return d-a<e[0].x&&(d=e[0].x+a),u-h<e[0].y&&(u=e[0].y+h),d+a>e[1].x&&(d=e[1].x-a),u+h>e[1].y&&(u=e[1].y-h),d!==l||u!==c?Object.assign(Object.assign({},t),{worldCenter:{x:d,y:u}}):t}(s,this.B30_worldRestrictMapArea,this.size,this.margin):s}}function qe(t){const{top:e,left:i,right:s,bottom:o}=t.getBoundingClientRect();return{size:{x:t.clientWidth,y:t.clientHeight},offset:{top:e,left:i,right:window.innerWidth-s,bottom:window.innerHeight-o}}}function Je(t,e){return t.map((t=>{const i="string"==typeof t?function(t,e){const i=t.match(z);i&&0!==i[0].length||(0,x._y)(new Error(`Bad string layer spec '${t}'`));const[,s,o,n]=i,r=n?n.split(","):[],a=Object.create(null);for(const t of r)a[t]=!0;return{id:t,source:s,type:o,options:{raster:Object.assign(Object.assign({},a),null==e?void 0:e.raster),vector:Object.assign(Object.assign({},a),null==e?void 0:e.vector)}}}(t):t,s=T(i);return s.source===j||e[s.source]||(0,x._y)(new Error(`Nonexistent data source "${s.source}" in "${i.id}"`)),s}))}function Ke(t,e){(0,u.i3)(t);const i=Object.assign({},t);for(const s of Object.keys(e)){const o=e[s];if("tile"===o.type&&(o.zoomRange&&(0,u.i3)(o.zoomRange),o.clampMapZoom)){const e=o.zoomRange||t;(0,u.Hx)(i,e,i)}}(0,u.i3)(i)}function ti(t){return t.id}function ei(t){t.parentElement&&t.parentElement.removeChild(t)}function ii(){const t=Math.floor(Date.now()/1e3),e={pv:1,ar:1,et:t,st:t,rn:Math.round(1073741824*Math.random()),t:""};return Object.entries(e).map((t=>t.join(":"))).join(":")}function si(t,e){const{prefix:i="",sendBoundary:s=0}=null!=e?e:{};return function(e,o={}){const{counterId:n,pageUrl:r,allowSending:a}=t;if(!a||void 0!==o.share&&o.share<s)return;const h=""!==i?function(t,e){const i={};for(const s of Object.keys(e))i[`${t}${s}`]=e[s];return i}(i,e):e,l=new URLSearchParams({"page-url":r,charset:"utf-8","site-info":JSON.stringify({"3.0.0":h}),"browser-info":ii()});(new Image).src=function(t,e){return`https://mc.yandex.ru/watch/${t}/1?${e}`}(n,l)}}const oi=Math.random();let ni;function ri(t){ni=si(t,{sendBoundary:oi})}var ai=i(28277),hi=i(14001),li=i(21833),ci=i(13722),di=i(70724),ui=i(35973),_i=i(93379),pi=i.n(_i),mi=i(7795),gi=i.n(mi),yi=i(90569),Ei=i.n(yi),fi=i(3565),Ci=i.n(fi),Di=i(19216),Mi=i.n(Di),vi=i(44589),Ai=i.n(vi),xi=i(62999),Si={};Si.styleTagTransform=Ai(),Si.setAttributes=Ci(),Si.insert=Ei().bind(null,"head"),Si.domAPI=gi(),Si.insertStyleElement=Mi();pi()(xi.Z,Si);xi.Z&&xi.Z.locals&&xi.Z.locals;var bi=i(35787),wi={};wi.styleTagTransform=Ai(),wi.setAttributes=Ci(),wi.insert=Ei().bind(null,"head"),wi.domAPI=gi(),wi.insertStyleElement=Mi();pi()(bi.Z,wi);bi.Z&&bi.Z.locals&&bi.Z.locals;function ji(t,e){return e>=t.length?t:e<=4?"":`...${t.slice(t.length-e+3)}`}const Li=Object.freeze({position:"bottom right",showScale:!1});class Ti extends di.SY{constructor(t={}){super(t),this.ABB_copyrights={text:"",options:{}},this.EB6_applyCopyrights=this.EB6_applyCopyrights.bind(this),this.A1D_rearrange=this.A1D_rearrange.bind(this),this.B3D_render=this.B3D_render.bind(this),this.C65_syncTheme=this.C65_syncTheme.bind(this)}_onAttach(){var t;this.C69_createDom();const e=null===(t=this._consumeContext(li.X))||void 0===t?void 0:t.map;e&&(e.on("copyrightsChange",this.EB6_applyCopyrights),e.on("resize",this.A1D_rearrange),this.EBF_scaleControl=new ui.d({}),this.C6C_toggleScaleControl(),this._watchContext(ci.N,this.C65_syncTheme,{immediate:!0}),this._watchContext(li.X,this.B3D_render,{immediate:!0}),this.EB6_applyCopyrights())}_onUpdate(t){void 0!==t.showScale&&this.C6C_toggleScaleControl(),void 0!==t.position&&this.B3D_render()}_onDetach(){var t;null===(t=this.ADA_detachDom)||void 0===t||t.call(this),this.ADA_detachDom=void 0;const e=this._consumeContext(li.X).map;e.offSingle("copyrightsChange",this.EB6_applyCopyrights),e.offSingle("resize",this.A1D_rearrange)}C69_createDom(){this.D90_containerElement=(0,W.E)("ymaps3x0--map-copyrights"),this.B4D_copyrightsTextElement=(0,W.E)("ymaps3x0--map-copyrights__text"),this.B2D_agreementLinkElement=document.createElement("a"),this.B2D_agreementLinkElement.className="ymaps3x0--map-copyrights__user-agreements",this.B2D_agreementLinkElement.setAttribute("target","_blank"),this.D95_scaleElement=(0,W.E)("ymaps3x0--map-copyrights__scale"),this.EAE_copyrightsContainer=(0,W.E)("ymaps3x0--map-copyrights__container"),this.D96_logoElement=(0,W.E)("ymaps3x0--map-copyrights__logo"),this.D96_logoElement.style.width="46px",this.D96_logoElement.style.height="20px",this.EAE_copyrightsContainer.appendChild(this.B4D_copyrightsTextElement),this.EAE_copyrightsContainer.appendChild(this.B2D_agreementLinkElement),this.D90_containerElement.appendChild(this.EAE_copyrightsContainer),this.D90_containerElement.appendChild(this.D96_logoElement),this.D90_containerElement.appendChild(this.D95_scaleElement),this.ADA_detachDom=(0,hi.sT)(this,this.D90_containerElement,this.D95_scaleElement)}B3D_render(){var t;const e=null===(t=this._consumeContext(li.X))||void 0===t?void 0:t.meta;if(!e)return;const[i,s]=this._props.position.split(" ");this.D90_containerElement.className=["ymaps3x0--map-copyrights",`ymaps3x0--map-copyrights_${i}`,`ymaps3x0--map-copyrights_${s}`].join(" ");const o=e.copyrights.userAgreementHost.replace("{{lang}}",e.lang);this.B2D_agreementLinkElement.setAttribute("href",o),this.A1D_rearrange()}C65_syncTheme(){var t,e;const i=null===(t=this._consumeContext(li.X))||void 0===t?void 0:t.meta,s=null===(e=this._consumeContext(ci.N))||void 0===e?void 0:e.theme;if(!i||!s)return;const o=`ymaps3x0--icon-logo-${i.copyrights.logoLang}-white`,n=`ymaps3x0--icon-logo-${i.copyrights.logoLang}-black`,r="ymaps3x0--map-copyrights__dark-container";"dark"===s?(this.D96_logoElement.classList.add(o),this.D96_logoElement.classList.remove(n),this.EAE_copyrightsContainer.classList.add(r)):"light"===s&&(this.D96_logoElement.classList.add(n),this.D96_logoElement.classList.remove(o),this.EAE_copyrightsContainer.classList.remove(r))}EB6_applyCopyrights(){var t,e,i;const s=null===(t=this._consumeContext(li.X))||void 0===t?void 0:t.map;if(!s)return;const o=s.getLayersEx(),n=Array.from(new Set([...o.mainLayers,...o.topRasterLayers].map((t=>t.source))));n.sort();const r=[],a={trim:void 0,logo:void 0};for(const t of n){const o=s.getDataSource(t);"tile"===(null==o?void 0:o.type)&&(o.copyrights&&r.push(...o.copyrights),o.copyrightsOptions&&(null!==(e=a.trim)&&void 0!==e||(a.trim=o.copyrightsOptions.trim),null!==(i=a.logo)&&void 0!==i||(a.logo=o.copyrightsOptions.logo)))}const h=r.join(" ");this.ABB_copyrights.text===h&&this.ABB_copyrights.options.trim===a.trim&&this.ABB_copyrights.options.logo===a.logo||(this.ABB_copyrights={text:h,options:a},this.A1D_rearrange())}EB2_computeMaxWidth(t){return t-this.D96_logoElement.offsetWidth-this.B2D_agreementLinkElement.offsetWidth-40}A1D_rearrange(){const t=this._consumeContext(li.X);if(!t)return;const{text:e,options:i}=this.ABB_copyrights;if(!1!==i.logo?this.D96_logoElement.style.removeProperty("display"):this.D96_logoElement.style.display="none",this.B2D_agreementLinkElement.textContent=t.meta.copyrights.userAgreementTextLong,this.B4D_copyrightsTextElement.textContent=e,this.B4D_copyrightsTextElement.title=e,!1!==i.trim){this.EAE_copyrightsContainer.style.removeProperty("whiteSpace");do{if(this.B4D_copyrightsTextElement.offsetWidth<this.EB2_computeMaxWidth(t.map.size.x))break;if(this.B2D_agreementLinkElement.textContent=t.meta.copyrights.userAgreementTextShort,this.B4D_copyrightsTextElement.offsetWidth<this.EB2_computeMaxWidth(t.map.size.x))break;const i=Math.round(this.B4D_copyrightsTextElement.offsetWidth/e.length),s=(this.EB2_computeMaxWidth(t.map.size.x)-30)/i;this.B4D_copyrightsTextElement.textContent=ji(e,Math.ceil(s))}while(0)}else this.EAE_copyrightsContainer.style.whiteSpace="normal";const s=Math.max(this.EAE_copyrightsContainer.offsetHeight,this.D96_logoElement.offsetHeight,20),[o]=this._props.position.split(" ");"top"===o?(this.D95_scaleElement.style.removeProperty("bottom"),this.D95_scaleElement.style.top=`${s+16}px`):(this.D95_scaleElement.style.removeProperty("top"),this.D95_scaleElement.style.bottom=`${s+16}px`)}C6C_toggleScaleControl(){const t=-1!==this.children.indexOf(this.EBF_scaleControl);this._props.showScale&&!t?(this.D95_scaleElement.style.display="",this.addChild(this.EBF_scaleControl)):!this._props.showScale&&t&&(this.D95_scaleElement.style.display="none",this.removeChild(this.EBF_scaleControl)),this.A1D_rearrange()}}Ti.defaultProps=Li;var zi=i(77099),Bi=i(21176),Fi=i(33294),Ii=i(698),Ni=function(t,e){var i={};for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&e.indexOf(s)<0&&(i[s]=t[s]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(s=Object.getOwnPropertySymbols(t);o<s.length;o++)e.indexOf(s[o])<0&&Object.prototype.propertyIsEnumerable.call(t,s[o])&&(i[s[o]]=t[s[o]])}return i};const Oi=Le.L;var Ri=i(99506),Pi=i(43559),ki=i(91149),Yi={};Yi.styleTagTransform=Ai(),Yi.setAttributes=Ci(),Yi.insert=Ei().bind(null,"head"),Yi.domAPI=gi(),Yi.insertStyleElement=Mi();pi()(ki.Z,Yi);ki.Z&&ki.Z.locals&&ki.Z.locals;var Zi=i(91928),Ui={};Ui.styleTagTransform=Ai(),Ui.setAttributes=Ci(),Ui.insert=Ei().bind(null,"head"),Ui.domAPI=gi(),Ui.insertStyleElement=Mi();pi()(Zi.Z,Ui);Zi.Z&&Zi.Z.locals&&Zi.Z.locals;var Wi,Gi,Qi,Hi,Vi,Xi=function(t,e,i,s){return new(i||(i=Promise))((function(o,n){function r(t){try{h(s.next(t))}catch(t){n(t)}}function a(t){try{h(s.throw(t))}catch(t){n(t)}}function h(t){var e;t.done?o(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(r,a)}h((s=s.apply(t,e||[])).next())}))},$i=function(t,e,i,s,o){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!o)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof e?t!==e||!o:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?o.call(t,i):o?o.value=i:e.set(t,i),i},qi=function(t,e,i,s){if("a"===i&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof e?t!==e||!s:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===i?s:"a"===i?s.call(t):s?s.value:e.get(t)};class Ji extends((0,_.GA)().with()){constructor(t){super(),Object.assign(this,t)}emitAfterUpdate(){this._emit("afterUpdate")}}const Ki="ymaps3x0--map-container",ts=Object.freeze({className:"",camera:{tilt:0,azimuth:0},mode:"auto",zoomRounding:"auto",hotspotsStrategy:"ontouchstart"in window||navigator.maxTouchPoints>0||navigator.msMaxTouchPoints>0?"forViewport":"forPointerPosition",zoomRange:(0,u.oF)(),zoomStrategy:"zoomToPointer",behaviors:["drag","scrollZoom","pinchZoom","dblClick"],margin:[0,0,0,0],copyrights:!0,copyrightsPosition:"bottom right",showScaleInCopyrights:!1,worldOptions:{cycledX:!0,cycledY:!1},restrictMapArea:!1,get config(){return(0,Bi._K)()},projection:Oi,theme:"light"});class es extends ai.ru{constructor(t,e,i){super(e,{container:!0}),this.FD7_vectorInitFailed=!1,this.D9E_layers=[],this.D88_isDestroyed=!1,this.FCE_isVectorLoading=!1,Wi.set(this,void 0),Gi.set(this,void 0),Qi.set(this,void 0),Hi.set(this,void 0);const s=(0,Bi.yY)(this._props.config);if(!s)throw new Error("ymaps3: missing config");$i(this,Hi,s,"f"),this.A78_rootContainer=t,this.EBF_container=document.createElement("ymaps"),this.EBF_container.className=Ki,this._props.className&&(this.EBF_container.className=`${Ki} ${this._props.className}`),this.A78_rootContainer.appendChild(this.EBF_container),$i(this,Wi,new Ji({map:this.EB0_createMap(),meta:s.meta,upsertLayer:t=>this.A2C_upsertLayer(t),removeLayer:t=>this.A24_removeLayer(t),isUpdating:!1}),"f"),this.B46__implProvideContext(li.X,qi(this,Wi,"f")),$i(this,Qi,{},"f"),this.B46__implProvideContext(Fi.$,qi(this,Qi,"f"));const[o]=(0,hi.vi)(this,this.EBF_container);this.B46__implProvideContext(hi.dh,o),$i(this,Gi,{theme:this._props.theme},"f"),this.B46__implProvideContext(ci.N,qi(this,Gi,"f")),"raster"!==this._props.mode&&this.D88_loadVector().catch((()=>{})),this.B44_resizeObserver=new ResizeObserver((()=>qi(this,Wi,"f").map.resize())),this.B44_resizeObserver.observe(this.A78_rootContainer),this.ABB_copyrights=new Ti({position:this._props.copyrightsPosition,showScale:this._props.showScaleInCopyrights}),this.B4F__toggleCopyrights(this._props.copyrights,s.meta.copyrights.allowRemove);const n=new zi.EQ({});this._addDirectChild(n),this.B46__implProvideContext(zi.f$,{subscribe:n.subscribe.bind(n)}),null==i||i.forEach((t=>this.addChild(t)))}addChild(t,e){return super.addChild(t,e)}removeChild(t){return super.removeChild(t)}A28_canBeMainLayer(t){var e;if("__virtual-tile-iml-do-not-use-MAPSAPI-17151"===t.type)return!1;const{map:i}=qi(this,Wi,"f"),{experiments:s}=qi(this,Hi,"f"),o=t.source||t.id.split(":")[0],n=i.getDataSource(o),r=(null==s?void 0:s.vectorGraphics)&&"geojson"===(null==n?void 0:n.type)&&"markers"!==t.type,a="tile"===(null==n?void 0:n.type)&&Boolean(n.vector),h="tile3d"===(null==n?void 0:n.type),l=Boolean(t.implementation&&t.implementation({source:o,type:null!==(e=t.type)&&void 0!==e?e:"",effectiveMode:"vector"}));return r||a||h||l}C62_prepareLayersToSet(t){const e=[...t],i=[];for(let t=e.length-1;t>=0;t--){const s=e[t];if(!this.A28_canBeMainLayer(s))break;i.push(s),e.splice(t,1)}return e.reverse(),{topRasterLayers:e,mainLayers:i}}EC2_filterLayers(t){return this.D9E_layers.filter((e=>t!==e.id))}A2C_upsertLayer(t){if(t.implementation&&!qi(this,Hi,"f").meta.allowedFeatures.customLayers&&!Pi.t.has(t.implementation))throw new Error("Custom layers is not allowed");const e=[t,...this.EC2_filterLayers(t.id)],i=e.reduce(((t,e)=>(t.set(e.id,e.zIndex),t)),new Map);this.D9E_layers=e.sort(((t,e)=>{let s=t.zIndex,o=e.zIndex;return t.grouppedWith&&i.has(t.grouppedWith)&&(s=i.get(t.grouppedWith)),e.grouppedWith&&i.has(e.grouppedWith)&&(o=i.get(e.grouppedWith)),o-s||e.zIndex-t.zIndex}));const s=this.C62_prepareLayersToSet(this.D9E_layers),{topRasterLayers:o}=s,n=o.find((t=>this.A28_canBeMainLayer(t)));n&&console.warn(`Vector layer "${n.id}" should have z-index less than raster layer "${o[o.length-1].id}"`),qi(this,Wi,"f").map.setLayers(s)}A24_removeLayer(t){this.D9E_layers=this.EC2_filterLayers(t.id),qi(this,Wi,"f").map.setLayers(this.C62_prepareLayersToSet(this.D9E_layers))}get container(){return this.EBF_container}get center(){return qi(this,Wi,"f").map.center}get zoom(){return qi(this,Wi,"f").map.zoom}get tilt(){return qi(this,Wi,"f").map.tilt}get azimuth(){return qi(this,Wi,"f").map.azimuth}get bounds(){return qi(this,Wi,"f").map.bounds}get zoomRange(){return qi(this,Wi,"f").map.zoomRange}get tiltRange(){return qi(this,Wi,"f").map.tiltRange}get projection(){return qi(this,Wi,"f").map.projection}get size(){return qi(this,Wi,"f").map.size}get behaviors(){return this._props.behaviors}get config(){return this._props.config}get restrictMapArea(){return this._props.restrictMapArea}get theme(){return qi(this,Gi,"f").theme}setLocation(t){this.update({location:t})}setCamera(t){this.update({camera:t})}D9F__setLocation(t){var e,i;const{map:s}=qi(this,Wi,"f"),o=t;let n=null!==(e=o.center)&&void 0!==e?e:this.center,r=null!==(i=o.zoom)&&void 0!==i?i:this.zoom;if(o.bounds){const{center:t,zoom:e}=Pe(this.projection,o.bounds,this.size,s.margin,"snap"===s.effectiveZoomRounding,this.zoomRange);n=t,r=e}t.duration?s.animateCenterAndZoom(n,r,t.duration,t.easing):s.setCenterAndZoom(n,r)}setMode(t){var e;if(this._props.mode=t,"raster"===t)return null===(e=this.B3C__abortVectorLoad)||void 0===e||e.call(this),void qi(this,Wi,"f").map.setMode(this._correctMode);this.D88_loadVector().finally((()=>{qi(this,Wi,"f").map.setMode(this._correctMode)}))}setZoomRange(t){qi(this,Wi,"f").map.setZoomRange(t),this._props.zoomRange=t}setBehaviors(t){qi(this,Wi,"f").map.behaviors.setEnabled(t),this._props.behaviors=t}setZoomRounding(t){qi(this,Wi,"f").map.setZoomRounding(t),this._props.zoomRounding=t}setMargin(t){qi(this,Wi,"f").map.setMargin(t),this._props.margin=t}setConfig(t){const e=t?(0,Bi.yY)(t):void 0;e&&e.meta&&($i(this,Hi,e,"f"),$i(this,Wi,new Ji(Object.assign(Object.assign({},qi(this,Wi,"f")),{meta:e.meta})),"f"),this.B46__implProvideContext(li.X,qi(this,Wi,"f"))),this._props.config=t}setProjection(t){const{map:e}=qi(this,Wi,"f"),i=[...e.center];e.setProjection(t),e.setCenter(i)}setRestrictMapArea(t){qi(this,Wi,"f").map.setRestrictMapArea(t),this._props.restrictMapArea=t}destroy(){var t;if(this.D88_isDestroyed)return;null===(t=this.B3C__abortVectorLoad)||void 0===t||t.call(this),this.B44_resizeObserver.disconnect(),this.C6F__implDetach();const e=this.children;for(let t=e.length-1;t>=0;t--)this.removeChild(e[t]);qi(this,Wi,"f").map.destroy(),this.A78_rootContainer.removeChild(this.EBF_container),this.D88_isDestroyed=!0}EB0_createMap(){const t=qi(this,Hi,"f");t.isApplied=!0;const e=new $e(Object.assign(Object.assign({element:this.EBF_container},this._props.location),{mode:this._correctMode,dataSources:{},topRasterLayers:[],mainLayers:[],margin:this._props.margin,behaviors:this._props.behaviors,zoomRounding:this._props.zoomRounding,zoomRange:this._props.zoomRange,experiments:t.experiments,projection:this._props.projection,tiltRange:this._props.tiltRange,worldOptions:this._props.worldOptions,restrictMapArea:this._props.restrictMapArea,metricsTransport:si(t.meta.metrics,{sendBoundary:oi,prefix:"ymaps3_"}),tilt:this._props.camera.tilt,azimuth:this._props.camera.azimuth}));return ri(t.meta.metrics),e.addDataSource(j,{type:"none"}),ri(t.meta.metrics),"forPointerPosition"===this._props.hotspotsStrategy?function(t){let e;const i=()=>{if(!t.behaviors.isInAction&&e){const i={x:e.clientX,y:e.clientY},o=(0,s.XA)(i,t);t.preloadHotspotsInPoint(o)}},o=t=>{e=t,i()},n=t.behaviors.on("actionEnd",(()=>{i()})),r=t.on("beforeDestroy",(()=>{r.offAll(),n.offAll(),t.container.removeEventListener("mousemove",o)}));t.container.addEventListener("mousemove",o)}(e):function(t){let e;const i=t.behaviors.on("actionStart",(()=>{e&&(e.offAll(),e=void 0)})).on("actionEnd",(()=>{e||t.behaviors.isInAction||(t.preloadHotspotsForViewport(),e=t.on("update",(()=>t.preloadHotspotsForViewport())))})),s=t.on("beforeDestroy",(()=>{s.offAll(),i.offAll(),e&&(e.offAll(),e=void 0)}));e=t.on("update",(()=>t.preloadHotspotsForViewport()))}(e),e.behaviors.setZoomStrategy(this._props.zoomStrategy),e}get _correctMode(){return qi(this,Hi,"f").meta.allowedFeatures.vector&&!this.FD7_vectorInitFailed?this._props.mode:"raster"}_onUpdate(t){const{map:e}=qi(this,Wi,"f");if(qi(this,Wi,"f").isUpdating=!0,t.mode&&this.setMode(t.mode),t.zoomRange&&this.setZoomRange(t.zoomRange),t.behaviors&&this.setBehaviors(t.behaviors),t.zoomRounding&&this.setZoomRounding(t.zoomRounding),t.zoomStrategy&&e.behaviors.setZoomStrategy(t.zoomStrategy),t.margin&&this.setMargin(t.margin),t.projection&&this.setProjection(t.projection),t.config&&this.setConfig(t.config),void 0!==t.copyrights&&this.B4F__toggleCopyrights(t.copyrights,qi(this,Hi,"f").meta.copyrights.allowRemove),t.className&&(this.EBF_container.className=`${Ki} ${t.className}`),t.copyrightsPosition&&this.ABB_copyrights.update({position:t.copyrightsPosition}),void 0!==t.showScaleInCopyrights&&this.ABB_copyrights.update({showScale:t.showScaleInCopyrights}),t.restrictMapArea&&this.setRestrictMapArea(t.restrictMapArea),void 0!==t.theme&&this.A1FsetTheme({theme:t.theme}),t.location&&this.D9F__setLocation(t.location),void 0!==t.camera){const{duration:i,azimuth:s,tilt:o,easing:n}=t.camera;void 0!==s&&s!==this.azimuth&&e.animateAzimuth(s,i,n),void 0!==o&&o!==this.tilt&&e.animateTilt(o,i,n)}qi(this,Wi,"f").isUpdating=!1,qi(this,Wi,"f").emitAfterUpdate()}D88_loadVector(){if(this.FCE_isVectorLoading)return Promise.resolve();if(qi(this,Wi,"f").map.isVectorMapEngineFactoryProvided()&&"raster"!==qi(this,Wi,"f").map.getEffectiveMode())return Promise.resolve();if(!l())return this.C71__onVectorInitFailed(),Promise.reject();let t=!1;this.FCE_isVectorLoading=!0;const e=new Promise(((e,i)=>{setTimeout((()=>{if(t)return i(new Error("aborted"));const s=qi(this,Hi,"f"),o=a({allowSoftware:Boolean(s.allowVectorSoftwareRendering)});return o&&(s.skipVectorChecks||h(o).supported)?e(o):i(new Error("Vector is not supported"))}))}));return this.B3C__abortVectorLoad=()=>{t=!0,this.FCE_isVectorLoading=!1},Promise.all([e,this.D80__loadVectorEngine()]).then((([e,i])=>Xi(this,void 0,void 0,(function*(){if(t)return;const s=yield i.getContentProviderWorker(qi(this,Hi,"f"));qi(this,Wi,"f").map.provideVectorMapEngineFactory(i.vectorMapEngineFactory(e,i.vector,(()=>s))),$i(this,Qi,{vector:i},"f"),this.B46__implProvideContext(Fi.$,qi(this,Qi,"f"))})))).catch((()=>{t||this.C71__onVectorInitFailed()})).finally((()=>{this.FCE_isVectorLoading=!1}))}C71__onVectorInitFailed(){this.FD7_vectorInitFailed=!0,qi(this,Wi,"f").map.setMode(this._correctMode)}D80__loadVectorEngine(){return(0,Ii.N)("@yandex/ymaps3-vector")}B4F__toggleCopyrights(t,e=!1){t||!e?this.ABB_copyrights.parent||this._addDirectChild(this.ABB_copyrights):this.ABB_copyrights.parent&&this._removeDirectChild(this.ABB_copyrights)}A1FsetTheme(t){const{theme:e}=t;e&&(qi(this,Gi,"f").theme=e),this.B46__implProvideContext(ci.N,qi(this,Gi,"f"))}}Wi=new WeakMap,Gi=new WeakMap,Qi=new WeakMap,Hi=new WeakMap,Vi=Ri.sq,es.defaultProps=ts,es[Vi]=(t,{reactify:e,React:i})=>{const s=e.entity(class extends t{constructor(t){var{container:e}=t;super(e,Ni(t,["container"]))}}),o=i.forwardRef(((t,e)=>{const o=i.useRef(null),[n,r]=i.useState(!0);return i.useEffect((()=>{n&&r(!1)}),[n]),i.createElement("ymaps",{is:"ymaps",ref:o,style:{width:"100%",height:"100%",margin:0,padding:0,display:"block"}},o.current&&i.createElement(s,Object.assign({},t,{ref:e,container:o.current})))}));return o.displayName="YMapContainer",o}},73237:(t,e,i)=>{i.d(e,{h:()=>a});var s,o=i(14001),n=i(70724),r=i(99506);class a extends n.SY{_onAttach(){this.element=document.createElement(this._props.tagName),this._onUpdate(this._props),this.ADA_detachDom=(0,o.sT)(this,this.element,null),this._props.onElement(this.element),this.EB2_adjustContext()}EB2_adjustContext(){var t;if(null===(t=this.D7A_disposeWatch)||void 0===t||t.call(this),this.D7A_disposeWatch=void 0,this._props.context){const t=this._props.context;this.D7A_disposeWatch=this._watchContext(t,(()=>{this._props.onContext(this._consumeContext(t))}),{immediate:!0})}}_onDetach(){var t;this._props.onElement(void 0),null===(t=this.ADA_detachDom)||void 0===t||t.call(this),this.ADA_detachDom=void 0,this.element=void 0}_onUpdate(t){t.className&&(this.element.className=t.className),t.style&&(this.element.style.cssText="",Object.assign(this.element.style,t.style)),t.context&&this.EB2_adjustContext()}}s=r.sq,a.defaultProps={tagName:"ymaps"},a[s]=(t,{reactify:e,ReactParent:i,React:s,ReactDOM:o})=>{const n=e.entity(t);return function(t){const[r,a]=s.useState(),[h,l]=s.useState(void 0),c=e.context(t.context);return s.createElement(n,Object.assign({},t,{onElement:a,onContext:l}),s.createElement(i.Provider,{value:void 0},s.createElement(c.Provider,{value:h},r&&o.createPortal(t.children,r))))}}},22739:(t,e,i)=>{i.d(e,{i:()=>o});var s=i(70724);class o extends s.SY{_onAttach(){this._onUpdate(this._props)}_onUpdate({value:t}){const e=this._props.context;e&&t&&this._provideContext(e,t)}}},27845:(t,e,i)=>{i.d(e,{d:()=>S});var s=i(93379),o=i.n(s),n=i(7795),r=i.n(n),a=i(90569),h=i.n(a),l=i(3565),c=i.n(l),d=i(19216),u=i.n(d),_=i(44589),p=i.n(_),m=i(72217),g={};g.styleTagTransform=p(),g.setAttributes=c(),g.insert=h().bind(null,"head"),g.domAPI=r(),g.insertStyleElement=u();o()(m.Z,g);m.Z&&m.Z.locals&&m.Z.locals;var y=i(14001),E=i(13722),f=function(t,e){var i={};for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&e.indexOf(s)<0&&(i[s]=t[s]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(s=Object.getOwnPropertySymbols(t);o<s.length;o++)e.indexOf(s[o])<0&&Object.prototype.propertyIsEnumerable.call(t,s[o])&&(i[s[o]]=t[s[o]])}return i};var C,D=i(99506),M=i(70724);const v="ymaps3x0--control__background",A="ymaps3x0--control__dark",x=Object.freeze({transparent:!1});class S extends M.SY{constructor(t,e){super(null!=t?t:{}),this.A10_innerElement=e}_createDom(){return document.createElement("ymaps")}_onAttach(){var t;this.C6C_element=this._createDom(),this.C6C_element.classList.add("ymaps3x0--control"),this.A10_innerElement&&this.C6C_element.appendChild(this.A10_innerElement),this.ADA_detachDom=(0,y.sT)(this,this.C6C_element,null!==(t=this.A10_innerElement)&&void 0!==t?t:this.C6C_element),this.C6C_element.classList.toggle(v,!this._props.transparent),this._props.transparent||this.FDF__watchThemeContext()}_onUpdate(t){var e,i,s;void 0!==t.transparent&&(t.transparent?(null===(e=this.C6C_element)||void 0===e||e.classList.remove(v,A),null===(i=this.B2D_unwatchThemeContext)||void 0===i||i.call(this)):(null===(s=this.C6C_element)||void 0===s||s.classList.add(v),this.FDF__watchThemeContext()))}FDF__watchThemeContext(){this.B2D_unwatchThemeContext=this._watchContext(E.N,(()=>this.FDA_updateTheme()),{immediate:!0})}_onDetach(){var t,e;null===(t=this.ADA_detachDom)||void 0===t||t.call(this),this.ADA_detachDom=void 0,this.C6C_element=void 0,null===(e=this.B2D_unwatchThemeContext)||void 0===e||e.call(this),this.B2D_unwatchThemeContext=void 0}FDA_updateTheme(){const t=this._consumeContext(E.N);if(!t||!this.C6C_element)return;const{theme:e}=t;this.C6C_element.classList.toggle(A,"dark"===e)}}C=D.sq,S.defaultProps=x,S[C]=(t,{reactify:e,React:i,ReactDOM:s})=>{const o=e.entity(class extends t{constructor(t){var{controlElement:e}=t;super(f(t,["controlElement"])),this.FDA_controlElement=e}_createDom(){return this.FDA_controlElement}}),n=i.forwardRef(((t,e)=>{var{children:n}=t,r=f(t,["children"]);const[a]=i.useState((()=>document.createElement("ymaps")));return i.createElement(i.Fragment,null,i.createElement(o,Object.assign({},r,{ref:e,controlElement:a}),s.createPortal(n,a)))}));return n.displayName="YMapControlContainer",n}},7422:(t,e,i)=>{i.d(e,{A:()=>x,J:()=>A});var s=i(27845),o=i(14001),n=i(70724),r=i(93379),a=i.n(r),h=i(7795),l=i.n(h),c=i(90569),d=i.n(c),u=i(3565),_=i.n(u),p=i(19216),m=i.n(p),g=i(44589),y=i.n(g),E=i(91847),f={};f.styleTagTransform=y(),f.setAttributes=_(),f.insert=d().bind(null,"head"),f.domAPI=l(),f.insertStyleElement=m();a()(E.Z,f);E.Z&&E.Z.locals&&E.Z.locals;var C=function(t,e){var i={};for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&e.indexOf(s)<0&&(i[s]=t[s]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(s=Object.getOwnPropertySymbols(t);o<s.length;o++)e.indexOf(s[o])<0&&Object.prototype.propertyIsEnumerable.call(t,s[o])&&(i[s[o]]=t[s[o]])}return i};var D,M=i(99506),v=i(13722);class A extends n.SY{_onAttach(){var t;this.C6C_element=document.createElement("button"),this.C6C_element.className="ymaps3x0--button ymaps3x0--control-button",this.C6C_element.type="button",this._props.element&&this.C6C_element.appendChild(this._props.element),this.ADA_detachDom=(0,o.sT)(this,this.C6C_element,null!==(t=this._props.element)&&void 0!==t?t:this.C6C_element),this.D7D_updateElement(this._props),this.B2D_unwatchThemeContext=this._watchContext(v.N,(()=>this.FDA_updateTheme()),{immediate:!0})}D7D_updateElement(t){this.C6C_element&&(void 0!==t.disabled&&(this.C6C_element.disabled=t.disabled),void 0!==t.text&&(this.C6C_element.textContent=t.text),void 0!==t.onClick&&(this.C6C_element.onclick=t.onClick),void 0!==t.color&&(this.C6C_element.style.color=t.color),void 0!==t.background&&(this.C6C_element.style.backgroundColor=t.background))}_onUpdate(t){this.D7D_updateElement(t)}_onDetach(){var t,e;null===(t=this.ADA_detachDom)||void 0===t||t.call(this),this.ADA_detachDom=void 0,this.C6C_element=void 0,null===(e=this.B2D_unwatchThemeContext)||void 0===e||e.call(this),this.B2D_unwatchThemeContext=void 0}FDA_updateTheme(){const t=this._consumeContext(v.N);if(!t||!this.C6C_element)return;const{theme:e}=t,i="ymaps3x0--control-button__dark";"dark"===e?this.C6C_element.classList.add(i):"light"===e&&this.C6C_element.classList.remove(i)}}class x extends n._p{_onAttach(){this.B35_button=new A(this._props),this.FEA_control=(new s.d).addChild(this.B35_button),this.addChild(this.FEA_control)}_onUpdate(t){var e;null===(e=this.B35_button)||void 0===e||e.update(t)}_onDetach(){this.removeChild(this.FEA_control)}get text(){return this._props.text}}D=M.sq,x[D]=(t,{reactify:e,React:i,ReactDOM:s})=>{const o=e.entity(class extends t{constructor(t){super(t)}}),n=i.forwardRef(((t,e)=>{var{children:n,element:r}=t,a=C(t,["children","element"]);const[h]=i.useState((()=>document.createElement("ymaps")));return void 0!==r?i.createElement(o,Object.assign({},a,{ref:e,element:r})):i.createElement(o,Object.assign({},a,{ref:e,element:h}),s.createPortal(n,h))}));return n.displayName="YMapControlButtonContainer",n}},83853:(t,e,i)=>{i.d(e,{l:()=>C,f:()=>M});var s=i(28277),o=i(14001),n=i(70724),r=i(93379),a=i.n(r),h=i(7795),l=i.n(h),c=i(90569),d=i.n(c),u=i(3565),_=i.n(u),p=i(19216),m=i.n(p),g=i(44589),y=i.n(g),E=i(66621),f={};f.styleTagTransform=y(),f.setAttributes=_(),f.insert=d().bind(null,"head"),f.domAPI=l(),f.insertStyleElement=m();a()(E.Z,f);E.Z&&E.Z.locals&&E.Z.locals;const C=new s._y("ControlContext");s.zS.add(C);const D={top:"vertical",left:"horizontal",bottom:"vertical",right:"horizontal"};class M extends n.SY{constructor(t,e){super(t,e)}_onAttach(){this.C6C_element=document.createElement("ymaps"),this._onUpdate(this._props),this.ADA_detachDom=(0,o.sT)(this,this.C6C_element,this.C6C_element)}_onUpdate(t){if(!t.position&&!t.orientation)return;const e=function(t){switch(t.position){case"top":return["top","center","horizontal"];case"left":return["center","left","vertical"];case"bottom":return["bottom","center","horizontal"];case"right":return["center","right","vertical"];default:const[e,i]=t.position.split(" "),s=t.orientation||"horizontal";if("vertical"===D[e]&&"horizontal"===D[i])return[e,i,s];if("horizontal"===D[e]&&"vertical"===D[i])return[i,e,s]}return null}(this._props);this.B46__implProvideContext(C,{position:e}),this.C6C_element.className="ymaps3x0--controls",e?e.forEach((t=>{this.C6C_element.className+=` ymaps3x0--controls_${t}`})):(this.C6C_element.style.setProperty("display","none"),console.error(`Cannot display controls: unknown position: ${this._props.position}`))}_onDetach(){var t;null===(t=this.ADA_detachDom)||void 0===t||t.call(this),this.ADA_detachDom=void 0,this.C6C_element=void 0}}},77099:(t,e,i)=>{i.d(e,{f$:()=>g,EQ:()=>y});var s=i(21833),o=i(31599),n=i(35150),r=i(6049),a=i(30501);let h=0;function l(t,e){const i="jsonp_ymaps3_coverage_"+h++,s=new URLSearchParams({l:t.layers.join(","),lang:t.lang,callback:i}),o=`${t.host}v2/layers_stamps?${s.toString()}`;return(0,a.R6)({url:o,callbackName:i},e).then((t=>{const e={layers:new Map};for(const[i,s]of Object.entries(t.data))e.layers.set(i,{id:i,version:s.version,zoomRange:{min:s.zoomRange[0],max:s.zoomRange[1]}});return e}))}let c;function d(t){throw function(t,e){c?c(e||{},t):window.console.error("There is no error logger to log the error:",t)}(t),t}var u=i(70724),_=i(19649),p=i(28277);function m(t,e){let i;return(...s)=>{clearTimeout(i),i=setTimeout((()=>t(...s)),e)}}const g=new p._y("coverage");p.zS.add(g);class y extends u._p{constructor(t={}){super(t),this.B29_subscriptions=new Set,this.C71_currentIntervalMs=1/0,this.A11_queueRequest=m(this.D94_request.bind(this),16),this.FE5_queueRequestStamps=m(this._requestStamps.bind(this),16);const e=new o.t({onUpdate:m(this.D94_request.bind(this),1e3)});this.addChild(e)}subscribe(t){const e=new E(t,(()=>{this.B29_subscriptions.delete(e),e.versioned&&this._scheduleStampsRequests()}));return this.B29_subscriptions.add(e),"map"===e.layer&&"admin"===t.maptype&&(e.copyrightsOptions={logo:!1}),this.A11_queueRequest(),t.versioned&&(this.FE5_queueRequestStamps(),this._scheduleStampsRequests()),e}_onAttach(){this._watchContext(s.X,(()=>this.FD1_onMapContextChange()),{immediate:!0})}_onDetach(){var t;null===(t=this.EC4_abortController)||void 0===t||t.abort(),this.EC4_abortController=void 0}_scheduleStampsRequests(){const t=Array.from(this.B29_subscriptions).filter((t=>t.versioned&&t.versioned.interval>0)).map((t=>t.versioned.interval)),e=Math.min(...t);0!==e&&e!==this.C71_currentIntervalMs&&(this.C56_stampsRequestsInterval&&clearInterval(this.C56_stampsRequestsInterval),this.FE5_queueRequestStamps(),this.C71_currentIntervalMs=e,this.C56_stampsRequestsInterval=setInterval((()=>{this._requestStamps()}),this.C71_currentIntervalMs)),0===e&&(this.C71_currentIntervalMs=1/0,this.C56_stampsRequestsInterval&&clearInterval(this.C56_stampsRequestsInterval))}FD1_onMapContextChange(){this._consumeContext(s.X)&&this.D94_request()}D94_request(){var t;const e=this._consumeContext(s.X),i=this.root;if(!e.map||!i)return;const o=function(t,e){const i=new Set,s=new Set,o=new Set;if(e.forEach((t=>{o.add(t),i.add(t.layer),t.maptype&&s.add(t.maptype)})),0===i.size)return;return{host:t.meta.hosts.apiCoverageService,coordinates:t.map.center,zoom:t.map.zoom,lang:t.meta.lang,layers:Array.from(i).sort(),maptype:Array.from(s).sort()[0],subscriptions:o}}(e,this.B29_subscriptions);if(a=o,h=this.AEA_coverageArgs,a===h||a&&h&&function(t,e){if(t===e)return!0;if(t.size!==e.size)return!1;for(const i of t)if(!e.has(i))return!1;return!0}(a.subscriptions,h.subscriptions)&&a.host===h.host&&a.coordinates.join(",")===h.coordinates.join(",")&&a.zoom===h.zoom&&a.lang===h.lang&&a.layers.join(",")===h.layers.join(",")&&a.maptype===h.maptype)return;var a,h;if(null===(t=this.EC4_abortController)||void 0===t||t.abort(),this.EC4_abortController=void 0,this.AEA_coverageArgs=o,!this.AEA_coverageArgs)return;this.EC4_abortController=new AbortController;const l=e.map;(function(t,e){const{min:i,max:s}=(0,n.oF)(),o=(0,r.q)(t.zoom,i,s),a=new URLSearchParams({l:t.layers.join(","),ll:t.coordinates.join(","),z:Math.round(o).toString(),lang:t.lang});void 0!==t.maptype&&"map"!==t.maptype&&a.set("maptype",t.maptype);const h=`${t.host}v2?${a.toString()}`;return fetch(h,{signal:e}).then((t=>{if(!t.ok)throw new Error(`Failed to fetch ${t.url} Status: ${t.status}`);return t.json()})).then((t=>{const e={layers:new Map};for(const i of t){const t=i.zoomRange?{min:i.zoomRange[0],max:i.zoomRange[1]}:void 0,s=Object.assign(Object.assign({},i),{zoomRange:t});e.layers.set(s.id,s)}return e}))})(this.AEA_coverageArgs,this.EC4_abortController.signal).then((t=>{var e;const i=this.root,o=null===(e=this._consumeContext(s.X))||void 0===e?void 0:e.map;i&&l===o&&!o.destroyed&&this.B29_subscriptions.forEach((e=>{var i;const s=t.layers.get(e.layer);s&&(e.copyrights=s.copyrights,e.copyrightsOptions=null!==(i=s.copyrightsOptions)&&void 0!==i?i:{},e.versioned||(e.zoomRange=s.zoomRange),e.onUpdate())}))})).catch((t=>{(0,_.D)(t)||(this._props.onError?this._props.onError(t):d(t))}))}_requestStamps(){var t;const e=this._consumeContext(s.X),i=this.root;if(!e.map||!i)return;const o={host:e.meta.hosts.apiCoverageService,lang:e.meta.lang,layers:Array.from(this.B29_subscriptions).filter((t=>t.versioned)).map((t=>t.layer))};null===(t=this.A18_stampsAbortController)||void 0===t||t.abort(),this.A18_stampsAbortController=void 0,0!==o.layers.length&&(this.A18_stampsAbortController=new AbortController,l(o,this.A18_stampsAbortController.signal).then((t=>{this.B29_subscriptions.forEach((e=>{const i=t.layers.get(e.layer);i&&(e.version=i.version,e.zoomRange=i.zoomRange,e.onUpdate())}))})).catch((t=>{(0,_.D)(t)||(this._props.onError?this._props.onError(t):d(t))})))}}class E{constructor(t,e){this.A17_onDestroy=e,this.copyrightsOptions={},this.layer=t.layer,this.maptype=t.maptype,this.onUpdate=t.onUpdate,this.versioned=t.versioned}destroy(){this.A17_onDestroy()}}},6546:(t,e,i)=>{i.d(e,{h:()=>a});var s=i(85095),o=i(21093),n=i(70724);const r=Object.freeze({visible:!0,source:"ymaps3x0-default-feature"});class a extends n._p{_onAttach(){const{source:t,zIndex:e}=this._props;this.EBC_dataSource=new s.v({id:t}),this.FEE_featuresLayer=new o.F({type:"features",source:t,zIndex:e}),this.C5A_markerLayer=new o.F({type:"markers",source:t,zIndex:e}),this.addChild(this.EBC_dataSource),this._props.visible&&(this.addChild(this.FEE_featuresLayer),this.addChild(this.C5A_markerLayer))}_onUpdate(t){var e,i,s;const{source:o,zIndex:n}=this._props;null===(e=this.EBC_dataSource)||void 0===e||e.update({id:o}),null===(i=this.FEE_featuresLayer)||void 0===i||i.update({source:o,zIndex:n}),null===(s=this.C5A_markerLayer)||void 0===s||s.update({source:o,zIndex:n}),void 0!==t.visible&&this.FEE_featuresLayer&&this.C5A_markerLayer&&(t.visible?(this.addChild(this.FEE_featuresLayer),this.addChild(this.C5A_markerLayer)):(this.removeChild(this.FEE_featuresLayer),this.removeChild(this.C5A_markerLayer)))}_onDetach(){this.removeChild(this.EBC_dataSource),this.removeChild(this.FEE_featuresLayer),this.removeChild(this.C5A_markerLayer)}}a.defaultProps=r},6226:(t,e,i)=>{i.d(e,{V:()=>c});var s=i(57949),o=i(21093),n=i(21833),r=i(21235),a=i(70724),h=i(77099);const l=(0,r._)({visible:!0,source:"ymaps3x0-default-satellite"});class c extends a._p{_onAttach(){const{source:t}=this._props;this.EBC_dataSource=new s.b(this.A18_getTileDataSourceProps()),this.AEC_layer=new o.F({source:t,type:"satellite"}),this.addChild(this.EBC_dataSource),this._props.visible&&this.addChild(this.AEC_layer),this.DA1_unwatchMapContext=this._watchContext(n.X,(()=>{var t;null===(t=this.EBC_dataSource)||void 0===t||t.update(this.A18_getTileDataSourceProps())}))}_onDetach(){var t,e;null===(t=this.C74_coverageSubscription)||void 0===t||t.destroy(),this.C74_coverageSubscription=void 0,this.removeChild(this.AEC_layer),this.removeChild(this.EBC_dataSource),null===(e=this.DA1_unwatchMapContext)||void 0===e||e.call(this),this.DA1_unwatchMapContext=void 0}_onUpdate(t){var e,i;const{source:s}=this._props;null===(e=this.EBC_dataSource)||void 0===e||e.update({id:s}),null===(i=this.AEC_layer)||void 0===i||i.update({source:s}),void 0!==t.visible&&this.AEC_layer&&(t.visible?this.addChild(this.AEC_layer):this.removeChild(this.AEC_layer))}C62_createTileUrl(t){const{meta:e}=this._consumeContext(n.X);return t=t.replace("%l",`lang=${e.lang}`).replace("%c","x={{x}}&y={{y}}&z={{z}}&scale={{scale}}"),t+="&v="+e.layers.sat.version,e.apikey&&(t+="&apikey="+e.apikey),t}A18_getTileDataSourceProps(){var t,e,i,s,o,r;const{meta:a}=this._consumeContext(n.X);return null!==(t=this.C74_coverageSubscription)&&void 0!==t||(this.C74_coverageSubscription=null===(e=this._consumeContext(h.f$))||void 0===e?void 0:e.subscribe({layer:"sat",maptype:void 0,onUpdate:()=>{this.EBC_dataSource&&this.C74_coverageSubscription&&this.EBC_dataSource.update({copyrights:this.C74_coverageSubscription.copyrights,zoomRange:this.C74_coverageSubscription.zoomRange})}})),{id:this._props.source,copyrights:null!==(s=null===(i=this.C74_coverageSubscription)||void 0===i?void 0:i.copyrights)&&void 0!==s?s:[],zoomRange:null!==(r=null===(o=this.C74_coverageSubscription)||void 0===o?void 0:o.zoomRange)&&void 0!==r?r:{min:0,max:19},clampMapZoom:!0,raster:{type:"satellite",fetchTile:this.C62_createTileUrl(a.hosts.satTiles)}}}}c.defaultProps=l},18593:(t,e,i)=>{i.d(e,{f:()=>g});var s=i(75155),o=i(57949),n=i(21093),r=i(21833),a=i(13722),h=i(77605),l=i(21235),c=i(70724),d=i(77099),u=i(21176);const _={visible:!0,source:"ymaps3x0-default-scheme",hotspotsEnabled:!0,layers:{ground:{zIndex:1e3},buildings:{zIndex:1100},icons:{zIndex:1200},labels:{zIndex:1300}},get layersInfo(){return Object.keys(_.layers).reduce(((t,e)=>(t[e]={type:e,zIndex:_.layers[e].zIndex},t)),{})},clampMapZoom:!0};let p=!1;const m={map:"map",admin:"admin",driving:"driving",transit:"transit","future-map":"future_map","legacy-map":"map"};class g extends c._p{constructor(){super(...arguments),this.D9E_layers={}}_onAttach(){const{source:t,layers:e}=this._props;this.EBC_dataSource=new o.b(this.A18_getTileDataSourceProps()),this.addChild(this.EBC_dataSource),Object.keys(e).forEach((i=>{const s=new n.F(Object.assign({source:t,type:i},e[i]));this.D9E_layers[i]=s,this._props.visible&&this.addChild(s)}));const{meta:i}=this._consumeContext(r.X);this._props.customization&&!i.allowedFeatures.customization&&console.warn("[ymaps] Map customization is not allowed and will be ignored."),this.DA1_unwatchMapContext=this._watchContext(r.X,(()=>{var t;null===(t=this.EBC_dataSource)||void 0===t||t.update(this.A18_getTileDataSourceProps())})),this._props.theme||(this.B2D_unwatchThemeContext=this._watchContext(a.N,(()=>this.FDA_updateTheme()),{immediate:!0})),this._consumeContext(h.e)&&this._watchContext(h.e,(()=>{var t;null===(t=this.EBC_dataSource)||void 0===t||t.update(this.A18_getTileDataSourceProps())}))}_onDetach(){var t,e,i;null===(t=this.C74_coverageSubscription)||void 0===t||t.destroy(),this.C74_coverageSubscription=void 0,Object.keys(this.D9E_layers).forEach((t=>this.removeChild(this.D9E_layers[t]))),this.D9E_layers={},this.removeChild(this.EBC_dataSource),null===(e=this.DA1_unwatchMapContext)||void 0===e||e.call(this),this.DA1_unwatchMapContext=void 0,null===(i=this.B2D_unwatchThemeContext)||void 0===i||i.call(this),this.B2D_unwatchThemeContext=void 0}_onUpdate(t){var e,i;const{source:s,layers:o}=this._props;null===(e=this.EBC_dataSource)||void 0===e||e.update({id:s}),Object.keys(this.D9E_layers).forEach((t=>{o[t]||this.removeChild(this.D9E_layers[t])}));const r={};Object.keys(o).forEach((t=>{let e=this.D9E_layers[t];e?e.update(Object.assign({source:s,type:t},o[t])):e=new n.F(Object.assign({source:s,type:t},o[t])),r[t]=e,this._props.visible?this.addChild(e,this.children.length):this.removeChild(e)})),this.D9E_layers=r,(t.customization||t.theme||void 0!==t.hotspotsEnabled)&&(null===(i=this.EBC_dataSource)||void 0===i||i.update(this.A18_getTileDataSourceProps()))}A18_getTileDataSourceProps(){var t,e,i,o,n,a;const l=this._consumeContext(r.X),c=this._consumeContext(h.e),_="dark"===this._props.theme;return this._props.customization&&this.root&&!p&&(!function(t,e=(0,u._K)()){const i=(0,u.yY)(e);if(i){const e=new URLSearchParams({apikey:i.meta.apikey,token:i.meta.token}),s=`${i.meta.hosts.apiCounterService}?${e}`;fetch(s,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({counters:t})}).catch()}}({custom_map_hits:1},this.root.config),p=!0),this.C74_coverageSubscription&&this.C74_coverageSubscription.maptype===(null==c?void 0:c.type)||(null===(t=this.C74_coverageSubscription)||void 0===t||t.destroy(),this.C74_coverageSubscription=null===(e=this._consumeContext(d.f$))||void 0===e?void 0:e.subscribe({layer:"map",maptype:null==c?void 0:c.type,onUpdate:()=>{var t;this.C74_coverageSubscription&&this.EBC_dataSource&&this.EBC_dataSource.update({copyrights:null!==(t=this.C74_coverageSubscription.copyrights)&&void 0!==t?t:[],copyrightsOptions:this.C74_coverageSubscription.copyrightsOptions,zoomRange:this.C74_coverageSubscription.zoomRange})}})),{id:this._props.source,copyrights:null!==(o=null===(i=this.C74_coverageSubscription)||void 0===i?void 0:i.copyrights)&&void 0!==o?o:[],copyrightsOptions:null===(n=this.C74_coverageSubscription)||void 0===n?void 0:n.copyrightsOptions,zoomRange:null===(a=this.C74_coverageSubscription)||void 0===a?void 0:a.zoomRange,raster:{type:"ground",fetchTile:f(l,l.meta.hosts.mapTiles,c,this._props.theme),fetchHotspots:this._props.hotspotsEnabled?(0,s.E)(f(l,l.meta.hosts.mapjTiles,c)):void 0},vector:{priority:"high",requestTileSize:"X1",tileBeltSize:1,tileUrl:C(l,l.meta.hosts.vectorTiles,!0,c),meshUrl:C(l,l.meta.hosts.vectorMeshes,!0),imageUrl:C(l,l.meta.hosts.vectorImages),glyphRangeUrl:C(l,l.meta.hosts.vectorGlyphs),customization:l.meta.allowedFeatures.customization?this._props.customization:void 0,theme:_?"dark":void 0},clampMapZoom:this._props.clampMapZoom}}FDA_updateTheme(){const t=this._consumeContext(a.N);t&&this.update({theme:t.theme})}}g.defaultProps=(0,l._)(_);const y=new Map([["EPSG:3857","web_mercator"]]);function E({map:t}){if(!t.projection.type)return"";const e=y.get(t.projection.type);return e?"&projection="+e:""}function f(t,e,i,s){let o=e.replace("%l",`lang=${t.meta.lang}`).replace("%d","{{d|4}}").replace("%c","x={{x}}&y={{y}}&z={{z}}&scale={{scale}}");return o+="&v="+t.meta.layers.map.version,t.meta.apikey&&(o+="&apikey="+t.meta.apikey),o+=E(t),"dark"===s&&(o+="&theme=dark"),(null==i?void 0:i.type)&&m[i.type]&&(o+=`&maptype=${m[i.type]}`),o}function C(t,e,i=!1,s){let o=e.replace("{{lang}}",t.meta.lang).replace("{{version}}",t.meta.layers.map.version);return i&&(o+=E(t)),t.meta.apikey&&(o+="&apikey="+t.meta.apikey),(null==s?void 0:s.type)&&m[s.type]&&(o+=`&maptype=${m[s.type]}`),o}},70724:(t,e,i)=>{i.d(e,{Fh:()=>o,SY:()=>r,_p:()=>n});var s=i(28277);class o extends s.L0{get root(){throw new Error("Not implemented")}get parent(){throw new Error("Not implemented")}}o=s.L0;class n extends s.n5{get root(){throw new Error("Not implemented")}get parent(){throw new Error("Not implemented")}}n=s.n5;class r extends s.MX{get root(){throw new Error("Not implemented")}get parent(){throw new Error("Not implemented")}addChild(t,e){return super.addChild(t,e)}removeChild(t){return super.removeChild(t)}}r=s.MX},29487:(t,e,i)=>{i.d(e,{W:()=>c});var s=i(78277),o=i(70724),n=i(21833),r=i(83749),a=i(6546);const h=Object.freeze({source:a.h.defaultProps.source}),l=new WeakSet;class c extends o.Fh{get id(){return this.FD5_id}constructor(t){super(t)}get properties(){return this._props.properties}get geometry(){const t=this._consumeContext(n.X),e=null==t?void 0:t.map.getFeatureById(this.D8E_source,this.FD5_id);return e?e.geometry:this._props.geometry}_onAttach(){const{map:t}=this._consumeContext(n.X);if(this.FD5_id=this._props.id,this.D8E_source=this._props.source,void 0===t.getDataSource(this.D8E_source)){if(a.h.defaultProps.source===this.D8E_source)throw new Error("You are using default data source for features, but its not on added to map. Maybe you forgot to add YMapDefaultFeaturesLayer.");throw new Error(`The DataSource with id='${this.D8E_source}' was not found. Maybe you forgot to add it.`)}t.addFeature(this.D8E_source,{type:"Feature",id:this.FD5_id,geometry:this._props.geometry,cookie:this,draggable:this._props.draggable,blockBehaviors:this._props.blockBehaviors,blockEvents:this._props.blockEvents,mapFollowsOnDrag:this._props.mapFollowsOnDrag,disableRoundCoordinates:this._props.disableRoundCoordinates,hideOutsideViewport:this._props.hideOutsideViewport},this._props.style),l.has(t)||(l.add(t),t.dragger.on("dragStart",c.EBD_onDragStart),t.dragger.on("dragMove",c.C5F_onDragMove),t.dragger.on("dragEnd",c.B3D_onDragEnd),t.events.on("click",r.$,c.B41_onClick),t.events.on("fastclick",r.$,c.EA6_onFastClick),t.events.on("dblclick",r.$,c.C5B_onDoubleClick))}_onDetach(){const{map:t}=this._consumeContext(n.X);t.removeFeatureById(this.D8E_source,this.FD5_id)}_onUpdate({id:t,source:e,geometry:i}){var s;const{map:o}=this._consumeContext(n.X);(t||e)&&(o.removeFeatureById(this.D8E_source,this.FD5_id),e&&(this.D8E_source=e),t&&(this.FD5_id=t)),null!=i||(i=null===(s=o.getFeatureById(this.D8E_source,this.FD5_id))||void 0===s?void 0:s.geometry),o.upsertFeature(this.D8E_source,{type:"Feature",id:this.FD5_id,geometry:null!=i?i:this._props.geometry,cookie:this,draggable:this._props.draggable,blockBehaviors:this._props.blockBehaviors,blockEvents:this._props.blockEvents,mapFollowsOnDrag:this._props.mapFollowsOnDrag,disableRoundCoordinates:this._props.disableRoundCoordinates,hideOutsideViewport:this._props.hideOutsideViewport},this._props.style)}_getDefaultProps(){var t;return null!==(t=this.D83_defaultPropsId)&&void 0!==t||(this.D83_defaultPropsId="__auto_"+String(c.FE7_uid++)),Object.assign(Object.assign({},c.defaultProps),{id:this.D83_defaultPropsId})}static EBD_onDragStart(t){const e=t.object.cookie;if(!(e instanceof c))return;if(!e._props.onDragStart)return;return e._consumeContext(n.X)?e._props.onDragStart(e._props.geometry.coordinates):void 0}static C5F_onDragMove(t){const e=t.object.cookie;if(!(e instanceof c))return;if(!e._props.onDragMove)return;const i=e._consumeContext(n.X);if(!i)return;const o=(0,s.ZE)(t.newGeometry,(t=>i.map.projection.fromWorldCoordinates(t)));return e._props.onDragMove(o.coordinates)}static B3D_onDragEnd(t){const e=t.object.cookie;if(!(e instanceof c))return;if(!e._props.onDragEnd)return;const i=e._consumeContext(n.X);if(!i)return;const o=(0,s.ZE)(t.newGeometry,(t=>i.map.projection.fromWorldCoordinates(t)));return e._props.onDragEnd(o.coordinates)}}c.defaultProps=h,c.FE7_uid=0,c.B41_onClick=(t,e,i)=>{var s,o;"feature"===t.type&&t.feature.cookie instanceof c&&(null===(o=(s=t.feature.cookie._props).onClick)||void 0===o||o.call(s,i,e))},c.EA6_onFastClick=(t,e,i)=>{var s,o;"feature"===t.type&&t.feature.cookie instanceof c&&(null===(o=(s=t.feature.cookie._props).onFastClick)||void 0===o||o.call(s,i,e))},c.C5B_onDoubleClick=(t,e,i)=>{var s,o;"feature"===t.type&&t.feature.cookie instanceof c&&(null===(o=(s=t.feature.cookie._props).onDoubleClick)||void 0===o||o.call(s,i,e))}},85095:(t,e,i)=>{i.d(e,{v:()=>n});var s=i(21833),o=i(70724);class n extends o.Fh{_onAttach(){const{map:t}=this._consumeContext(s.X);t.addDataSource(this._props.id,{type:"geojson"})}_onDetach(){const{map:t}=this._consumeContext(s.X);t.removeDataSource(this._props.id)}_onUpdate(){this._onDetach(),this._onAttach()}}},78445:(t,e,i)=>{i.d(e,{E:()=>o});var s=i(65005);class o{constructor(t,e){this.geometry=t,this.properties=e,this.id="string"==typeof e.id?e.id:"ymaps-hotspot-"+o.FE7_uid++,Object.defineProperty(this,s.e,{value:this,writable:!1,enumerable:!1})}}o.FE7_uid=0},21093:(t,e,i)=>{i.d(e,{F:()=>r});var s=i(21833),o=i(70724);const n=Object.freeze({zIndex:1500});class r extends o.Fh{_getDefaultProps(t){return Object.assign(Object.assign({},r.defaultProps),{id:`${t.source}:${t.type}`})}_onAttach(){this._consumeContext(s.X).upsertLayer(this._props)}_onDetach(){this._consumeContext(s.X).removeLayer(this._props)}_onUpdate(){this._consumeContext(s.X).upsertLayer(this._props)}}r.defaultProps=n},31599:(t,e,i)=>{i.d(e,{t:()=>_});var s=i(79655),o=i(29487),n=i(88546),r=i(21833),a=i(70724),h=i(78445),l=i(96883);function c(t){return{center:t.center.slice(),zoom:t.zoom,get bounds(){return t.bounds.map((t=>t.slice()))}}}function d(t){return{azimuth:t.azimuth,tilt:t.tilt}}function u(t){return Object.assign({},t.size)}class _ extends a.Fh{constructor(){super(...arguments),this.A9B_domHandlers=new Map,this.D7B_mapHandlers=new Map,this.C57_behaviorsHandlers=new Map}FDE_subscribeDomEvent({map:t},e,i){var s;const o=null!==(s=this._props.layer)&&void 0!==s?s:"any";if(!i||!o)return;const r=(t,e)=>{var s;switch(null==t?void 0:t.type){case"hotspot":{const o=this.D89__getRealCookie(t.feature.cookie),n=o instanceof h.E?o:new h.E(t.feature.geometry,null!==(s=t.feature.properties[l.u])&&void 0!==s?s:t.feature.properties);return i({type:"hotspot",entity:n,source:t.source,layer:t.layer},e)}case"feature":const o=this.D89__getRealCookie(t.feature.cookie);return o instanceof n.K?i({type:"marker",entity:o,source:t.source,layer:t.layer},e):i({type:"feature",entity:o,source:t.source,layer:t.layer},e);default:return i(void 0,e)}};t.events.on(e,o,r),this.A9B_domHandlers.set(e,{layer:o,innerHandler:r})}D8B_subscribeMapEvent(t,e,i){if(!i)return;const{map:o}=t;let n;if("update"===e){let s;n=()=>{t.isUpdating?null!=s||(s=t.group().on("afterUpdate",n)):(null==s||s.offAll(),s=void 0,i({type:e,camera:d(o),location:c(o),mapInAction:o.isInAction}))}}else"resize"===e?n=()=>i({type:e,size:u(o),mapInAction:o.isInAction}):ymaps3.strictMode&&(0,s.h)(!1,`Invalid MapEventType ${e}`);o.on(e,n),this.D7B_mapHandlers.set(e,n)}FE5_subscribeMapIndoorPlansEvent({map:t},e,i){if(!i)return;const s=()=>i({type:e,indoorPlans:t.getIndoorPlans()});t.on(e,s),this.D7B_mapHandlers.set(e,s)}C53_subscribeMapStateChanged({map:t},e,i){if(!i)return;const s=()=>i({getLayerState(e,i,s){if(!i)throw new Error("layerType is required");return t.getLayerState(e,i,s)}});t.on("stateChanged",s),this.D7B_mapHandlers.set(e,s)}D98_subscribeActionEvent({map:t},e,i){if(!i)return;const s=e=>i({type:e,camera:d(t),location:c(t)});t.behaviors.on(e,s),this.C57_behaviorsHandlers.set(e,s)}C77_subscribe(){const t=this._consumeContext(r.X),e=this._props;this.FDE_subscribeDomEvent(t,"touchstart",e.onTouchStart),this.FDE_subscribeDomEvent(t,"touchmove",e.onTouchMove),this.FDE_subscribeDomEvent(t,"touchend",e.onTouchEnd),this.FDE_subscribeDomEvent(t,"touchcancel",e.onTouchCancel),this.FDE_subscribeDomEvent(t,"pointerdown",e.onPointerDown),this.FDE_subscribeDomEvent(t,"pointermove",e.onPointerMove),this.FDE_subscribeDomEvent(t,"pointerup",e.onPointerUp),this.FDE_subscribeDomEvent(t,"pointercancel",e.onPointerCancel),this.FDE_subscribeDomEvent(t,"fastclick",e.onFastClick),this.FDE_subscribeDomEvent(t,"click",e.onClick),this.FDE_subscribeDomEvent(t,"dblclick",e.onDblClick),this.FDE_subscribeDomEvent(t,"mouseup",e.onMouseUp),this.FDE_subscribeDomEvent(t,"mousedown",e.onMouseDown),this.FDE_subscribeDomEvent(t,"mouseenter",e.onMouseEnter),this.FDE_subscribeDomEvent(t,"mouseleave",e.onMouseLeave),this.FDE_subscribeDomEvent(t,"mousemove",e.onMouseMove),this.FDE_subscribeDomEvent(t,"contextmenu",e.onContextMenu),this.FDE_subscribeDomEvent(t,"rightdblclick",e.onRightDblClick),this.D8B_subscribeMapEvent(t,"update",e.onUpdate),this.D8B_subscribeMapEvent(t,"resize",e.onResize),this.FE5_subscribeMapIndoorPlansEvent(t,"indoorPlansChanged",e.onIndoorPlansChanged),this.C53_subscribeMapStateChanged(t,"stateChanged",e.onStateChanged),this.D98_subscribeActionEvent(t,"actionStart",e.onActionStart),this.D98_subscribeActionEvent(t,"actionEnd",e.onActionEnd)}C5F_unsubscribe(){const t=this._consumeContext(r.X);this.A9B_domHandlers.forEach((({layer:e,innerHandler:i},s)=>{t.map.events.off(s,e,i)})),this.D7B_mapHandlers.forEach(((e,i)=>{t.map.offSingle(i,e)})),this.C57_behaviorsHandlers.forEach(((e,i)=>{t.map.behaviors.offSingle(i,e)}))}_onAttach(){this.C77_subscribe()}_onDetach(){this.C5F_unsubscribe()}_onUpdate(){this.C5F_unsubscribe(),this.C77_subscribe()}D89__getRealCookie(t){return t instanceof o.W&&t.parent instanceof n.K?t.parent:t}}},88546:(t,e,i)=>{i.d(e,{K:()=>u});var s=i(29487),o=function(t,e){var i={};for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&e.indexOf(s)<0&&(i[s]=t[s]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(s=Object.getOwnPropertySymbols(t);o<s.length;o++)e.indexOf(s[o])<0&&Object.prototype.propertyIsEnumerable.call(t,s[o])&&(i[s[o]]=t[s[o]])}return i};var n,r=i(14001),a=i(6546),h=i(70724),l=i(99506),c=function(t,e){var i={};for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&e.indexOf(s)<0&&(i[s]=t[s]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(s=Object.getOwnPropertySymbols(t);o<s.length;o++)e.indexOf(s[o])<0&&Object.prototype.propertyIsEnumerable.call(t,s[o])&&(i[s[o]]=t[s[o]])}return i};const d=Object.freeze({draggable:!1,mapFollowsOnDrag:!1,blockEvents:!1,blockBehaviors:!1,hideOutsideViewport:!1,zIndex:0,source:a.h.defaultProps.source});class u extends h.SY{get properties(){return this._props.properties}get coordinates(){var t,e;return null!==(e=null===(t=this.B43__feature)||void 0===t?void 0:t.geometry.coordinates)&&void 0!==e?e:this._props.coordinates}constructor(t,e){super(t,{container:!0}),this.element=null!=e?e:document.createElement("ymaps")}_onAttach(){var t;this.B43__feature=new s.W(Object.assign({id:this._props.id,geometry:{type:"Point",coordinates:this._props.coordinates},style:{zIndex:null!==(t=this._props.zIndex)&&void 0!==t?t:0,element:this.element}},this._props)),this._addDirectChild(this.B43__feature);const[e,i]=(0,r.vi)(this,this.element);this.A12_destroyDomCtx=i,this.B46__implProvideContext(r.dh,e)}_onDetach(){var t;null===(t=this.A12_destroyDomCtx)||void 0===t||t.call(this),this._removeDirectChild(this.B43__feature),this.B43__feature=void 0}_onUpdate(t){var e,{coordinates:i,zIndex:s}=t;const o=c(t,["coordinates","zIndex"]);void 0!==s&&(o.style={zIndex:s,element:this.element}),i&&(o.geometry={type:"Point",coordinates:i}),null===(e=this.B43__feature)||void 0===e||e.update(o)}}n=l.sq,u.defaultProps=d,u[n]=(t,{reactify:e,React:i,ReactDOM:s})=>{const n=e.entity(class extends t{constructor(t){var{markerElement:e}=t;super(o(t,["markerElement"]),e)}}),r=i.forwardRef(((t,e)=>{var r,{children:a}=t,h=o(t,["children"]);const[l]=i.useState((()=>document.createElement("ymaps"))),c=null!==(r=h.markerElement)&&void 0!==r?r:l;return i.createElement(i.Fragment,null,i.createElement(n,Object.assign({},h,{ref:e,markerElement:c})),s.createPortal(a,c))}));return r}},79582:(t,e,i)=>{i.d(e,{d:()=>o});var s=i(73237);class o extends s.h{}},35973:(t,e,i)=>{i.d(e,{d:()=>j});var s=i(80652);const o=6371e3;var n=i(15252),r=i(14001),a=i(13722),h=i(21833),l=i(70724),c=i(31599);function d(t){if(t<1)return function(t){const e=Math.floor(t),i=t-e,s=i.toString().length-2,o=d(Number(i*Math.pow(10,s)));return e+o/Math.pow(10,s)}(t);const e=Math.floor(t).toString().length-1;return Math.floor(t/Math.pow(10,e))*Math.pow(10,e)}var u=i(93379),_=i.n(u),p=i(7795),m=i.n(p),g=i(90569),y=i.n(g),E=i(3565),f=i.n(E),C=i(19216),D=i.n(C),M=i(44589),v=i.n(M),A=i(15044),x={};x.styleTagTransform=v(),x.setAttributes=f(),x.insert=y().bind(null,"head"),x.domAPI=m(),x.insertStyleElement=D();_()(A.Z,x);A.Z&&A.Z.locals&&A.Z.locals;var S=i(26355),b={};b.styleTagTransform=v(),b.setAttributes=f(),b.insert=y().bind(null,"head"),b.domAPI=m(),b.insertStyleElement=D();_()(S.Z,b);S.Z&&S.Z.locals&&S.Z.locals;const w=Object.freeze({maxWidth:74,unit:"metric"});class j extends l._p{constructor(t){super(t,{container:!0}),this.EB4_onMapUpdate=()=>{this.C66_updateDistance()}}_onAttach(){this.C69_createDom(),this.EAE_listener=new c.t({onUpdate:this.EB4_onMapUpdate}),this.addChild(this.EAE_listener),this.B2D_unwatchThemeContext=this._watchContext(a.N,(()=>this.FDA_updateTheme()),{immediate:!0}),this.C66_updateDistance()}_onDetach(){var t,e;null===(t=this.ADA_detachDom)||void 0===t||t.call(this),this.ADA_detachDom=void 0,null===(e=this.B2D_unwatchThemeContext)||void 0===e||e.call(this),this.B2D_unwatchThemeContext=void 0,this.C6C_element=void 0,this.B42_labelElement=void 0}C69_createDom(){this.C6C_element=document.createElement("ymaps"),this.C6C_element.classList.add("ymaps3x0--map-scale");const t=document.createElement("ymaps");t.classList.add("ymaps3x0--map-scale_line"),this.B42_labelElement=document.createElement("ymaps"),this.B42_labelElement.classList.add("ymaps3x0--map-scale_label"),t.appendChild(this.B42_labelElement),this.C6C_element.appendChild(t),this.ADA_detachDom=(0,r.sT)(this,this.C6C_element,null)}EB5_updateDom(t,e){this.C6C_element&&this.B42_labelElement&&(this.C6C_element.style.width=`${e}px`,this.B42_labelElement.textContent=this.EA5_formatDistance(t))}FDA_updateTheme(){const t=this._consumeContext(a.N);if(!t||!this.C6C_element)return;const{theme:e}=t,i="ymaps3x0--map-scale__dark";"dark"===e?this.C6C_element.classList.add(i):"light"===e&&this.C6C_element.classList.remove(i)}C66_updateDistance(){const t=this._consumeContext(h.X);if(!t)return;const{zoom:e,center:i,projection:r}=t.map,{maxWidth:a}=this._props,l=r.toWorldCoordinates(i),c=n.B.worldToPixels(l,e),u=n.B.pixelsToWorld({x:c.x-a/2,y:c.y},e),_=n.B.pixelsToWorld({x:c.x+a/2,y:c.y},e),p=function(t,e){const i=s.Z*(e[1]-t[1]),n=s.Z*(e[0]-t[0]),r=s.Z*t[1],a=s.Z*e[1],h=Math.pow(Math.sin(i/2),2)+Math.pow(Math.sin(n/2),2)*Math.cos(r)*Math.cos(a);return o*(2*Math.atan2(Math.sqrt(h),Math.sqrt(1-h)))}(r.fromWorldCoordinates(u),r.fromWorldCoordinates(_)),m=(g=p,"imperial"===(y=this._props.unit)?g/1609.34:"nautical"===y?g/1852.2:g);var g,y;const E=d(m),f=a*E/m;this.EB5_updateDom(E,f)}EA5_formatDistance(t){const e=this._consumeContext(h.X);if(e){const{ruler:i}=e.meta,{unit:s}=this._props;switch(s){case"metric":return t<1e3?`${t} ${i.mText}`:`${t/1e3} ${i.kmText}`;case"imperial":return`${t} ${i.mileText}`;case"nautical":return`${t} nmi`}}return t.toString()}}j.defaultProps=w},57949:(t,e,i)=>{i.d(e,{b:()=>h});var s=i(21833),o=i(70724),n=i(44472),r=i(33294),a=i(21176);class h extends o.Fh{constructor(){super(...arguments),this.B4D_onVectorContextUpdate=()=>{const{map:t}=this._consumeContext(s.X);if(t.getDataSource(this.FD5_id)){const e=t.getDataSource(this.FD5_id);if("tile"===(null==e?void 0:e.type)){const i=this.D95_getDataSourceDescription(this._props);t.updateTileDataSource(this.FD5_id,Object.assign(Object.assign({},e),{vector:i.vector}))}}}}_onAttach(){const{map:t}=this._consumeContext(s.X);this.FD5_id=this._props.id,t.addDataSource(this.FD5_id,this.D95_getDataSourceDescription(this._props)),this._watchContext(r.$,this.B4D_onVectorContextUpdate)}_onDetach(){const{map:t}=this._consumeContext(s.X);t.removeDataSource(this._props.id)}_onUpdate(t){const{map:e}=this._consumeContext(s.X);t.id&&(e.removeDataSource(this.FD5_id),this.FD5_id=t.id);const i=Object.assign(Object.assign({},e.getDataSource(this.FD5_id)),this.D95_getDataSourceDescription(this._props));e.getDataSource(this._props.id)?e.updateTileDataSource(this._props.id,i):e.addDataSource(this._props.id,i)}D95_getDataSourceDescription(t){return Object.assign({},(0,n.o)({type:"tile",zoomRange:t.zoomRange,clampMapZoom:t.clampMapZoom,raster:t.raster,vector:this.EA3_prepareVectorSource(t.vector),copyrights:t.copyrights,copyrightsOptions:t.copyrightsOptions}))}EA3_prepareVectorSource(t){const{meta:e}=this._consumeContext(s.X),i=this._consumeContext(r.$),o=(0,a.yY)((0,a._K)());if(t){if((t.richModelEnabled||t.richPointEnabled)&&!e.allowedFeatures.tile3d)throw new Error("Rich models are not allowed");return(t.richModelEnabled||t.richPointEnabled)&&!t.richModelDecoderWorkerUrl&&i.vector&&(t=Object.assign(Object.assign({},t),{richModelDecoderWorkerUrl:i.vector.getRichModelDecoderWorkerUrl(o)})),t}}}},43559:(t,e,i)=>{i.d(e,{t:()=>s});const s=new WeakSet},21235:(t,e,i)=>{function s(t){return Object.getOwnPropertyNames(t).forEach((e=>{const i=t[e];"object"==typeof i&&null!==i&&s(i)})),Object.freeze(t)}i.d(e,{_:()=>s})},30501:(t,e,i)=>{i.d(e,{R6:()=>a,xq:()=>n,zM:()=>r});var s=i(19649),o=i(44472);function n(t){if(void 0!==t)return Number(t)}function r(t,e){const i=(0,o.o)(e);return t+"?"+new URLSearchParams(i)}function a({url:t,callbackName:e},i){if(!e)throw new Error("jsonp: pseudo-unique callbackName required.");return new Promise(((o,n)=>{Object.defineProperty(window,e,{enumerable:!1,writable:!1,configurable:!0,value:t=>{delete window[e],document.head.removeChild(r),o(t)}});const r=document.createElement("script");r.src=t,document.head.appendChild(r),null==i||i.addEventListener("abort",(()=>n((0,s.o)())),{once:!0}),r.onerror=()=>{n(new Error("fetching failed.")),document.head.removeChild(r)}}))}},15214:(t,e,i)=>{function s(t){let e,i=!1;return(...s)=>{e=s,i||(i=!0,queueMicrotask((()=>{i=!1,t(...e)})))}}i.d(e,{U:()=>s})},44472:(t,e,i)=>{function s(t,e=!0){return Object.keys(t).forEach((i=>{void 0===t[i]?delete t[i]:e&&t[i]===Object(t[i])&&s(t[i])})),t}i.d(e,{o:()=>s})},99506:(t,e,i)=>{i.d(e,{Kj:()=>n,sq:()=>s,wt:()=>o});const s=Symbol.for("The symbol key is only for overriding the reactify result."),o=Symbol.for("The symbol key is only for overriding the vuefy result."),n=Symbol.for("The symbol key is only for overriding the vuefy options.")},17667:(t,e,i)=>{i.d(e,{W:()=>s});const s={getLink:o,open:function(t){window.open(o(t),"_blank")}};function o({center:t,zoom:e}){return`https://yandex.ru/maps/?from=api-maps&ll=${encodeURIComponent(t.join(","))}&origin=jsapi_3&z=${e}&l=map`}},63322:(t,e,i)=>{i.r(e),i.d(e,{A12__implReactifyOverride:()=>ie,Config:()=>F.De,ControlContext:()=>x.l,EBD__implReactify:()=>s,ThemeContext:()=>l.N,TypeContext:()=>c.e,YMap:()=>h.O,YMapCollection:()=>w,YMapComplexEntity:()=>u._p,YMapContainer:()=>j.h,YMapContext:()=>_._y,YMapContextProvider:()=>d.i,YMapControl:()=>S.d,YMapControlButton:()=>b.A,YMapControlCommonButton:()=>b.J,YMapControls:()=>x.f,YMapDefaultFeaturesLayer:()=>p.h,YMapDefaultSatelliteLayer:()=>g.V,YMapDefaultSchemeLayer:()=>m.f,YMapEntity:()=>u.Fh,YMapFeature:()=>y.W,YMapFeatureDataSource:()=>E.v,YMapGroupEntity:()=>u.SY,YMapHotspot:()=>D.E,YMapLayer:()=>f.F,YMapListener:()=>C.t,YMapMarker:()=>v.K,YMapScaleControl:()=>L.d,YMapTileDataSource:()=>A.b,fetchConfig:()=>Gt.Q,geolocation:()=>Ut,getDefaultConfig:()=>F._K,optionsKeyVuefy:()=>M.Kj,overrideKeyReactify:()=>M.sq,overrideKeyVuefy:()=>M.wt,projections:()=>Qt,route:()=>Zt,search:()=>Q,strictMode:()=>Ht,suggest:()=>et,useDomContext:()=>Wt.sT,yandexMaps:()=>T.W});var s={};i.r(s),i.d(s,{reactify:()=>ee});var o=i(79582),n=i(6049),r=i(80652);class a{constructor(){this.C78_maxLatitudeRad=Math.atan(Math.sinh(Math.PI)),this.type="EPSG:3857"}toWorldCoordinates(t){return{x:this.ACC_longitudeToWorldX(t[0]),y:this.D84_latitudeToWorldY(t[1])}}fromWorldCoordinates(t){return[this.D92_worldXToLongitude(t.x),this.A12_worldYToLatitude(t.y)]}D92_worldXToLongitude(t){return(0,n.d)(t*Math.PI*r.j,-180,180)}ACC_longitudeToWorldX(t){return(0,n.d)(t*r.Z/Math.PI,-1,1)}D84_latitudeToWorldY(t){const e=(0,n.q)(t*r.Z,-this.C78_maxLatitudeRad,this.C78_maxLatitudeRad),i=Math.tan(Math.PI/4+e/2);return Math.log(i)/Math.PI}A12_worldYToLatitude(t){const e=-t*Math.PI,i=Math.PI/2-2*Math.atan(Math.exp(e));return(0,n.q)(i*r.j,-90,90)}}var h=i(34777),l=i(13722),c=i(77605),d=i(22739),u=i(70724),_=i(28277),p=i(6546),m=i(18593),g=i(6226),y=i(29487),E=i(85095),f=i(21093),C=i(31599),D=i(78445),M=i(99506),v=i(88546),A=i(57949),x=i(83853),S=i(27845),b=i(7422);class w extends u.SY{}var j=i(73237),L=i(35973),T=i(17667),z=i(44472),B=i(30501),F=i(21176),I=i(24055),N=function(t,e,i,s){return new(i||(i=Promise))((function(o,n){function r(t){try{h(s.next(t))}catch(t){n(t)}}function a(t){try{h(s.throw(t))}catch(t){n(t)}}function h(t){var e;t.done?o(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(r,a)}h((s=s.apply(t,e||[])).next())}))};const O={businesses:"biz",toponyms:"geo"};function R(t){return t=t.map((([t,e])=>[(0,n.d)(t,0,180),e])),[Math.abs(t[0][0]-t[1][0]),Math.abs(t[1][0]-t[1][1])]}let P=0;const k=()=>"jsonp_ymaps3_search_"+P++;function Y(t,e){var i;return N(this,void 0,void 0,(function*(){const{lang:s,token:o,apikey:n,hosts:r}=e.meta,a={lang:s,token:o,apikey:n,text:t.text,callback:k(),rspn:(0,B.xq)(t.strictBounds),results:t.limit,skip:t.offset,origin:"jsapi3Geocoder",geocoder_sco:"longlat",z:t.zoom};if(a.type=null===(i=t.type)||void 0===i?void 0:i.map((t=>O[t])).filter(Boolean).join(","),Array.isArray(t.bounds)){const{ll:e,spn:i}=function(t){const e=t.map((t=>I.L.toWorldCoordinates(t)));return{ll:I.L.fromWorldCoordinates({x:(e[0].x+e[1].x)/2,y:(e[0].y+e[1].y)/2}),spn:R(t)}}(t.bounds);a.ll=e.join(","),a.spn=i.join(",")}else t.center&&t.span?(a.ll=t.center.join(","),a.spn=t.span.join(",")):(delete a.ll,delete a.spn);const h=(0,B.zM)(r.apiSearchService,a);return function({data:t}){return t.features.map((({properties:t,geometry:e})=>(0,z.o)({geometry:e,properties:{name:t.name,description:t.description}})))}(yield(0,B.R6)({url:h,callbackName:a.callback}))}))}var Z=function(t,e,i,s){return new(i||(i=Promise))((function(o,n){function r(t){try{h(s.next(t))}catch(t){n(t)}}function a(t){try{h(s.throw(t))}catch(t){n(t)}}function h(t){var e;t.done?o(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(r,a)}h((s=s.apply(t,e||[])).next())}))};const U={businesses:"biz",toponyms:"geo"};function W(t){return t=t.map((([t,e])=>[(0,n.d)(t,0,180),e])),[Math.abs(t[0][0]-t[1][0]),Math.abs(t[1][0]-t[1][1])]}const G=h.O.defaultProps.projection||I.L;function Q(t,e=(0,F._K)()){var i,s;return Z(this,void 0,void 0,(function*(){const o=(0,F.yY)(e);if(!o)throw new Error("Config not specified");if(!o.meta.apikey)throw new Error("Apikey must be specified in order to use search");const{lang:n,apikey:r,hosts:a}=o.meta,h=null===(i=o.apikeys)||void 0===i?void 0:i.search;if(!h&&o.meta.allowedFeatures.deprecatedSearch)return t.text&&""!==t.text?Y(t,o):[];if(!(t.text&&""!==t.text||t.uri&&""!==t.uri))return[];const l={lang:n,apikey:h||r,text:t.text,uri:t.uri,rspn:(0,B.xq)(t.strictBounds),results:t.limit,skip:t.offset,sco:"longlat"};if(l.type=null===(s=t.type)||void 0===s?void 0:s.map((t=>U[t])).filter(Boolean).join(","),Array.isArray(t.bounds)){const{ll:e,spn:i}=function(t){const e=t.map((t=>G.toWorldCoordinates(t)));return{ll:G.fromWorldCoordinates({x:(e[0].x+e[1].x)/2,y:(e[0].y+e[1].y)/2}),spn:W(t)}}(t.bounds);l.ll=e.join(","),l.spn=i.join(",")}else t.center&&t.span?(l.ll=t.center.join(","),l.spn=t.span.join(",")):(delete l.ll,delete l.spn);const c=(0,B.zM)(a.searchApi+"v1/",l);return fetch(c).then((t=>{if(!t.ok)throw new Error(`Failed to fetch ${t.url} Status: ${t.status}`);return t.json()})).then((t=>(t.features||[]).map((({properties:t,geometry:e})=>(0,z.o)({geometry:e,properties:{name:t.name,description:t.description}})))))}))}var H=function(t,e,i,s){return new(i||(i=Promise))((function(o,n){function r(t){try{h(s.next(t))}catch(t){n(t)}}function a(t){try{h(s.throw(t))}catch(t){n(t)}}function h(t){var e;t.done?o(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(r,a)}h((s=s.apply(t,e||[])).next())}))};const V={all:"all",toponyms:"tp",addresses:"addr",organizations:"org"};let X=0;const $=()=>"jsonp_ymaps3_suggest_"+X++;function q(t,e){return H(this,void 0,void 0,(function*(){const i={lang:e.meta.lang,apikey:e.meta.apikey,text:t.text,highlight:(0,B.xq)(t.highlight),n:t.limit,local_only:t.localOnly,type:t.type?V[t.type]:void 0,v:9,callback:$()};Array.isArray(t.bounds)?i.bbox=t.bounds.join(","):Array.isArray(t.center)&&Array.isArray(t.span)&&(i.ll=t.center.join(","),i.spn=t.span.join(","));const s=(0,B.zM)(e.meta.hosts.suggestApi,i),o=yield(0,B.R6)({url:s,callbackName:i.callback});return o.results.map((t=>(0,z.o)({type:t.type,title:t.title,subtitle:t.subtitle,value:t.text})))}))}var J=function(t,e,i,s){return new(i||(i=Promise))((function(o,n){function r(t){try{h(s.next(t))}catch(t){n(t)}}function a(t){try{h(s.throw(t))}catch(t){n(t)}}function h(t){var e;t.done?o(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(r,a)}h((s=s.apply(t,e||[])).next())}))};const K={all:["biz","geo"],toponyms:["geo"],addresses:["house"],organizations:["biz"]};function tt(t){return{text:t.text,hl:(t.hl||[]).map((t=>[t.begin,t.end]))}}function et(t,e=(0,F._K)()){var i;return J(this,void 0,void 0,(function*(){const s=(0,F.yY)(e);if(!s)throw new Error("Config not specified");if(!s.meta.apikey)throw new Error("Apikey must be specified in order to use suggest");if(!t.text)return[];const o=null===(i=s.apikeys)||void 0===i?void 0:i.suggest;if(!o&&s.meta.allowedFeatures.deprecatedSuggest)return q(t,s);const n={lang:s.meta.lang,apikey:o||s.meta.apikey,text:t.text,highlight:(0,B.xq)(t.highlight),print_address:1,attrs:"uri",results:t.limit,strict_bounds:t.localOnly};Array.isArray(t.bounds)?n.bbox=t.bounds.join(","):Array.isArray(t.center)&&Array.isArray(t.span)&&(n.ll=t.center.join(","),n.spn=t.span.join(","));const r=t.types||t.type&&K[t.type];r&&(n.types=r.join(","));const a=(0,B.zM)(s.meta.hosts.suggestApi.replace("/suggest-geo","/v1/suggest"),n),h=yield fetch(a);if(!h.ok)throw new Error(`Failed to fetch ${h.url} Status: ${h.status}`);const l=yield h.json();return(l.results||[]).map((t=>{var e,i;const s=(null===(e=t.tags)||void 0===e?void 0:e.includes("business"))?"business":"toponym";return(0,z.o)({title:tt(t.title),subtitle:t.subtitle?tt(t.subtitle):void 0,value:"business"===s?t.title.text:(null===(i=t.address)||void 0===i?void 0:i.formatted_address)||t.title.text,tags:t.tags,distance:t.distance,uri:t.uri,type:s})}))}))}function it(t){return t.map((([t,e])=>[e,t]))}function st(t){return Object.assign(Object.assign({},t),{route:Object.assign(Object.assign({},t.route),{legs:t.route.legs.map((t=>Object.assign(Object.assign({},t),{steps:t.steps.map((t=>Object.assign(Object.assign({},t),{polyline:Object.assign(Object.assign({},t.polyline),{points:it(t.polyline.points)})})))})))})})}function ot(t){return t.every((t=>t.every(isFinite)))}function nt(t,e,i){const s={type:"Feature",id:e,geometry:{type:"LineString",coordinates:[]},properties:{}};let o=[[1/0,1/0],[-1/0,-1/0]];const{route:n}=t;return n.legs.forEach((t=>{t.steps.forEach((t=>{t.polyline.points.forEach((t=>{s.geometry.coordinates.push(t),(null==i?void 0:i.bounds)&&(o[0][0]=Math.min(o[0][0],t[0]),o[0][1]=Math.min(o[0][1],t[1]),o[1][0]=Math.max(o[1][0],t[0]),o[1][1]=Math.max(o[1][1],t[1]))}))}))})),n.flags&&(s.properties.flags=n.flags),ot(o)&&(s.properties.bounds=o),s}function rt(t,e,i,s){const o={type:"Feature",id:e,geometry:{type:"LineString",coordinates:t.polyline.points},properties:{length:t.length,duration:t.duration,mode:t.mode}};if(null==s?void 0:s.bounds){const e=function(t){const e=[[1/0,1/0],[-1/0,-1/0]];return t.forEach((t=>{e[0][0]=Math.min(e[0][0],t[0]),e[0][1]=Math.min(e[0][1],t[1]),e[1][0]=Math.max(e[1][0],t[0]),e[1][1]=Math.max(e[1][1],t[1])})),e}(t.polyline.points);o.properties.bounds=ot(e)?e:void 0}return i.flags&&(o.properties.flags=i.flags),o}var at,ht=function(t,e,i,s,o){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!o)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof e?t!==e||!o:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?o.call(t,i):o?o.value=i:e.set(t,i),i},lt=function(t,e,i,s){if("a"===i&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof e?t!==e||!s:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===i?s:"a"===i?s.call(t):s?s.value:e.get(t)};let ct=0;const dt=()=>"ymaps3x0-route-feature-"+ct++;at=new WeakMap;const ut="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",_t=new Uint8Array(128);for(let t=0;t<65;t++)_t[ut.charCodeAt(t)]=t;function pt(t){t=t.replace(/[^A-Za-z0-9\-\+_\=]/g,"");const e=[];let i=0,s=0,o=0,n=0,r=[0,0],a=[0,0];function h(t){s|=t<<8*n,n++,n%4==0&&(a[o]=s/1e6+r[o],o++,n=0,s=0,o%2==0&&(r=a,e.push(a),a=[0,0],o=0))}for(;i<t.length;){const e=_t[t.charCodeAt(i++)],s=_t[t.charCodeAt(i++)],o=_t[t.charCodeAt(i++)],n=_t[t.charCodeAt(i++)],r=(15&s)<<4|o>>2,a=(3&o)<<6|n;h(e<<2|s>>4),64!==o&&h(r),64!==n&&h(a)}return e}function mt({data:t}){if(0===t.features.length)return[];const e=t.features[0];return 0===e.features.length?[]:[e]}var gt,yt=function(t,e,i,s,o){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!o)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof e?t!==e||!o:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?o.call(t,i):o?o.value=i:e.set(t,i),i},Et=function(t,e,i,s){if("a"===i&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof e?t!==e||!s:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===i?s:"a"===i?s.call(t):s?s.value:e.get(t)};let ft=0;gt=new WeakMap;var Ct,Dt=function(t,e,i,s){return new(i||(i=Promise))((function(o,n){function r(t){try{h(s.next(t))}catch(t){n(t)}}function a(t){try{h(s.throw(t))}catch(t){n(t)}}function h(t){var e;t.done?o(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(r,a)}h((s=s.apply(t,e||[])).next())}))};!function(t){t[t.UNKNOWN=1]="UNKNOWN",t[t.CLOSED=2]="CLOSED",t[t.FREE=3]="FREE",t[t.LIGHT=4]="LIGHT",t[t.HARD=5]="HARD",t[t.VERY_HARD=6]="VERY_HARD"}(Ct||(Ct={}));let Mt=0;const vt=()=>"jsonp_ymaps3_route_"+Mt++,At={driving:class{constructor(t,e){gt.set(this,void 0),this.FF2_options=e,yt(this,gt,t,"f")}toRoute(){var t;const{features:e,properties:i}=Et(this,gt,"f"),s={type:"Feature",id:"ymaps3x0-route-feature-"+ft++,geometry:{type:"LineString",coordinates:[]},properties:{}};let o=[],n=[[1/0,1/0],[-1/0,-1/0]];for(const i of e){if(pt(i.properties.encodedCoordinates).forEach((t=>{var e;s.geometry.coordinates.push(t),(null===(e=this.FF2_options)||void 0===e?void 0:e.bounds)&&(n[0][0]=Math.min(n[0][0],t[0]),n[0][1]=Math.min(n[0][1],t[1]),n[1][0]=Math.max(n[1][0],t[0]),n[1][1]=Math.max(n[1][1],t[1]))})),null===(t=this.FF2_options)||void 0===t?void 0:t.jams){const t=i.properties.jams;t?void 0!==o&&t.forEach((t=>null==o?void 0:o.push(t))):o=void 0}}const r=null==i?void 0:i.RouteMetaData;return r&&"object"==typeof r&&"hasTolls"in r&&(s.properties.flags={hasTolls:Boolean(r.hasTolls)}),o&&(s.properties.jams=o),function(t){return t.every((t=>t.every(isFinite)))}(n)&&(s.properties.bounds=n),s}}};var xt,St=function(t,e,i,s,o){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!o)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof e?t!==e||!o:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?o.call(t,i):o?o.value=i:e.set(t,i),i},bt=function(t,e,i,s){if("a"===i&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof e?t!==e||!s:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===i?s:"a"===i?s.call(t):s?s.value:e.get(t)};let wt=0;const jt=()=>"ymaps3x0-route-transit-feature-"+wt++;xt=new WeakMap;var Lt,Tt=function(t,e,i,s,o){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!o)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof e?t!==e||!o:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?o.call(t,i):o?o.value=i:e.set(t,i),i},zt=function(t,e,i,s){if("a"===i&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof e?t!==e||!s:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===i?s:"a"===i?s.call(t):s?s.value:e.get(t)};let Bt=0;const Ft=()=>"ymaps3x0-route-truck-feature-"+Bt++;Lt=new WeakMap;var It,Nt=function(t,e,i,s,o){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!o)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof e?t!==e||!o:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?o.call(t,i):o?o.value=i:e.set(t,i),i},Ot=function(t,e,i,s){if("a"===i&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof e?t!==e||!s:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===i?s:"a"===i?s.call(t):s?s.value:e.get(t)};let Rt=0;const Pt=()=>"ymaps3x0-route-walking-feature-"+Rt++;It=new WeakMap;var kt=function(t,e,i,s){return new(i||(i=Promise))((function(o,n){function r(t){try{h(s.next(t))}catch(t){n(t)}}function a(t){try{h(s.throw(t))}catch(t){n(t)}}function h(t){var e;t.done?o(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(r,a)}h((s=s.apply(t,e||[])).next())}))};const Yt={driving:class{constructor(t,e){at.set(this,void 0),this.FF2_options=e,ht(this,at,st(t),"f")}toRoute(){return nt(lt(this,at,"f"),dt(),this.FF2_options)}toSteps(){const{route:t}=lt(this,at,"f"),e=[];return t.legs.forEach((i=>{i.steps.forEach((i=>{e.push(rt(i,dt(),t,this.FF2_options))}))})),e}},truck:class{constructor(t,e){Lt.set(this,void 0),this.FF2_options=e,Tt(this,Lt,st(t),"f")}toRoute(){return nt(zt(this,Lt,"f"),Ft(),this.FF2_options)}toSteps(){const{route:t}=zt(this,Lt,"f"),e=[];return t.legs.forEach((i=>{i.steps.forEach((i=>{e.push(rt(i,Ft(),t,this.FF2_options))}))})),e}},walking:class{constructor(t,e){It.set(this,void 0),this.FF2_options=e,Nt(this,It,st(t),"f")}toRoute(){return nt(Ot(this,It,"f"),Pt(),this.FF2_options)}toSteps(){const{route:t}=Ot(this,It,"f");return t.legs.map((e=>rt(e.steps[0],Pt(),t,this.FF2_options)))}},transit:class{constructor(t,e){xt.set(this,void 0),this.FF2_options=e,St(this,xt,st(t),"f")}toRoute(){return nt(bt(this,xt,"f"),jt(),this.FF2_options)}toSteps(){const{route:t}=bt(this,xt,"f"),e=[];return t.legs.forEach((i=>{i.steps.forEach((i=>{const s=rt(i,jt(),t,this.FF2_options);s.properties.featureClass=i.feature_class,e.push(s)}))})),e}}};function Zt(t,e=(0,F._K)()){var i;return kt(this,void 0,void 0,(function*(){const s=(0,F.yY)(e);if(!s)throw new Error("Config not specified");if(!s.meta.apikey)throw new Error("Apikey must be specified in order to request routes");const o=null===(i=s.apikeys)||void 0===i?void 0:i.router;if(!o&&s.meta.allowedFeatures.deprecatedRouter)return function(t,e){return Dt(this,void 0,void 0,(function*(){if(!e.meta.allowedFeatures.router)throw new Error("Route requests is not allowed");if(!(t.type in At))throw new TypeError("Only 'driving' type must be specified at this moment.");if(t.results&&1!==t.results)throw new TypeError("Only one result must be specified");const i=t.points.map((t=>"type"in t?t:{type:"way",coordinates:t})),s=i.map(((t,e)=>"via"===t.type?e:null)).filter((t=>null!==t));if(i.length-s.length<2)throw new RangeError("We need at least 2 waypoints to build a route");const{lang:o,token:n,apikey:r,hosts:a}=e.meta,h=i.map((({coordinates:t})=>t.join(","))).join("~"),l={rtm:"dtr",results:(t.results||1).toString(),token:n,rll:h,lang:o,apikey:r,callback:vt()};s.length&&(l.via=s.join(",")),t.jams&&(l.jams="1"),t.avoidTolls&&(l.avoid_tolls="1");const c=(0,B.zM)(`${a.apiRouteService}2.0/`,l);return(0,B.R6)({url:c,callbackName:l.callback}).then(mt).then((e=>e.map((e=>new At[t.type](e,t)))))}))}(t,s);if(!(t.type in Yt))throw new TypeError("Only 'driving', 'truck', 'walking', or 'transit' types can be specified at this moment.");const n={waypoints:it(t.points).map((t=>t.join(","))).join("|"),apikey:o||s.meta.apikey,mode:t.type};n.avoid_tolls=!0===t.avoidTolls?"1":void 0;const r=t.truck;n.weight=null==r?void 0:r.weight,n.axle_weight=null==r?void 0:r.axleWeight,n.max_weight=null==r?void 0:r.maxWeight,n.payload=null==r?void 0:r.payload,n.height=null==r?void 0:r.height,n.width=null==r?void 0:r.width,n.length=null==r?void 0:r.length,n.eco_class=null==r?void 0:r.ecoClass,n.has_trailer=!0===(null==r?void 0:r.hasTrailer)?"1":void 0;const a=(0,B.zM)(s.meta.hosts.routerApi,n);return fetch(a).then((t=>{if(!t.ok)throw new Error(`Failed to fetch ${t.url} Status: ${t.status}`);return t.json()})).then((e=>[new Yt[t.type](e,t)]))}))}const Ut={getPosition:function(t,e=(0,F._K)()){return new Promise(((i,s)=>window.navigator.geolocation.getCurrentPosition(i,(()=>{const t=(0,F.yY)(e);if(!t)return void s(new Error("Config not specified"));const o=t.meta.geolocation;o?i({coords:{longitude:o.long,latitude:o.lat}}):s(new Error("Geolocation could not be determined"))}),t))).then((({coords:t})=>({coords:[t.longitude,t.latitude],accuracy:t.accuracy})))}};var Wt=i(14001),Gt=i(28399);const Qt={sphericalMercator:new a};let Ht=!1;var Vt=i(17421),Xt=i(15214);let $t;class qt{constructor(t,e){this.EAA__implValue=t,this.D81__implDeps=e}}function Jt(t,e){return new qt(t,null!=e?e:[])}function Kt(t,e){const i=new WeakMap,s=new WeakSet;null!=$t||($t=t.createContext(void 0)),$t.displayName="YMaps3Parent";const o=(t,e)=>{if(!(t.current&&t.current instanceof _.MX&&Array.isArray(e.current)))return;const i=t.current.children,s=e.current.filter((t=>t.current));for(let e=0;e<s.length&&e<i.length;e++){const{current:o}=s[e];o&&o!==i[e]&&t.current.addChild(o,e)}for(let e=i.length-1;e>=s.length;e--)t.current.removeChild(i[e]);for(let e=i.length;e<s.length;e++){const{current:i}=s[e];i&&t.current.addChild(i)}};const n=new _._y("NopContext"),r=new Map;const a={entity:function(n,r=n.name){if(i.has(n))return i.get(n);const h=M.sq in n?n[M.sq]:null;if(h&&!s.has(h))try{return s.add(h),i.set(n,h(n,{reactify:a,ReactParent:$t,React:t,ReactDOM:e})),i.get(n)}finally{s.delete(h)}return i.set(n,function(e,i=e.name){const s=t.forwardRef(((i,s)=>{const n=t.useRef(),r=function(t){var e,i;const s=t.useRef(),o=t.useRef();return null!==(e=s.current)&&void 0!==e||(s.current={}),null!==(i=o.current)&&void 0!==i||(o.current=t=>{const e=s.current,i={};for(const s of Object.keys(t)){const o=t[s];if(o instanceof qt){const t=e[s];t&&(0,Vt.R)(o.D81__implDeps,t.D81__implDeps)?i[s]=_.Ku:(i[s]=o.EAA__implValue,e[s]=o)}else i[s]=o,delete e[s]}for(const i of Object.keys(e))i in t||delete e[i];return i}),o.current}(t);t.useEffect((()=>{const t=new e(r(i));return n.current=t,function(t,e){if(!t)return;"function"==typeof t?t(e):t.current=e}(s,t),()=>{t instanceof _.ru&&t.destroy(),n.current=void 0}}),[n]),function(e,i){const s=t.useContext($t),o=null==s?void 0:s[0];if(!(o||i.prototype instanceof _.ru))throw new Error(`${i.name} is not attached to a parent`);const n=o?o.positionChild(e):-1;t.useEffect((()=>{null==o||o.requestReposition()}),[e,o,n]),t.useEffect((()=>()=>{null==o||o.requestReposition()}),[o])}(n,e),t.useEffect((()=>{var t;null===(t=n.current)||void 0===t||t.B3C__implUpdateProps(r(i))}),[n,i]);const a=function(e){const i=t.useRef([]),s=t.useRef({entityRef:e,requestReposition:(0,Xt.U)((()=>{o(s.current.entityRef,i)})),positionChild:t=>{const e=i.current.indexOf(t);return-1!==e?e:i.current.push(t)-1}});return t.useEffect((()=>{o(e,i)}),[s,e,i]),i.current.length=0,[s.current]}(n);return t.createElement($t.Provider,{value:a},i.children)}));return s.displayName=i,s.Entity=e,s}(n,r)),i.get(n)},module:function(t){const e={};for(const i of Object.keys(t)){const s=t[i];if(s&&"function"==typeof s&&_.L0.isPrototypeOf(s)){const t=s;e[i]=a.entity(t)}else s instanceof _._y?e[i]=a.context(s):e[i]=s}return"function"==typeof t.A12__implReactifyOverride&&(delete e.A12__implReactifyOverride,Object.assign(e,t.A12__implReactifyOverride(a))),e},context:function(e){const i=null!=e?e:n;let s=r.get(i);return s||(s=t.createContext(void 0),s.displayName=i.name,r.set(i,s)),s},useDefault:Jt};return a}const te=/^1[678]\./,ee=Object.freeze({overrideKey:M.sq,bindTo(t,e){if(!te.test(t.version))throw new Error(`Unsupported React version: ${t.version}`);return Kt(t,e)}}),ie=t=>({reactify:t,YMapReactContainer:t.entity(o.d)})},72841:t=>{t.exports="data:image/svg+xml;base64,PHN2ZyBmaWxsPSJub25lIiBoZWlnaHQ9IjIwIiB3aWR0aD0iNDYiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PHBhdGggZD0iTTM0LjM0OSA1LjY4Yy44MTQgMCAxLjY0OS4xNjUgMi4zNzUuNjEuMjc1LS4yOTEuNjYtLjQ2MiAxLjA3Mi0uNDYyaDEuOTczYy41MDYgMCAuOTc2LjI1OSAxLjI0Ni42ODZsLjA5OS4xNTcuMDU0LS4wOTZhMS40NzMgMS40NzMgMCAwIDEgMS4yODItLjc0N2gxLjc1M2ExLjQ3MyAxLjQ3MyAwIDAgMSAxLjI3MyAyLjIxM2wtMS42NDIgMi44MiAxLjkzNyAzLjA2YTEuNDczIDEuNDczIDAgMCAxLTEuMjQ0IDIuMjZoLTEuOTc0Yy0uNTA2IDAtLjk3Ny0uMjYtMS4yNDYtLjY4OGwtLjI5My0uNDY2LS4yNTguNDMzYy0uMjY1LjQ0Ny0uNzQ3LjcyLTEuMjY2LjcyaC0xLjc4M2ExLjQ3IDEuNDcgMCAwIDEtLjc3NS0uMjIgNi41MzQgNi41MzQgMCAwIDEtMi4yMy4zNjhjLTEuMjA2IDAtMi4zNi0uMjk3LTMuMjctMS4wNDJhMS40NzMgMS40NzMgMCAwIDEtMS4zNTQuODk1aC0xLjYyYTEuNDcgMS40NyAwIDAgMS0uNjEzLS4xMzNjLS40NDMuMTgzLS45My4yOC0xLjQ1LjI4LTEuMDAzIDAtMS45MjMtLjMzOC0yLjY1LS45ODFhMS40NzMgMS40NzMgMCAwIDEtMS4zMjcuODM0aC0xLjc1M2ExLjQ3IDEuNDcgMCAwIDEtMS4xODUtLjU5OWMtLjI2OS4zNjMtLjcuNTk5LTEuMTg2LjU5OUgxNi41NGMtLjI0MSAwLS40Ny0uMDU4LS42Ny0uMTYxYTEuNDcyIDEuNDcyIDAgMCAxLS42Ny4xNmgtMS43MDljLS4xOTkgMC0uMzkxLS4wNC0uNTY4LS4xMTNhNC40ODQgNC40ODQgMCAwIDEtMS40NS4yMTdjLS45NzUgMC0xLjkzOS0uMzAxLTIuNjY2LTEuMDA1YTMuMzc1IDMuMzc1IDAgMCAxLS43MjItMS4wMnYuNDVjMCAuODEzLS42NTkgMS40NzItMS40NzIgMS40NzJINC44M2MtLjgxMyAwLTEuNDczLS42Ni0xLjQ3My0xLjQ3M1YxMi4xTC4xMzUgNS4wODhBMS40NzMgMS40NzMgMCAwIDEgMS40NzMgM2gxLjg1NmMuNTc2IDAgMS4wOTkuMzM1IDEuMzM5Ljg1OWwxLjA5IDIuMzc4IDEuMDQtMi4zNThBMS40NyAxLjQ3IDAgMCAxIDguMTQ0IDNoMS44MTJhMS40NzMgMS40NzMgMCAwIDEgMS4zNDggMi4wNjZsLS4zNjEuODIxYTUuNjUxIDUuNjUxIDAgMCAxIDEuNC0uMTc3YzEuMDEgMCAyLjA5LjE2NyAyLjkzNC44MzJhMS40NzIgMS40NzIgMCAwIDEgMS4yNjMtLjcxNGgxLjcwOWMuMjEgMCAuNDEyLjA0NC41OTQuMTI1YTQuODE3IDQuODE3IDAgMCAxIDEuNTU2LS4yNDNjLjkwNCAwIDEuODkzLjIwMiAyLjYxNy45NzEuMTMxLjEzOS4yNDMuMjg2LjM0LjQ0Ljc4LS45MyAxLjg3OC0xLjQ0IDMuMTEyLTEuNDQuMTMgMCAuMjU3LjAwNi4zODMuMDE4VjQuNDczYzAtLjgxNC42Ni0xLjQ3MyAxLjQ3My0xLjQ3M2gxLjc1MmMuODE0IDAgMS40NzMuNjYgMS40NzMgMS40NzN2Mi4xMTljLjc1Ni0uNTk0IDEuNzEtLjkxMiAyLjc5OS0uOTEyeiIgZmlsbD0iI2ZmZiIgZmlsbC1vcGFjaXR5PSIuOCIvPjxnIGZpbGw9IiMwMDAiPjxwYXRoIGNsaXAtcnVsZT0iZXZlbm9kZCIgZD0iTTI4LjM5NiAxMy43NjNjLS40NzIuNzIyLTEuMTUgMS4xMDYtMS45NzUgMS4xMDYtMS42NTIgMC0yLjgwMi0xLjM1Ny0yLjgwMi0zLjgwNCAwLTIuNDc3IDEuMTgtMy45MDcgMi44NzUtMy45MDcuNzY3IDAgMS40MTYuMzU0IDEuODU4IDEuMDE3di0zLjdoMS43NTRWMTQuNzJoLTEuNjIxem0tLjA0NC0yLjc1N2MwLTEuNzEtLjQ3Mi0yLjQ2Mi0xLjQxNS0yLjQ2Mi0xLjAwMyAwLTEuNTA0Ljc2Ni0xLjUwNCAyLjUyIDAgMS42ODIuNDcyIDIuNDE5IDEuNDMgMi40MTkuOTg4IDAgMS40ODktLjc1MiAxLjQ4OS0yLjQ3N3ptOC44NDYgMS43ODR2MS40M2MtLjUxNi4zNTQtMS4zNDIuNjQ5LTIuNDYyLjY0OS0yLjI0MSAwLTMuNTA5LTEuMjU0LTMuNTA5LTMuODM0IDAtMi4yNCAxLjAxNy0zLjg3NyAzLjE1NS0zLjg3NyAxLjc1NSAwIDIuODkuOTczIDIuODkgMy41NTN2LjkyOUgzMy4wNGMuMDc0IDEuMjM4LjU2IDEuODQzIDEuODQzIDEuODQzLjg1NiAwIDEuNzctLjMyNSAyLjMxNS0uNjkzem0tMS43MS0yLjU5NWMwLS45MjktLjI2NS0xLjY1MS0xLjEzNS0xLjY1MS0uODQgMC0xLjI2OC42MTktMS4zMTIgMS43OThoMi40NDd6TTEyLjM1NSA3LjE4N2MxLjg1OCAwIDIuNzcyLjY3OCAyLjc3MiAyLjQ3N3YzLjI0NGMwIC42MDQuMDMgMS4yMDkuMDg4IDEuODEzaC0xLjcxYTIuMzE2IDIuMzE2IDAgMCAxLS4xMzMtLjU5SDEzLjNjLS4zNC4zNTQtLjc4Mi42OTMtMS44MTQuNjkzLTEuMzU2IDAtMi4yNy0uODI1LTIuMjctMi4yNTUgMC0xLjU0OSAxLjE5NC0yLjQxOCAzLjg3Ny0yLjQxOGguMjh2LS40NzJjMC0uNzk2LS4zODMtMS4wOTEtMS4yMjMtMS4wOTEtLjk4OCAwLTEuODQzLjUzLTIuNDAzLjk4OFY4LjA1N2MuNTMtLjM4MyAxLjQ2LS44NyAyLjYxLS44N3ptLS4yMzYgNi4zNTVjLjYyIDAgMS4wMzItLjI2NiAxLjI1My0uNTl2LTEuNjM3aC0uMjVjLTEuNTA0IDAtMi4xMDguMjk1LTIuMTA4IDEuMTUgMCAuNjUuMzY4IDEuMDc3IDEuMTA1IDEuMDc3eiIgZmlsbC1ydWxlPSJldmVub2RkIi8+PHBhdGggZD0iTTE5Ljc4NiA4LjY2MmMtLjYzNCAwLTEuMTUuMzM5LTEuNDc0LjczN3Y1LjMyMmgtMS43NTVWNy4zMDVoMS43MWwuMDQ1LjYyaC4wODhjLjM1NC0uMzU0Ljk3My0uNzM4IDIuMDItLjczOCAxLjQzIDAgMi4wMi42NDkgMi4wMiAyLjEyM3Y1LjQxMWgtMS43NTVWOS40ODdjMC0uNTYtLjI4LS44MjUtLjg5OS0uODI1em0yNC43ODQgNi4wNTloLTEuOTc2bC0xLjU3Ny0yLjUwNi0xLjQ5IDIuNTA2aC0xLjc4M2wyLjMzLTMuODYzLTIuMjQyLTMuNTUzaDEuOTc2bDEuNDE1IDIuMjQxIDEuMjY4LTIuMjRoMS43NTVsLTIuMDk0IDMuNTk3eiIvPjwvZz48cGF0aCBkPSJNNi42MiAxNC43MjF2LTEuNzRjMC0xLjMxMi0uMTYzLTEuNjk1LS42NjQtMi43ODZsLTIuNjI0LTUuNzJIMS40NzRsMy4zNjIgNy4zMTJ2Mi45MzR6bTEuMTY0LTUuMjkzIDIuMTgyLTQuOTU0SDguMTUzTDUuOTcxIDkuNDI4eiIgZmlsbD0icmVkIi8+PC9zdmc+Cg=="},84026:t=>{t.exports="data:image/svg+xml;base64,PHN2ZyBmaWxsPSJub25lIiBoZWlnaHQ9IjIwIiB3aWR0aD0iNDYiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PHBhdGggZD0iTTM0LjM0OSA1LjY4Yy44MTQgMCAxLjY0OS4xNjUgMi4zNzUuNjEuMjc1LS4yOTEuNjYtLjQ2MiAxLjA3Mi0uNDYyaDEuOTczYy41MDYgMCAuOTc2LjI1OSAxLjI0Ni42ODZsLjA5OS4xNTcuMDU0LS4wOTZhMS40NzMgMS40NzMgMCAwIDEgMS4yODItLjc0N2gxLjc1M2ExLjQ3MyAxLjQ3MyAwIDAgMSAxLjI3MyAyLjIxM2wtMS42NDIgMi44MiAxLjkzNyAzLjA2YTEuNDczIDEuNDczIDAgMCAxLTEuMjQ0IDIuMjZoLTEuOTc0Yy0uNTA2IDAtLjk3Ny0uMjYtMS4yNDYtLjY4OGwtLjI5My0uNDY2LS4yNTguNDMzYy0uMjY1LjQ0Ny0uNzQ3LjcyLTEuMjY2LjcyaC0xLjc4M2ExLjQ3IDEuNDcgMCAwIDEtLjc3NS0uMjIgNi41MzQgNi41MzQgMCAwIDEtMi4yMy4zNjhjLTEuMjA2IDAtMi4zNi0uMjk3LTMuMjctMS4wNDJhMS40NzMgMS40NzMgMCAwIDEtMS4zNTQuODk1aC0xLjYyYTEuNDcgMS40NyAwIDAgMS0uNjEzLS4xMzNjLS40NDMuMTgzLS45My4yOC0xLjQ1LjI4LTEuMDAzIDAtMS45MjMtLjMzOC0yLjY1LS45ODFhMS40NzMgMS40NzMgMCAwIDEtMS4zMjcuODM0aC0xLjc1M2ExLjQ3IDEuNDcgMCAwIDEtMS4xODUtLjU5OWMtLjI2OS4zNjMtLjcuNTk5LTEuMTg2LjU5OUgxNi41NGMtLjI0MSAwLS40Ny0uMDU4LS42Ny0uMTYxYTEuNDcyIDEuNDcyIDAgMCAxLS42Ny4xNmgtMS43MDljLS4xOTkgMC0uMzkxLS4wNC0uNTY4LS4xMTNhNC40ODQgNC40ODQgMCAwIDEtMS40NS4yMTdjLS45NzUgMC0xLjkzOS0uMzAxLTIuNjY2LTEuMDA1YTMuMzc1IDMuMzc1IDAgMCAxLS43MjItMS4wMnYuNDVjMCAuODEzLS42NTkgMS40NzItMS40NzIgMS40NzJINC44M2MtLjgxMyAwLTEuNDczLS42Ni0xLjQ3My0xLjQ3M1YxMi4xTC4xMzUgNS4wODhBMS40NzMgMS40NzMgMCAwIDEgMS40NzMgM2gxLjg1NmMuNTc2IDAgMS4wOTkuMzM1IDEuMzM5Ljg1OWwxLjA5IDIuMzc4IDEuMDQtMi4zNThBMS40NyAxLjQ3IDAgMCAxIDguMTQ0IDNoMS44MTJhMS40NzMgMS40NzMgMCAwIDEgMS4zNDggMi4wNjZsLS4zNjEuODIxYTUuNjUxIDUuNjUxIDAgMCAxIDEuNC0uMTc3YzEuMDEgMCAyLjA5LjE2NyAyLjkzNC44MzJhMS40NzIgMS40NzIgMCAwIDEgMS4yNjMtLjcxNGgxLjcwOWMuMjEgMCAuNDEyLjA0NC41OTQuMTI1YTQuODE3IDQuODE3IDAgMCAxIDEuNTU2LS4yNDNjLjkwNCAwIDEuODkzLjIwMiAyLjYxNy45NzEuMTMxLjEzOS4yNDMuMjg2LjM0LjQ0Ljc4LS45MyAxLjg3OC0xLjQ0IDMuMTEyLTEuNDQuMTMgMCAuMjU3LjAwNi4zODMuMDE4VjQuNDczYzAtLjgxNC42Ni0xLjQ3MyAxLjQ3My0xLjQ3M2gxLjc1MmMuODE0IDAgMS40NzMuNjYgMS40NzMgMS40NzN2Mi4xMTljLjc1Ni0uNTk0IDEuNzEtLjkxMiAyLjc5OS0uOTEyeiIgZmlsbD0iIzAwMCIgZmlsbC1vcGFjaXR5PSIuNCIvPjxnIGZpbGw9IiNmZmYiPjxwYXRoIGQ9Ik02LjYyIDEyLjk4MXYxLjc0SDQuODM2di0yLjkzNEwxLjQ3NCA0LjQ3NGgxLjg1OGwyLjYyNCA1LjcyYy41MDEgMS4wOTIuNjY0IDEuNDc1LjY2NCAyLjc4N3ptMy4zNDYtOC41MDdMNy43ODQgOS40MjhINS45NzFsMi4xODItNC45NTR6Ii8+PHBhdGggY2xpcC1ydWxlPSJldmVub2RkIiBkPSJNMjguMzk2IDEzLjc2M2MtLjQ3Mi43MjItMS4xNSAxLjEwNi0xLjk3NSAxLjEwNi0xLjY1MiAwLTIuODAyLTEuMzU3LTIuODAyLTMuODA0IDAtMi40NzcgMS4xOC0zLjkwNyAyLjg3NS0zLjkwNy43NjcgMCAxLjQxNi4zNTQgMS44NTggMS4wMTd2LTMuN2gxLjc1NFYxNC43MmgtMS42MjF6bS0uMDQ0LTIuNzU3YzAtMS43MS0uNDcyLTIuNDYyLTEuNDE1LTIuNDYyLTEuMDAzIDAtMS41MDQuNzY2LTEuNTA0IDIuNTIgMCAxLjY4Mi40NzIgMi40MTkgMS40MyAyLjQxOS45ODggMCAxLjQ4OS0uNzUyIDEuNDg5LTIuNDc3em04Ljg0NiAxLjc4NHYxLjQzYy0uNTE2LjM1NC0xLjM0Mi42NDktMi40NjIuNjQ5LTIuMjQxIDAtMy41MDktMS4yNTQtMy41MDktMy44MzQgMC0yLjI0IDEuMDE3LTMuODc3IDMuMTU1LTMuODc3IDEuNzU1IDAgMi44OS45NzMgMi44OSAzLjU1M3YuOTI5SDMzLjA0Yy4wNzQgMS4yMzguNTYgMS44NDMgMS44NDMgMS44NDMuODU2IDAgMS43Ny0uMzI1IDIuMzE1LS42OTN6bS0xLjcxLTIuNTk1YzAtLjkyOS0uMjY1LTEuNjUxLTEuMTM1LTEuNjUxLS44NCAwLTEuMjY4LjYxOS0xLjMxMiAxLjc5OGgyLjQ0N3ptLTIwLjM2MS0uNTMxYzAtMS43OTktLjkxNC0yLjQ3Ny0yLjc3Mi0yLjQ3Ny0xLjE1IDAtMi4wNzkuNDg3LTIuNjEuODd2MS41MTljLjU2LS40NTcgMS40MTYtLjk4OCAyLjQwNC0uOTg4Ljg0IDAgMS4yMjQuMjk1IDEuMjI0IDEuMDl2LjQ3M2gtLjI4Yy0yLjY4NCAwLTMuODc4Ljg3LTMuODc4IDIuNDE4IDAgMS40My45MTQgMi4yNTUgMi4yNyAyLjI1NSAxLjAzMiAwIDEuNDc1LS4zMzkgMS44MTQtLjY5M2guMDczYy4wMTUuMTkyLjA3NC40NDMuMTMzLjU5aDEuNzFhMTguNjU4IDE4LjY1OCAwIDAgMS0uMDg4LTEuODEzem0tMS43NTQgMy4yODhjLS4yMjIuMzI0LS42MzQuNTktMS4yNTQuNTktLjczNyAwLTEuMTA1LS40MjgtMS4xMDUtMS4wNzcgMC0uODU1LjYwNC0xLjE1IDIuMTA4LTEuMTVoLjI1eiIgZmlsbC1ydWxlPSJldmVub2RkIi8+PHBhdGggZD0iTTE5Ljc4NiA4LjY2MmMtLjYzNCAwLTEuMTUuMzM5LTEuNDc0LjczN3Y1LjMyMmgtMS43NTVWNy4zMDVoMS43MWwuMDQ1LjYyaC4wODhjLjM1NC0uMzU0Ljk3My0uNzM4IDIuMDItLjczOCAxLjQzIDAgMi4wMi42NDkgMi4wMiAyLjEyM3Y1LjQxMWgtMS43NTVWOS40ODdjMC0uNTYtLjI4LS44MjUtLjg5OS0uODI1em0yMi44MDggNi4wNTloMS45NzZsLTIuNDE4LTMuODE4IDIuMDk0LTMuNTk4SDQyLjQ5bC0xLjI2OCAyLjI0MS0xLjQxNS0yLjI0aC0xLjk3NmwyLjI0MSAzLjU1Mi0yLjMzIDMuODYzaDEuNzg1bDEuNDg5LTIuNTA2eiIvPjwvZz48L3N2Zz4K"},36728:t=>{t.exports="data:image/svg+xml;base64,PHN2ZyBmaWxsPSJub25lIiBoZWlnaHQ9IjIwIiB3aWR0aD0iNDYiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PGNsaXBQYXRoIGlkPSJhIj48cGF0aCBkPSJNMCAwaDQ2djIwSDB6Ii8+PC9jbGlwUGF0aD48ZyBjbGlwLXBhdGg9InVybCgjYSkiPjxwYXRoIGQ9Ik05LjQyNCAxNS4zODRjLS4yMjYuMTMtLjQ4OC4yMDMtLjc2Ny4yMDNINi44YTEuNTMgMS41MyAwIDAgMS0xLjUyLTEuMzA1bC0uNDI4LjYzMmExLjU0IDEuNTQgMCAwIDEtMS4yNzYuNjczaC0yLjAxYTEuNTM4IDEuNTM4IDAgMCAxLTEuMzU1LS44MDQgMS41MDQgMS41MDQgMCAwIDEgLjA4LTEuNTZsMS42NS0yLjQyNmE1LjkwNSA1LjkwNSAwIDAgMS0uODUyLTEuMDE1Qy41NDQgOC45NS4yNzYgOC4wMTIuMjc2IDYuOTM0YzAtMS4zODcuNS0yLjY4NSAxLjU4LTMuNjE2QzIuOTEzIDIuNDEgNC4zNDkgMiA1Ljk1NyAyaDIuN2MuODQ4IDAgMS41MzYuNjggMS41MzYgMS41MTh2MS4zOTdoMS44MjZjLjQ5OCAwIC45NC4yMzQgMS4yMi41OTcuMjgtLjM2My43MjMtLjU5NyAxLjIyLS41OTdoMS44MjdjLjQwNyAwIC43NzcuMTU2IDEuMDUxLjQxMmExLjUzOSAxLjUzOSAwIDAgMSAxLjA1Mi0uNDEyaDUuMzI2Yy42NDYgMCAxLjIuMzk1IDEuNDI1Ljk1NC44MTctLjcyIDEuODg1LTEuMTA2IDMuMTE4LTEuMTA2IDEuMDExIDAgMi4wNTMuMjQgMi44OTguOTI2YTEuNTM3IDEuNTM3IDAgMCAxIDEuMzM4LS43NzRoMS44MjdjLjU0IDAgMS4wMTQuMjc1IDEuMjg4LjY5MmwuMDQ3LS4wNjRhMS41NCAxLjU0IDAgMCAxIDEuMjQzLS42MjhoMS44NDJjLjQ0NyAwIC44NjUuMTkyIDEuMTUyLjUxNS43NTgtLjQ0IDEuNjU0LS42NjcgMi42NC0uNjY3IDEuMDI2IDAgMi4wMDMuMTY0IDIuNzE0LjU1OC40ODUuMjY4Ljc4NS43NzUuNzg1IDEuMzI1djEuNTMzYzAgLjU1Mi0uMzAzIDEuMDYtLjc5MSAxLjMyOGExLjU1IDEuNTUgMCAwIDEtMS41NTgtLjA0IDEuNjkgMS42OSAwIDAgMC0uMzc1LS4xNTIgMi4xMjMgMi4xMjMgMCAwIDAtLjU3Ni0uMDg5LjUuNSAwIDAgMC0uMTQzLjAxNmwtLjAwMi4wMDNjLS4wMzkuMDUxLS4xNzcuMzAzLS4xNzcuOTY4cy4xMi45NjEuMTggMS4wNXYuMDAyYy4wMjEuMDA1LjA2LjAxLjEyNi4wMS40NjUgMCAuNzA4LS4xMDcuOS0uMjQuNDctLjMyNiAxLjA4Mi0uMzY1IDEuNTktLjEwNHMuODI2Ljc4LjgyNiAxLjM0N3YxLjQ3MmMwIC40ODctLjIzNi45NDUtLjYzNSAxLjIzLS44MS41OC0xLjc3Ni43Ni0yLjc4OC43Ni0uOTA3IDAtMS43NjQtLjE2LTIuNTE0LS41MmExLjU0NSAxLjU0NSAwIDAgMS0xIC4zNjdIMzcuMDJhMS41NCAxLjU0IDAgMCAxLTEuMjUtLjYzN2wtLjEwNy0uMTQ4YTEuNTM3IDEuNTM3IDAgMCAxLTEuMzQ0Ljc4NWgtMS44MjdjLS40MTQgMC0uNzktLjE2Mi0xLjA2NS0uNDI1LS43NTYuMzU3LTEuNzAzLjU3Ny0yLjgwMy41NzctLjkwOCAwLTEuNzg3LS4xNi0yLjU2My0uNTM4di42MTRjMCAuODM5LS42ODcgMS41MTgtMS41MzUgMS41MThIMjIuODRjLS44NDggMC0xLjUzNS0uNjgtMS41MzUtMS41MTh2LS4yMjhoLTEuMDI4di4yMjhjMCAuODM5LS42ODggMS41MTgtMS41MzUgMS41MThoLTEuNjg5Yy0uODQ3IDAtMS41MzQtLjY4LTEuNTM0LTEuNTE4di0uMjI4aC0xLjA2Yy0uNDk3IDAtLjk0LS4yMzQtMS4yMi0uNTk3LS4yOC4zNjMtLjcyMi41OTctMS4yMi41OTdoLTEuODI2Yy0uMjggMC0uNTQyLS4wNzQtLjc2OC0uMjAzeiIgZmlsbD0iI2ZmZiIgZmlsbC1vcGFjaXR5PSIuOCIvPjxnIGZpbGw9IiMwMDAiPjxwYXRoIGNsaXAtcnVsZT0iZXZlbm9kZCIgZD0iTTMxLjE1NyAxMi4xNXYxLjQ4OGMtLjUzNy4zNjgtMS4zOTUuNjc1LTIuNTYuNjc1LTIuMzMxIDAtMy42NS0xLjMwNC0zLjY1LTMuOTg3IDAtMi4zMyAxLjA1OC00LjAzMyAzLjI4MS00LjAzMyAxLjgyNSAwIDMuMDA2IDEuMDEyIDMuMDA2IDMuNjk2di45NjZoLTQuNGMuMDc2IDEuMjg4LjU4MiAxLjkxNiAxLjkxNiAxLjkxNi44OSAwIDEuODQtLjMzNyAyLjQwNy0uNzJ6bS0xLjc3OS0yLjY5OGMwLS45NjYtLjI3Ni0xLjcxNy0xLjE4LTEuNzE3LS44NzQgMC0xLjMxOS42NDQtMS4zNjUgMS44N2gyLjU0NXoiIGZpbGwtcnVsZT0iZXZlbm9kZCIvPjxwYXRoIGQ9Ik00NC40NTEgMTMuODM3Yy0uNDQ1LjMyMi0xLjA0My40NzYtMS44ODYuNDc2LTIuNDM4IDAtMy42MTktMS40MjYtMy42MTktNC4wMDIgMC0yLjM0NiAxLjIxMi00LjAxOCAzLjU0My00LjAxOC45MDQgMCAxLjU3OS4xNTQgMS45NjIuMzY4VjguMjFjLS4zNjgtLjIzLTEuMDU4LS40NzUtMS43NjMtLjQ3NS0xLjE5NiAwLTEuODU1Ljg1OC0xLjg1NSAyLjUzIDAgMS41OTQuNTM2IDIuNjA2IDEuODQgMi42MDYuNzY2IDAgMS4zMTgtLjE5OSAxLjc3OC0uNTIxek0xNC40NDQgOS40OThWNi40NDdoMS44MjR2Ny43MTJoLTEuODI0di0zLjIyaC0yLjQzOHYzLjIySDEwLjE4VjYuNDQ3aDEuODI1djMuMDUxeiIvPjxwYXRoIGNsaXAtcnVsZT0iZXZlbm9kZCIgZD0iTTIzLjY5IDEyLjcxOGguODEzdjMuMjA1aC0xLjY4N3YtMS43NjRoLTQuMDk0djEuNzY0aC0xLjY4N3YtMy4yMDVoLjU2OGMuNjQ0LTEuMjg4Ljc2Ni0zLjcyNi43NjYtNS42MTJ2LS42Nmg1LjMyem0tNC40IDBoMi41NzV2LTQuODNoLTEuOTMydi4yM2MwIDEuMzM0LS4xMzggMy40MzUtLjY0NCA0LjZ6IiBmaWxsLXJ1bGU9ImV2ZW5vZGQiLz48cGF0aCBkPSJNMzkuMDU0IDE0LjE2aC0yLjA3bC0yLjY5OS0zLjc4OHYzLjc4N2gtMS44MjRWNi40NDdoMS44MjR2My41NTdsMi41NzYtMy41NTdoMS44NGwtMi41NzYgMy41NTd6Ii8+PC9nPjxwYXRoIGQ9Ik02Ljc5MyAxNC4xNmgxLjg1NVYzLjUwMkg1Ljk0OWMtMi43MTQgMC00LjE0IDEuMzk1LTQuMTQgMy40NSAwIDEuNjQuNzgyIDIuNjA2IDIuMTc4IDMuNjAzbC0yLjQyMyAzLjYwM2gyLjAwOWwyLjY5OC00LjAzMi0uOTM1LS42MjlDNC4yMDEgOC43MyAzLjY0OSA4LjEzMiAzLjY0OSA2Ljg0NGMwLTEuMTM0Ljc5OC0xLjkwMSAyLjMxNi0xLjkwMWguODI4eiIgZmlsbD0icmVkIi8+PC9nPjwvc3ZnPgo="},7717:t=>{t.exports="data:image/svg+xml;base64,PHN2ZyBmaWxsPSJub25lIiBoZWlnaHQ9IjIwIiB3aWR0aD0iNDYiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PGNsaXBQYXRoIGlkPSJhIj48cGF0aCBkPSJNMCAwaDQ2djIwSDB6Ii8+PC9jbGlwUGF0aD48ZyBjbGlwLXBhdGg9InVybCgjYSkiPjxwYXRoIGQ9Ik05LjQyNCAxNS4zODRjLS4yMjYuMTMtLjQ4OC4yMDMtLjc2Ny4yMDNINi44YTEuNTMgMS41MyAwIDAgMS0xLjUyLTEuMzA1bC0uNDI4LjYzMmExLjU0IDEuNTQgMCAwIDEtMS4yNzYuNjczaC0yLjAxYTEuNTM4IDEuNTM4IDAgMCAxLTEuMzU1LS44MDQgMS41MDQgMS41MDQgMCAwIDEgLjA4LTEuNTZsMS42NS0yLjQyNmE1LjkwNSA1LjkwNSAwIDAgMS0uODUyLTEuMDE1Qy41NDQgOC45NS4yNzYgOC4wMTIuMjc2IDYuOTM0YzAtMS4zODcuNS0yLjY4NSAxLjU4LTMuNjE2QzIuOTEzIDIuNDEgNC4zNDkgMiA1Ljk1NyAyaDIuN2MuODQ4IDAgMS41MzYuNjggMS41MzYgMS41MTh2MS4zOTdoMS44MjZjLjQ5OCAwIC45NC4yMzQgMS4yMi41OTcuMjgtLjM2My43MjMtLjU5NyAxLjIyLS41OTdoMS44MjdjLjQwNyAwIC43NzcuMTU2IDEuMDUxLjQxMmExLjUzOSAxLjUzOSAwIDAgMSAxLjA1Mi0uNDEyaDUuMzI2Yy42NDYgMCAxLjIuMzk1IDEuNDI1Ljk1NC44MTctLjcyIDEuODg1LTEuMTA2IDMuMTE4LTEuMTA2IDEuMDExIDAgMi4wNTMuMjQgMi44OTguOTI2YTEuNTM3IDEuNTM3IDAgMCAxIDEuMzM4LS43NzRoMS44MjdjLjU0IDAgMS4wMTQuMjc1IDEuMjg4LjY5MmwuMDQ3LS4wNjRhMS41NCAxLjU0IDAgMCAxIDEuMjQzLS42MjhoMS44NDJjLjQ0NyAwIC44NjUuMTkyIDEuMTUyLjUxNS43NTgtLjQ0IDEuNjU0LS42NjcgMi42NC0uNjY3IDEuMDI2IDAgMi4wMDMuMTY0IDIuNzE0LjU1OC40ODUuMjY4Ljc4NS43NzUuNzg1IDEuMzI1djEuNTMzYzAgLjU1Mi0uMzAzIDEuMDYtLjc5MSAxLjMyOGExLjU1IDEuNTUgMCAwIDEtMS41NTgtLjA0IDEuNjkgMS42OSAwIDAgMC0uMzc1LS4xNTIgMi4xMjMgMi4xMjMgMCAwIDAtLjU3Ni0uMDg5LjUuNSAwIDAgMC0uMTQzLjAxNmwtLjAwMi4wMDNjLS4wMzkuMDUxLS4xNzcuMzAzLS4xNzcuOTY4cy4xMi45NjEuMTggMS4wNXYuMDAyYy4wMjEuMDA1LjA2LjAxLjEyNi4wMS40NjUgMCAuNzA4LS4xMDcuOS0uMjQuNDctLjMyNiAxLjA4Mi0uMzY1IDEuNTktLjEwNHMuODI2Ljc4LjgyNiAxLjM0N3YxLjQ3MmMwIC40ODctLjIzNi45NDUtLjYzNSAxLjIzLS44MS41OC0xLjc3Ni43Ni0yLjc4OC43Ni0uOTA3IDAtMS43NjQtLjE2LTIuNTE0LS41MmExLjU0NSAxLjU0NSAwIDAgMS0xIC4zNjdIMzcuMDJhMS41NCAxLjU0IDAgMCAxLTEuMjUtLjYzN2wtLjEwNy0uMTQ4YTEuNTM3IDEuNTM3IDAgMCAxLTEuMzQ0Ljc4NWgtMS44MjdjLS40MTQgMC0uNzktLjE2Mi0xLjA2NS0uNDI1LS43NTYuMzU3LTEuNzAzLjU3Ny0yLjgwMy41NzctLjkwOCAwLTEuNzg3LS4xNi0yLjU2My0uNTM4di42MTRjMCAuODM5LS42ODcgMS41MTgtMS41MzUgMS41MThIMjIuODRjLS44NDggMC0xLjUzNS0uNjgtMS41MzUtMS41MTh2LS4yMjhoLTEuMDI4di4yMjhjMCAuODM5LS42ODggMS41MTgtMS41MzUgMS41MThoLTEuNjg5Yy0uODQ3IDAtMS41MzQtLjY4LTEuNTM0LTEuNTE4di0uMjI4aC0xLjA2Yy0uNDk3IDAtLjk0LS4yMzQtMS4yMi0uNTk3LS4yOC4zNjMtLjcyMi41OTctMS4yMi41OTdoLTEuODI2Yy0uMjggMC0uNTQyLS4wNzQtLjc2OC0uMjAzeiIgZmlsbD0iIzAwMCIgZmlsbC1vcGFjaXR5PSIuNCIvPjxnIGZpbGw9IiNmZmYiPjxwYXRoIGQ9Ik04LjY0OCAxNC4xNkg2Ljc5M1Y0Ljk0M2gtLjgyOGMtMS41MTggMC0yLjMxNi43NjctMi4zMTYgMS45MDEgMCAxLjI4OC41NTIgMS44ODYgMS42ODcgMi42NTNsLjkzNS42MjktMi42OTggNC4wMzJIMS41NjRsMi40MjMtMy42MDNDMi41OSA5LjU1OSAxLjgwOSA4LjU5MyAxLjgwOSA2Ljk1M2MwLTIuMDU1IDEuNDI2LTMuNDUgNC4xNC0zLjQ1aDIuNjk5eiIvPjxwYXRoIGNsaXAtcnVsZT0iZXZlbm9kZCIgZD0iTTMxLjE1NyAxMi4xNXYxLjQ4OGMtLjUzNy4zNjgtMS4zOTUuNjc1LTIuNTYuNjc1LTIuMzMxIDAtMy42NS0xLjMwNC0zLjY1LTMuOTg3IDAtMi4zMyAxLjA1OC00LjAzMyAzLjI4MS00LjAzMyAxLjgyNSAwIDMuMDA2IDEuMDEyIDMuMDA2IDMuNjk2di45NjZoLTQuNGMuMDc2IDEuMjg4LjU4MiAxLjkxNiAxLjkxNiAxLjkxNi44OSAwIDEuODQtLjMzNyAyLjQwNy0uNzJ6bS0xLjc3OS0yLjY5OGMwLS45NjYtLjI3Ni0xLjcxNy0xLjE4LTEuNzE3LS44NzQgMC0xLjMxOS42NDQtMS4zNjUgMS44N2gyLjU0NXoiIGZpbGwtcnVsZT0iZXZlbm9kZCIvPjxwYXRoIGQ9Ik00NC40NTEgMTMuODM3Yy0uNDQ1LjMyMi0xLjA0My40NzYtMS44ODYuNDc2LTIuNDM4IDAtMy42MTktMS40MjYtMy42MTktNC4wMDIgMC0yLjM0NiAxLjIxMi00LjAxOCAzLjU0My00LjAxOC45MDQgMCAxLjU3OS4xNTQgMS45NjIuMzY4VjguMjFjLS4zNjgtLjIzLTEuMDU4LS40NzUtMS43NjMtLjQ3NS0xLjE5NiAwLTEuODU1Ljg1OC0xLjg1NSAyLjUzIDAgMS41OTQuNTM2IDIuNjA2IDEuODQgMi42MDYuNzY2IDAgMS4zMTgtLjE5OSAxLjc3OC0uNTIxem0tMzAuMDA3LTcuMzl2My4wNTFoLTIuNDM4VjYuNDQ3SDEwLjE4djcuNzEyaDEuODI1di0zLjIyaDIuNDM4djMuMjJoMS44MjRWNi40NDd6Ii8+PHBhdGggY2xpcC1ydWxlPSJldmVub2RkIiBkPSJNMjMuNjkgMTIuNzE4aC44MTN2My4yMDVoLTEuNjg3di0xLjc2NGgtNC4wOTR2MS43NjRoLTEuNjg3di0zLjIwNWguNTY4Yy42NDQtMS4yODguNzY2LTMuNzI2Ljc2Ni01LjYxMnYtLjY2aDUuMzJ6bS00LjQgMGgyLjU3NXYtNC44M2gtMS45MzJ2LjIzYzAgMS4zMzQtLjEzOCAzLjQzNS0uNjQ0IDQuNnoiIGZpbGwtcnVsZT0iZXZlbm9kZCIvPjxwYXRoIGQ9Ik0zNi45ODQgMTQuMTZoMi4wN2wtMi45MjktNC4xNTYgMi41NzYtMy41NTdoLTEuODRsLTIuNTc2IDMuNTU3VjYuNDQ3SDMyLjQ2djcuNzEyaDEuODI1di0zLjc4N3oiLz48L2c+PC9nPjwvc3ZnPgo="}},t=>{var e,i=(e=63322,t(t.s=e));self["@yandex/ymaps3-main"]=i}]);
